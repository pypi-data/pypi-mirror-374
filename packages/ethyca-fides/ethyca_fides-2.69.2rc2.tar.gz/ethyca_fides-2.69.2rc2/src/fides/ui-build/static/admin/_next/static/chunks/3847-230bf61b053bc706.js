"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3847],{35287:function(e,t,n){var r=n(24246),s=n(96306),a=n(88038),i=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:a}=e;return(0,r.jsxs)(s.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,r.jsxs)(i(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(s.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...a,children:t})]})}},34929:function(e,t,n){var r=n(24246),s=n(64925),a=n.n(s),i=n(27378),o=n(16134),l=n(30002),u=n(28079),c=n(57072);let d=()=>{let{isLoading:e}=(0,u.fd)(),t=(0,o.C)(u.U3),{isLoading:n}=(0,c.MO)(),r=(0,o.C)(c.qb),{isLoading:s}=(0,l.te)();return{dataUses:t,dataSubjects:(0,o.C)(l.ZL),dataCategories:r,isLoading:e||n||s}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:s}=d(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return{};let s=t(o(e,n)),a=!!r.parent_key;return{name:r.name||void 0,primaryName:a&&(null==s?void 0:s.name)!==r.name&&(null==s?void 0:s.name)||void 0}},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:s,primaryName:a}=l(e,t,n);return s?a?(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)("strong",{children:[a,":"]})," ",s]},e):(0,r.jsx)("strong",{children:s},e):e},c=t=>a()(e,{fides_key:t}),g=e=>a()(t,{fides_key:e}),p=e=>a()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:c,getDataUseDisplayName:e=>u(e,c,1),getDataUseDisplayNameProps:e=>l(e,c,1),getDataCategories:()=>t,getDataCategoryByKey:g,getDataCategoryDisplayName:e=>u(e,g,2),getDataCategoryDisplayNameProps:e=>l(e,g,2),getDataSubjects:()=>n,getDataSubjectByKey:p,getDataSubjectDisplayName:e=>{let t=p(e);return t?t.name:e},getPrimaryKey:o,isLoading:s}}},25415:function(e,t,n){n.d(t,{a:function(){return a}});var r=n(24246);let{Text:s}=n(96306).AntTypography,a=e=>{let{count:t}=e;return(0,r.jsx)(s,{size:"sm",strong:!0,"data-testid":"selected-count",children:"".concat(t," selected")})}},2525:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(24246),s=n(96306),a=n(27378),i=n(3110);let o=e=>{let{values:t,columnState:n,...o}=e,{isExpanded:l,isWrapped:u,version:c}=n||{},[d,g]=(0,a.useState)(!l),[p,m]=(0,a.useState)(!!u),[v,y]=(0,a.useState)(l?t:null==t?void 0:t.slice(0,2));(0,a.useEffect)(()=>{g(!l)},[l,c]),(0,a.useEffect)(()=>{m(!!u)},[u]),(0,a.useEffect)(()=>{(null==t?void 0:t.length)&&y(d?t.slice(0,2):t)},[d,t]);let f=(0,a.useCallback)(()=>{y(null==t?void 0:t.slice(0,2)),g(!0)},[t]),h=(0,a.useCallback)(()=>{g(!1)},[]),S=(0,a.useCallback)(()=>{d?h():f()},[d,h,f]);return(0,a.useMemo)(()=>(null==v?void 0:v.length)?(0,r.jsxs)(s.jqI,{align:"center",wrap:p?"wrap":"nowrap",gap:"small","data-testid":"tag-expandable-cell",children:[v.map(e=>(0,r.jsx)(s.j8w,{color:"white","data-testid":e.key,...o,children:e.label},e.key)),t&&t.length>2&&(0,r.jsx)(s.wpx,{type:"link",size:"small",onClick:e=>{e.stopPropagation(),S()},className:"h-auto p-0",style:{fontSize:"var(--ant-font-size)"},children:d?"+".concat(t.length-2," more"):i.T})]}):(0,r.jsx)("span",{"data-testid":"tag-expandable-cell-empty"}),[v,d,p,t,S,o])}},3110:function(e,t,n){n.d(t,{D:function(){return i},T:function(){return a}});var r=n(24246),s=n(96306);let a="show less",i=[{key:"expand-all",label:"Expand all",icon:(0,r.jsx)(s.PJP.jbG,{})},{key:"collapse-all",label:"Collapse all",icon:(0,r.jsx)(s.PJP.MVB,{})}]},26070:function(e,t,n){n.d(t,{v:function(){return l},Q:function(){return u.Q}});var r=n(24246),s=n(96306),a=n(27378),i=n(3110);let{Text:o}=s.AntTypography,l=e=>{let{values:t,valueSuffix:n,columnState:l}=e,{isExpanded:u,version:c}=l||{},[d,g]=(0,a.useState)(!u);(0,a.useEffect)(()=>{g(!u)},[u,c]);let p=(0,a.useCallback)(()=>{g(!0)},[]),m=(0,a.useCallback)(()=>{g(!1)},[]),v=(0,a.useCallback)(()=>{d?m():p()},[d,m,p]);return(0,a.useMemo)(()=>(null==t?void 0:t.length)?1===t.length?(0,r.jsx)(o,{ellipsis:!0,"data-testid":"list-expandable-cell-single",children:t[0]}):(0,r.jsxs)(s.jqI,{align:d?"center":"flex-start",vertical:!d,gap:d?"small":"none","data-testid":"list-expandable-cell",children:[d?(0,r.jsxs)(o,{ellipsis:!0,children:[t.length," ",n]}):(0,r.jsx)(s.krs,{dataSource:t,renderItem:e=>(0,r.jsx)("li",{children:e})}),(0,r.jsx)(s.wpx,{type:"link",size:"small",onClick:e=>{e.stopPropagation(),v()},className:"h-auto p-0",style:{fontSize:"var(--ant-font-size)"},children:d?"view":i.T})]}):null,[d,t,n,v])};var u=n(2525)},8125:function(e,t,n){n.d(t,{V:function(){return a},o:function(){return u}});var r=n(27378),s=n(32735);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enableSelection:n=!1,getRowKey:a,bulkActions:i,isLoading:o=!1,isFetching:l=!1,dataSource:u=[],totalRows:c=0,currentPage:d,pageSize:g,customTableProps:p={}}=t,m=(0,r.useCallback)(e=>{if(e&&"object"==typeof e){if(e.id)return String(e.id);if(e.key)return String(e.key)}return String(e)},[]),v=a||m,[y,f]=(0,r.useState)([]),[h,S]=(0,r.useState)([]),T=(0,r.useCallback)(()=>{f([]),S([])},[]),_=(0,r.useMemo)(()=>({selectedRowKeys:y,selectedRows:h,resetSelections:T}),[y,h,T]),C=(0,r.useMemo)(()=>{if(n)return{selectedRowKeys:y,onChange:(e,t)=>{f(e),S(t)}}},[n,y]),x=(0,r.useCallback)((t,n,r)=>{var s,a;let i=null!==(s=t.current)&&void 0!==s?s:e.pageIndex,o=null!==(a=t.pageSize)&&void 0!==a?a:e.pageSize,l=i!==e.pageIndex||o!==e.pageSize;l?(t.current&&t.current!==e.pageIndex&&e.updatePageIndex(t.current),t.pageSize&&t.pageSize!==e.pageSize&&e.updatePageSize(t.pageSize)):e.updateFilters(n||{});let u=r&&!Array.isArray(r)?r.field:void 0,c=r&&!Array.isArray(r)&&null!==r.order?r.order:void 0;l||e.updateSorting(u,c)},[e]),A=(0,r.useMemo)(()=>{var t,n,r,a,i;return{current:null!=d?d:e.pageIndex,pageSize:null!=g?g:e.pageSize,total:c,showSizeChanger:null===(a=null===(t=e.paginationConfig)||void 0===t?void 0:t.showSizeChanger)||void 0===a||a,pageSizeOptions:null!==(i=null===(r=e.paginationConfig)||void 0===r?void 0:null===(n=r.pageSizeOptions)||void 0===n?void 0:n.map(String))&&void 0!==i?i:s.VZ}},[d,e.pageIndex,g,e.pageSize,c,e.paginationConfig]),b=(0,r.useMemo)(()=>({dataSource:u,loading:o||l,pagination:A,onChange:x,rowKey:v,scroll:{x:"max-content",scrollToFirstRowOnChange:!0},size:"small",bordered:!0,...p}),[u,o,l,A,x,v,p]),D=y.map(String),E=h.length>0,k=(0,r.useCallback)(e=>{let t=null==i?void 0:i.actions.find(t=>t.key===e);return t?{disabled:!E||!!t.disabled&&t.disabled(h),loading:t.loading||!1,onClick:()=>t.onClick(h)}:{disabled:!0,loading:!1}},[i,E,h]);return(0,r.useMemo)(()=>({tableProps:b,selectionProps:C,selectionState:_,selectedRows:h,selectedKeys:D,hasSelectedRows:E,resetSelections:T,getBulkActionProps:k,isLoadingOrFetching:o||l,hasData:u.length>0}),[b,C,_,h,D,E,T,k,o,l,u.length])};var i=n(40431),o=n(41841);let l=()=>({filters:(0,i.WJ)(e=>e).withDefault({})}),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pagination:t={},sorting:n={},search:s={},onStateChange:a}=e,{pageIndex:u,pageSize:c,resetPagination:d,updatePageIndex:g,updatePageSize:p,pageSizeOptions:m,showSizeChanger:v}=(0,o.h0)(t),{sortKey:y,sortOrder:f,updateSorting:h,resetSorting:S}=(0,o.rK)(n),{searchQuery:T,updateSearch:_,resetSearch:C}=(0,o.Rx)(s),x=(0,r.useMemo)(()=>l(),[]),[A,b]=(0,i.XI)(x,{history:"push"}),D=(0,r.useMemo)(()=>{var e;return{pageIndex:u,pageSize:c,sortKey:y,sortOrder:f,columnFilters:null!==(e=A.filters)&&void 0!==e?e:{},searchQuery:T}},[A,u,c,y,f,T]),E=(0,r.useCallback)((e,t)=>{h(e,t),d()},[h,d]),k=(0,r.useCallback)(e=>{let t=Object.fromEntries(Object.entries(e).filter(e=>{let[,t]=e;return null!=t}));b({filters:Object.keys(t).length>0?t:null}),d()},[b,d]),O=(0,r.useCallback)(e=>{_(e),d()},[_,d]),M=(0,r.useCallback)(()=>{b({filters:null}),d(),S(),C()},[b,d,S,C]);return(0,r.useEffect)(()=>{a&&a(D)},[D,a]),{state:D,pageIndex:D.pageIndex,pageSize:D.pageSize,updatePageIndex:g,updatePageSize:p,sortKey:D.sortKey,sortOrder:D.sortOrder,updateSorting:E,columnFilters:D.columnFilters,updateFilters:k,searchQuery:D.searchQuery,updateSearch:O,resetState:M,paginationConfig:{pageSizeOptions:m,showSizeChanger:v}}}},54762:function(e,t,n){n.d(t,{l:function(){return o}});var r=n(24246),s=n(96306),a=n(62165),i=n(54682);let o=e=>{let{consentStatus:t}=e,{flags:n}=(0,a.hz)(),{assetConsentStatusLabels:o}=n;return o&&(null==t?void 0:t.status)===i.pF.ALERT?(0,r.jsx)(s.esZ,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,r.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,r.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},9320:function(e,t,n){n.d(t,{_:function(){return a}});var r=n(24246),s=n(26089);let a=(e,t)=>(0,r.jsxs)(r.Fragment,{children:[e," ",t&&(0,r.jsx)(s.Z,{onClick:t,children:"View"})]})},37059:function(e,t,n){n.d(t,{Ak:function(){return y},EY:function(){return g},Tj:function(){return m},Ud:function(){return o},Vr:function(){return f},WJ:function(){return u},mi:function(){return h},nP:function(){return d},nS:function(){return p},rs:function(){return c},sX:function(){return v},ut:function(){return S},wi:function(){return l}});var r=n(78780),s=n(16394),a=n(54682),i=n(98145);let{useGetAggregateMonitorResultsQuery:o,useGetDiscoveredSystemAggregateQuery:l,useGetDiscoveredAssetsQuery:u,useAddMonitorResultSystemsMutation:c,useIgnoreMonitorResultSystemsMutation:d,useAddMonitorResultAssetsMutation:g,useIgnoreMonitorResultAssetsMutation:p,useRestoreMonitorResultAssetsMutation:m,useUpdateAssetsSystemMutation:v,useUpdateAssetsDataUseMutation:y,useUpdateAssetsMutation:f,useGetConsentBreakdownQuery:h,useGetWebsiteMonitorResourceFiltersQuery:S}=r.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:r}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:r,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:r=20,search:s,diff_status:a}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:r,search:s,diff_status:a}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:r=1,size:o=20,search:l,diff_status:u=[a.LL.ADDITION],sort_by:c=[i.r6.CONSENT_AGGREGATED,"urn"],sort_asc:d=!0,resource_type:g,data_uses:p,locations:m,consent_aggregated:v}=e,y=Array.isArray(c)?c:[c],f=(0,s.$J)({sort_by:y,resource_type:g,data_uses:p,locations:m,consent_aggregated:v});return{url:"/plus/discovery-monitor/".concat(t,"/results?").concat(f.toString()),params:{resolved_system_id:n,page:r,size:o,search:l,diff_status:u,sort_asc:d}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,s.du)(n,"resolved_system_ids");return{url:"/plus/discovery-monitor/".concat(t,"/promote"),method:"POST",params:r?new URLSearchParams(r):new URLSearchParams}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,s.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams({status_to_set:a.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]}),getConsentBreakdown:e.query({query:e=>{let{stagedResourceUrn:t,status:n,page:r=1,size:s=20}=e;return{url:"/plus/discovery-monitor/staged_resource/".concat(encodeURIComponent(t),"/consent"),params:{status:n,page:r,size:s}}}}),getWebsiteMonitorResourceFilters:e.query({query:e=>{let{monitor_config_id:t,resolved_system_id:n,diff_status:r=[a.LL.ADDITION],search:i,resource_type:o,data_uses:l,locations:u,consent_aggregated:c}=e,d={monitor_config_id:t,resolved_system_id:n,diff_status:r};i&&(d.search=i);let g=(0,s.$J)({resource_type:o,data_uses:l,locations:u,consent_aggregated:c}).toString();return{url:g?"/plus/filters/website_monitor_resources?".concat(g):"/plus/filters/website_monitor_resources",params:d}},providesTags:["Discovery Monitor Results"]})})})},98145:function(e,t,n){var r,s,a,i,o,l,u,c;n.d(t,{EI:function(){return i},X1:function(){return r},r6:function(){return s},vQ:function(){return a}}),(o=r||(r={})).WITH_CONSENT="With consent",o.WITHOUT_CONSENT="Without consent",o.EXEMPT="Exempt",o.UNKNOWN="Unknown",(l=s||(s={})).NAME="name",l.RESOURCE_TYPE="resource_type",l.SYSTEM="system",l.DATA_USES="data_uses",l.LOCATIONS="locations",l.DOMAIN="domain",l.PAGE="page",l.CONSENT_AGGREGATED="consent_aggregated",l.ACTIONS="actions",(u=a||(a={})).SYSTEM_NAME="system_name",u.TOTAL_UPDATES="total_updates",u.DATA_USE="data_use",u.LOCATIONS="locations",u.DOMAINS="domains",u.ACTIONS="actions",(c=i||(i={})).LOCATION="location",c.PAGE="page"},88708:function(e,t,n){n.d(t,{A:function(){return s}});var r,s,a=n(27378),i=n(14908),o=n(54682);(r=s||(s={})).ATTENTION_REQUIRED="attention-required",r.RECENT_ACTIVITY="recent-activity",r.IGNORED="ignored",t.Z=e=>{let{activeTab:t,onTabChange:n}=(0,i.Z)({tabKeys:Object.values(s)}),r=(0,a.useMemo)(()=>[{label:"Attention required",params:{diff_status:[o.LL.ADDITION],system:e},hash:"attention-required"},{label:"Recent activity",params:{diff_status:[o.LL.MONITORED]},hash:"recent-activity"},{label:"Ignored",params:{diff_status:[o.LL.MUTED],system:e},hash:"ignored"}],[e]),{diff_status:l,system:u}=(0,a.useMemo)(()=>{var e;return null!==(e=r.find(e=>e.hash===t))&&void 0!==e?e:r[0]},[r,t]).params,c=(0,a.useMemo)(()=>l.includes(o.LL.MONITORED),[l]);return{filterTabs:r,activeTab:t,onTabChange:n,activeParams:(0,a.useMemo)(()=>e?{diff_status:l,system:u}:{diff_status:l},[e,l,u]),actionsDisabled:c}}},78238:function(e,t,n){n.d(t,{g:function(){return r}});let r=["essential","functional.service.improve","personalize","analytics","marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"];t.Z=e=>r.includes(e)}}]);