import{j,m as x,c as _,o as v,a as u,F as z,v as M,t as E,s as q,b as l,w as t,d as a,_ as te,n as X,r as p,l as D,q as m,z as ae,x as G,y as I}from"./MeCQZJKc.js";import{_ as le}from"./Ow408XVP.js";import{m as oe,n as P,s as L,o as ne,p as se,u as ue}from"./CAUlWrmV.js";import{S as re,Q as J,a as W}from"./ByiccCSa.js";import{r as ie}from"./DueXm2QC.js";import{i as de}from"./DeaeknEB.js";const ce={class:"table usa-table usa-table--borderless"},me=u("thead",null,[u("tr",null,[u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Identifier"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Catalog"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Tags"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"}," Quality Attribute Category "),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Code Type"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Actions")])],-1),fe={key:0},pe=j({__name:"entry-list",props:{modelValue:{type:Array,required:!0}},emits:["addEntry","editEntry","deleteEntry"],setup(r,{emit:h}){const d=h;return(y,b)=>{const o=x("UsaButton");return v(),_("table",ce,[me,(v(!0),_(z,null,M(r.modelValue,(c,f)=>(v(),_("tr",{key:f},[u("td",null,E(c.header.identifier),1),u("td",null,E(c.header.catalog_id),1),u("td",null,[(v(!0),_(z,null,M(c.tags,(C,w)=>(v(),_("span",{key:w},[u("span",null,E(C),1),w+1<c.tags.length?(v(),_("span",fe,", ")):q("",!0)]))),128))]),u("td",null,E(c.qa_category),1),u("td",null,E(c.code_type),1),u("td",null,[l(o,{class:"secondary-button",onClick:C=>d("editEntry",c)},{default:t(()=>[a(" Edit ")]),_:2},1032,["onClick"]),l(o,{class:"usa-button usa-button--secondary",onClick:C=>d("deleteEntry",c.header.catalog_id,c.header.identifier)},{default:t(()=>[a(" Delete ")]),_:2},1032,["onClick"])])]))),128))])}}}),ye="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%201H4c-1.1%200-2%20.9-2%202v14h2V3h12V1zm3%204H8c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h11c1.1%200%202-.9%202-2V7c0-1.1-.9-2-2-2zm0%2016H8V7h11v14z'/%3e%3c/svg%3e",ge={},ve=u("img",{src:ye,class:"inline-icon usa-icon"},null,-1);function Ve(r,h){const d=x("UsaButton");return v(),X(d,{variant:"unstyled",class:"inline-icon"},{default:t(()=>[ve]),_:1})}const _e=te(ge,[["render",Ve]]),he={key:0},be={class:"section-header"},Ce=u("h3",{style:{display:"inline"}},"Created by:",-1),we={key:1},xe={class:"multi-line-checkbox-div"},Ee={class:"usa-label"},Ue={class:"submit-footer"},Ae=j({__name:"entry-edit",props:{modelValue:{type:Object,required:!0},newEntryFlag:{type:Boolean,required:!0}},emits:["cancel","submit","updateEntry"],async setup(r,{emit:h}){let d,y;const b=h,o=r,c=p("");c.value=new Date(o.modelValue.header.created*1e3).toLocaleString("en-US");const f=p({catalog:!1,identifier:!1,code_type:!1}),C=p([]),w=p([]);w.value=([d,y]=D(()=>oe()),d=await d,y(),d),w.value&&w.value.forEach(n=>{n.read_only||C.value.push(new re(n.id,n.id+" ("+n.type.replaceAll("_"," ")+")"))});const S=p([]),$=p([]);$.value=([d,y]=D(()=>P("qa_categories")),d=await d,y(),d),$.value&&$.value.forEach(n=>{S.value.push(new J(n.name,n.name,n.description,n.parent))});const k=p([]),B=p([]),T=p([]);T.value=([d,y]=D(()=>P("quality_attributes")),d=await d,y(),d),T.value&&T.value.forEach(n=>{B.value.push(new J(n.name,n.name,n.description,n.parent))});const V=p([{name:"Audio Analysis",selected:!1},{name:"Classification",selected:!1},{name:"Computer Vision",selected:!1},{name:"Decoder",selected:!1},{name:"Encoder",selected:!1},{name:"General",selected:!1},{name:"Generative Model",selected:!1},{name:"Infrared",selected:!1},{name:"NLP",selected:!1},{name:"Object Detection",selected:!1},{name:"Sentiment Analysis",selected:!1},{name:"Regression",selected:!1},{name:"Segmentation",selected:!1},{name:"Tabular",selected:!1},{name:"Time Series",selected:!1}]),i=p([{value:"measurement",text:"Measurement"},{value:"validation",text:"Validation "}]);V.value.forEach(n=>{o.modelValue.tags.find(e=>e===n.name)&&(n.selected=!0)}),Q(o.modelValue.qa_category,o.modelValue.quality_attribute);async function A(){f.value=ie(f.value);let n=!1;if(o.modelValue.header.catalog_id===""&&(f.value.catalog=!0,n=!0),o.modelValue.header.identifier===""&&(f.value.identifier=!0,n=!0),o.modelValue.code_type===""&&(f.value.code_type=!0,n=!0),n){de();return}b("submit",o.modelValue)}function O(n,e){if(n)o.modelValue.tags.push(e),o.modelValue.tags.sort();else{const g=o.modelValue.tags.find(U=>U===e);if(g){const U=o.modelValue.tags.indexOf(g);o.modelValue.tags.splice(U,1)}}}function Q(n,e){k.value=[],B.value.forEach(g=>{g.parent==n&&k.value.push(g)}),typeof e>"u"?o.modelValue.quality_attribute="":o.modelValue.quality_attribute=e}function N(){navigator.clipboard.writeText(o.modelValue.code)}return(n,e)=>{const g=le,U=x("UsaSelect"),F=x("UsaTextInput"),Y=x("UsaCheckbox"),Z=_e,H=x("UsaTextarea"),K=x("UsaButton");return v(),_("div",null,[r.newEntryFlag?q("",!0):(v(),_("div",he,[u("h1",be,E(r.modelValue.header.identifier),1),Ce,a(" "+E(r.modelValue.header.creator)+" - "+E(m(c)),1)])),r.newEntryFlag?(v(),_("div",we,[l(U,{modelValue:r.modelValue.header.catalog_id,"onUpdate:modelValue":e[0]||(e[0]=s=>r.modelValue.header.catalog_id=s),options:m(C),error:m(f).catalog,onChange:e[1]||(e[1]=s=>m(f).catalog=!1)},{label:t(()=>[a(" Catalog "),l(g,null,{default:t(()=>[a(" Catalog where test example will be stored. ")]),_:1})]),"error-message":t(()=>[a("A catalog must be selected")]),_:1},8,["modelValue","options","error"]),l(F,{modelValue:o.modelValue.header.identifier,"onUpdate:modelValue":e[2]||(e[2]=s=>o.modelValue.header.identifier=s),error:m(f).identifier},{label:t(()=>[a(" Identifier "),l(g,null,{default:t(()=>[a(" User-defined identifier for the test example. ")]),_:1})]),"error-message":t(()=>[a("Identifier is required.")]),_:1},8,["modelValue","error"])])):q("",!0),u("div",xe,[u("label",Ee,[a(" Tags "),l(g,null,{default:t(()=>[a(" System-defined tags that are used in catalog search. Select as many as are relevant to the test example. ")]),_:1})]),(v(!0),_(z,null,M(m(V),(s,ee)=>(v(),_("span",{key:ee,class:"multiple-per-line-checkbox"},[l(Y,{modelValue:s.selected,"onUpdate:modelValue":[R=>s.selected=R,R=>O(s.selected,s.name)]},{default:t(()=>[a(E(s.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),l(U,{modelValue:r.modelValue.qa_category,"onUpdate:modelValue":e[3]||(e[3]=s=>r.modelValue.qa_category=s),options:m(S),onChange:e[4]||(e[4]=s=>Q(r.modelValue.qa_category))},{label:t(()=>[a(" Quality Attribute Category "),l(g,null,{default:t(()=>[a(" High-level quality attribute category that the test example is validating, e.g., functional correctness, performance, robustness. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue","options"]),l(U,{modelValue:r.modelValue.quality_attribute,"onUpdate:modelValue":e[5]||(e[5]=s=>r.modelValue.quality_attribute=s),options:m(k)},{label:t(()=>[a(" Quality Attribute "),l(g,null,{default:t(()=>[a(" More specific quality attribute that the test example is validating, e.g., accuracy, inference time, robustness to image blur. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue","options"]),l(U,{modelValue:r.modelValue.code_type,"onUpdate:modelValue":e[6]||(e[6]=s=>r.modelValue.code_type=s),error:m(f).code_type,options:m(i),onChange:e[7]||(e[7]=s=>m(f).code_type=!1)},{label:t(()=>[a("Code Type")]),"error-message":t(()=>[a("Code Type must be selected")]),_:1},8,["modelValue","error","options"]),l(H,{modelValue:r.modelValue.code,"onUpdate:modelValue":e[9]||(e[9]=s=>r.modelValue.code=s),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:t(()=>[a(" Code "),l(g,null,{default:t(()=>[a(" Code for the test example. ")]),_:1}),l(Z,{onClick:e[8]||(e[8]=s=>N())})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue"]),l(H,{modelValue:r.modelValue.description,"onUpdate:modelValue":e[10]||(e[10]=s=>r.modelValue.description=s),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:t(()=>[a(" Description "),l(g,null,{default:t(()=>[a(" Description of the test example. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue"]),l(F,{modelValue:r.modelValue.inputs,"onUpdate:modelValue":e[11]||(e[11]=s=>r.modelValue.inputs=s)},{label:t(()=>[a(" Inputs "),l(g,null,{default:t(()=>[a(" Inputs that are required to run the test example, e.g., data sets, parameters. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue"]),l(F,{modelValue:r.modelValue.output,"onUpdate:modelValue":e[12]||(e[12]=s=>r.modelValue.output=s)},{label:t(()=>[a(" Output "),l(g,null,{default:t(()=>[a(" Output of the test example, e.g., value, log entry, database entry, alert. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue"]),u("div",Ue,[l(K,{class:"primary-button",onClick:e[13]||(e[13]=s=>b("cancel"))},{default:t(()=>[a(" Cancel ")]),_:1}),l(K,{class:"primary-button",onClick:A},{default:t(()=>[a(" Save ")]),_:1})])])}}}),$e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15.5%2014h-.79l-.28-.27A6.471%206.471%200%200%200%2016%209.5%206.5%206.5%200%201%200%209.5%2016c1.61%200%203.09-.59%204.23-1.57l.27.28v.79l5%204.99L20.49%2019l-4.99-5zm-6%200C7.01%2014%205%2011.99%205%209.5S7.01%205%209.5%205%2014%207.01%2014%209.5%2011.99%2014%209.5%2014z'/%3e%3c/svg%3e",ke=u("title",null,"Test Catalog",-1),Te={key:0},qe={class:"inline-input-left"},Se=u("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Tag ",-1),Be={class:"inline-input-right"},Oe=u("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Quality Attribute Category ",-1),Qe={class:"inline-button"},Ie=u("img",{src:$e,class:"usa-icon"},null,-1),Le={key:1},He=j({__name:"test-catalog",setup(r){const h=p(!1),d=p(!1),y=p(""),b=p(""),o=p([]),c=p(new W);f();async function f(){o.value=await L({filter:{type:"all"}})}async function C(){y.value===""&&b.value===""?f():b.value===""?o.value=await L({filter:{type:"tag",name:"tags",value:y.value}}):y.value===""?o.value=await L({filter:{type:"property",name:"qa_category",value:b.value}}):o.value=await L({filter:{type:"and",filters:[{type:"tag",name:"tags",value:y.value},{type:"property",name:"qa_category",value:b.value}]}})}function w(){c.value=new W}function S(){w(),h.value=!0,d.value=!0}function $(V){c.value=V,h.value=!0,d.value=!1}async function k(V,i){if(!confirm("Are you sure you want to delete the entry: "+i+" in the "+V+" catalog?"))return;await ne(V,i)&&f()}function B(){confirm("Are you sure you want to cancel? All changes will be lost.")&&(h.value=!1,w())}async function T(V){let i=!0;d.value?await se(V.header.catalog_id,V)&&(i=!1):await ue(V.header.catalog_id,V)&&(i=!1),i||(f(),w(),h.value=!1)}return(V,i)=>{const A=x("UsaButton"),O=x("UsaTextInput"),Q=pe,N=Ae,n=ae;return v(),X(n,{name:"base-layout"},{"page-title":t(()=>[a("Test Catalog")]),default:t(()=>[ke,m(h)?q("",!0):(v(),_("div",Te,[l(A,{class:"secondary-button sub-header-float-button",onClick:S},{default:t(()=>[a(" Add Catalog Entry ")]),_:1}),u("div",qe,[Se,l(O,{modelValue:m(y),"onUpdate:modelValue":i[0]||(i[0]=e=>I(y)?y.value=e:null),onKeyup:i[1]||(i[1]=G(e=>C(),["enter"]))},null,8,["modelValue"])]),u("div",Be,[Oe,l(O,{modelValue:m(b),"onUpdate:modelValue":i[2]||(i[2]=e=>I(b)?b.value=e:null),onKeyup:i[3]||(i[3]=G(e=>C(),["enter"]))},null,8,["modelValue"])]),u("div",Qe,[l(A,{class:"usa-button--unstyled",onClick:i[4]||(i[4]=e=>C())},{default:t(()=>[Ie]),_:1})]),l(Q,{modelValue:m(o),"onUpdate:modelValue":i[5]||(i[5]=e=>I(o)?o.value=e:null),onEditEntry:$,onDeleteEntry:k},null,8,["modelValue"])])),m(h)?(v(),_("div",Le,[l(N,{modelValue:m(c),"onUpdate:modelValue":i[6]||(i[6]=e=>I(c)?c.value=e:null),"new-entry-flag":m(d),onCancel:B,onSubmit:T},null,8,["modelValue","new-entry-flag"])])):q("",!0)]),_:1})}}});export{He as default};
