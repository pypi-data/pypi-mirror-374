import{_ as U}from"./E-O1Lw5O.js";import{_ as F}from"./CdYzWCnB.js";import{j as S,C as D,r as u,l as B,m as H,n as z,w as m,z as O,o,a as r,c as l,q as c,b as I,F as b,v as x,d as y,t as d}from"./MeCQZJKc.js";import{a as W,b as G}from"./CAUlWrmV.js";import{C as J}from"./ByiccCSa.js";const K=r("title",null,"Report Evolution",-1),P={key:0},Q={key:1},X={key:2},Y={class:"multi-line-checkbox-div",style:{width:"100%",display:"inline-block"}},Z=r("label",{class:"usa-label"},"Versions",-1),ee={style:{"overflow-x":"scroll"}},te={class:"table usa-table usa-table--borderless sortable"},se={"data-sort-method":"none"},oe={key:0},ae={key:1,class:"success-td"},le=["onClick"],ne={key:2,class:"info-td"},ie=["onClick"],re={key:3,class:"failure-td"},ue=["onClick"],ce={key:4},pe=S({__name:"report-evolution",async setup(de){let _,k;const C=D().query.model,V=u(!1),A=u(""),R=u(),v=u({}),$=u([]),h=([_,k]=B(()=>W(C)),_=await _,k(),_),g=u(["Version","Identifier"]),E=u([]),f=u([]),N=u(-1);if(h.length>0){h.forEach(t=>{$.value.push(new J(t,!0))});for(const t of h)v.value[t]=[],([_,k]=B(()=>G(C,t)),_=await _,k(),_).forEach(e=>{e.body.artifact_type==="report"&&v.value[t].push(e)});N.value=Object.keys(v.value).findIndex(t=>v.value[t].length>0),N.value>-1&&(Object.keys(v.value).forEach(t=>{v.value[t].forEach(n=>{Object.keys(n.body.test_results.results).forEach(e=>{g.value.includes(e)||g.value.push(e)})})}),h.forEach(t=>{v.value[t].forEach(n=>{const e={version:{value:t},identifier:{value:n.header.identifier}};g.value.forEach(i=>{i!=="Version"&&i!=="Identifier"&&(i in n.body.test_results.results?e[i]={value:n.body.test_results.results[i].type,message:n.body.test_results.results[i].message}:e[i]={value:"N/A",message:"N/A"})}),E.value.push(e)})})),f.value=E.value}function L(t,n){t?(E.value.forEach(e=>{e.version.value==n&&f.value.push(e)}),f.value.sort((e,i)=>e.version.value<i.version.value?-1:e.version.value>i.version.value?1:0)):f.value=f.value.filter(e=>e.version.value!==n)}function w(t,n,e){A.value=t,R.value=n+": "+e,V.value=!0}return(t,n)=>{const e=H("UsaCheckbox"),i=U,M=F,T=O;return o(),z(T,{name:"base-layout"},{"page-title":m(()=>[y("Artifact Store")]),default:m(()=>[K,c(h).length===0?(o(),l("div",P,"No versions in model.")):c(N)===-1?(o(),l("div",Q," No reports in any model versions. ")):(o(),l("div",X,[r("div",Y,[Z,(o(!0),l(b,null,x(c($),(a,p)=>(o(),l("span",{key:p,class:"multiple-per-line-checkbox",style:{width:"30%"}},[I(e,{modelValue:a.selected,"onUpdate:modelValue":[s=>a.selected=s,s=>L(a.selected,a.name)]},{default:m(()=>[y(d(a.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),I(i,{visible:c(V),onToggleVisible:n[0]||(n[0]=a=>V.value=a)},{heading:m(()=>[y(d(c(A)),1)]),default:m(()=>[y(" "+d(c(R)),1)]),_:1},8,["visible"]),r("div",ee,[r("table",te,[r("thead",null,[r("tr",se,[(o(!0),l(b,null,x(c(g),(a,p)=>(o(),l("th",{key:p,"data-sortable":"",scope:"col",role:"columnheader"},d(a),1))),128))])]),r("tbody",null,[(o(!0),l(b,null,x(c(f),(a,p)=>(o(),l("tr",{key:p},[(o(!0),l(b,null,x(a,(s,j)=>(o(),l(b,{key:j},[j==="identifier"?(o(),l("td",oe,[I(M,{to:{path:"/artifact-views/report-view",query:{model:c(C),version:a.version.value,artifactId:a.identifier.value}},target:"_blank"},{default:m(()=>[y(d(s.value),1)]),_:2},1032,["to"])])):s.value==="Success"?(o(),l("td",ae,[r("div",{class:"modal-button",onClick:q=>w(a.identifier.value,s.value,s.message)},d(s.value),9,le)])):s.value==="Info"?(o(),l("td",ne,[r("div",{class:"modal-button",onClick:q=>w(a.identifier.value,s.value,s.message)},d(s.value),9,ie)])):s.value==="Failure"?(o(),l("td",re,[r("div",{class:"modal-button",onClick:q=>w(a.identifier.value,s.value,s.message)},d(s.value),9,ue)])):(o(),l("td",ce,d(s.value),1))],64))),128))]))),128))])])])]))]),_:1})}}});export{pe as default};
