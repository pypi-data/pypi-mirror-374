[tool:pytest]
# Pytest configuration file following 2024/2025 best practices

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Python path for imports (src layout)
pythonpath = src

# Add options
addopts = 
    # Coverage reporting
    --cov=src/meta_learning
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-report=term-missing
    --cov-fail-under=85
    
    # Test output formatting
    --tb=short
    --strict-markers
    --strict-config
    
    # Warnings
    --disable-warnings
    
    # Parallel execution (use all available cores)
    -n auto
    
    # Hypothesis integration
    --hypothesis-show-statistics
    --hypothesis-verbosity=normal
    
    # Markers
    -m "not slow"

# Markers for organizing tests
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (moderate speed)
    slow: Slow tests (require significant time/resources)
    property: Property-based tests using Hypothesis
    fixme_solution: Tests specifically for FIXME implementations
    research_accuracy: Tests verifying research paper accuracy
    configuration: Tests for configuration systems
    factory: Tests for factory functions
    ci_skip: Tests to skip in CI environments
    gpu_required: Tests requiring GPU access
    
# Filter warnings
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    
# Minimum Python version
minversion = 6.0

# Log configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Timeout for tests
timeout = 300

# Test collection timeout
collect_ignore = [
    "src/meta_learning/meta_learning_modules/old_archive",
    "build",
    "dist"
]