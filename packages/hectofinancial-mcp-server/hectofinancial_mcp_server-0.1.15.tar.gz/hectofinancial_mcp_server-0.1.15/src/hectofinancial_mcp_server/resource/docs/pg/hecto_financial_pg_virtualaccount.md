# 14\. 가상계좌 결제(UI)

## 14.1 요청 전문 (가맹점 → 헥토파이낸셜)

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| method | 결제수단 | PG 서비스에 해당하는 결제 구분 코드 | AN(20) | ●   | “vbank”  <br>※ 고정값 |
| trdDt | 요청일자 | yyyyMMdd | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | HH24MISS | N(6) | ●   | "100000" |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문번호  <br>※ 한글 제외 | AN(100) | ●   | "ORDER20211231100000" |
| mchtName | 상점한글명 | 상점한글명 | AHN(100) | ●   | "헥토파이낸셜" |
| mchtEName | 상점영문명 | 상점영문명 | AN(100) | ●   | "Hecto Financial" |
| pmtPrdtNm | 상품명 | 결제상품명 | AHN(128) | ●   | "테스트상품" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| mchtCustNm | 고객명 | 고객명  <br>※ AES 암호화 | AHN(30) | ○   | "홍길동" |
| custAcntSumry | 통장인자내용 | 고객의 통장에 찍힐 인자명  <br>※ 공백일 경우 mchtName(상점한글명)을 통장인자명으로 사용 | AHN(50) | ○   | "가맹점명\_홍길동" |
| expireDt | 입금만료일 | 가상계좌 신청후 입금이 되어야 하는 기한 일시  <br>예) 신청일이 12월 30일인 경우 입금일을 "20201231235959"로 넘기면 입금기한은 12월 31일까지 입니다.  <br>※ 입금만료일을 넣지 않을 경우 거래일 기준으로 10일 뒤로 자동 세팅됩니다.  <br>  <br>※ 입금만료일의 최대기한은 현재일 기준 +365일 23:59:59를 초과할 수 없습니다.  <br>예) 신청일이 2022년  1월 1일인 경우, 20230101235959 를 초과할수 없습니다. | N(14) | ○   | "20211231235959" |
| notiUrl | 결과처리 URL | 결제 후 결과 전달되는 페이지의 URL(Server To Server 연동 URL) | AN(250) | ●   | "https://example.com/notiUrl" |
| nextUrl | 결과화면 URL | 결제 후 결과 전달 및 이동페이지 URL | AN(250) | ●   | "https://example.com/nextUrl" |
| cancUrl | 결제취소 URL | 고객 강제 종료시 결과 전달 및 이동페이지 URL | AN(250) | ●   | "https://example.com/cancUrl" |
| mchtParam | 상점예약필드 | 기타 주문 정보를 입력하는 상점 예약 필드 | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| email | 이메일 | 이메일 주소  <br>※ AES 암호화 | AN(60) | ○   | "HongGilDong@example.com" |
| prdtTerm | 상품제공기간 | yyyyMMddHHmmss  <br>값이 없으면 일반결제로 표기 | N(14) | ○   | "20221231235959" |
| cphoneNo | 휴대폰번호 | 010xxxxyyyy(하이픈 제거)  <br>※ AES 암호화 | N(11) | ○   | "01012345678" |
| mchtCustId | 상점고객아이디 | 상점에서 보내주는 고유 고객아이디 혹은 유니크키  <br>※ AES 암호화 | AN(50) | ○   | "HongGilDong" |
| taxTypeCd | 면세여부 | N:과세, Y:면세, G:복합과세  <br>공백일 경우 상점 설정에 따름 | A(1) | ○   | "N" |
| taxAmt | 과세금액 | 과세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "909" |
| vatAmt | 부가세금액 | 부가세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "91" |
| taxFreeAmt | 비과세금액 | 면세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "0" |
| custIp | 고객 IP주소 | 상점 서버의 IP가 아닌, 고객 기기의 IP주소 | AN(15) | ○   | "127.0.0.1" |
| pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-455)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |

## 14.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 상점아이디 + 결제수단 + 상점주문번호 + 요청일자 + 요청시간 + 거래금액(평문) + 해쉬키 |

## 14.3 응답 전문 (헥토파이낸셜 → 가맹점)

가상계좌 결제창에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의 합니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0051:채번(가상계좌 발급) 성공  <br>0031:실패 | AN(4) | ●   | "0051" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "결제 요청 정보 누락 (상품명)" |
| method | 결제수단 | PG 서비스에 해당하는 결제 구분 코드 | AN(20) | ●   | "vbank"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문번호  <br>※ 한글 제외 | AN(100) | ●   | "ORDER20211231100000" |
| mchtCustId | 상점고객아이디 | 보내주는 고유 고객아이디 혹은 유니크 키  <br>※ AES 암호화 | AN(50) | ○   | "HongGilDong" |
| trdNo | 거래번호 | 헥토파이낸셜 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| mchtParam | 상점예약필드 | 요청으로 받은 필드값을 응답으로 Bypass | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| authDt | 승인일시 | 가상계좌 주문(채번) 일시 | N(14) | ○   | "20211231100000" |
| vtlAcntNo | 가상계좌번호 | 고객이 입금할 가상계좌번호  <br>※ AES 암호화 | N(30) | ○   | "0123456789" |
| expireDt | 입금기한 | 가상계좌번호 입금만료기간 | N(14) | ○   | "20211231235959" |
| reqIssueDt | 채번요청일시 | 채번 요청시의 일시  <br>(010가상계좌인 경우에만 해당)  <br>yyyyMMddHHmmss | N(14) | ○   | "20211231100000" |
| fnNm | 은행명 | 은행명  <br>\[[금융 기관 식별자](#item-546)\] 참고 | AH(50) | ○   | "농협" |
| fnCd | 은행코드 | 은행 코드  <br>\[[금융 기관 식별자](#item-546)\] 참고 | N(4) | ○   | "11" |

## 14.4 (테스트환경) 입금테스트API

####  주의사항

*   본 API는 테스트환경에서 입금테스트를 할 수 있는 시뮬레이터입니다.
*   운영환경에서 상점아이디(mchtId)로 테스트 진행시 발생하는 비용은 가맹점 부담입니다.
*   가상계좌 입금테스트
    

##### 요청 전문 (가맹점->헥토파이낸셜)

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디  <br>\[nx\_mid\_il\]일반 가상계좌  <br>\[nxva\_sb\_il\]010 가상계좌 | AN(10) | ●   | "nx\_mid\_il" |
| method | 결제수단 | 결제수단 구분 코드 | AN(2) | ●   | “VA”  <br>※ 고정값 |
| bizType | 업무구분 | 업무구분 코드 | N(2) | ●   | "F1"  <br>※ 고정값 |
| vAcntNo | 가상계좌번호 | 채번받은 가상계좌번호 | N(11) | ●   | "01012345678" |
| trdAmt | 거래금액 | 거래금액 | N(12) | ●   | "1000" |

 

##### 입금테스트 예시

```
https://tbgw.settlebank.co.kr/spay/APIVBankTest.do?mchtId=nx_mid_il&method=VA&bizType=F1&vAcntNo=01012345678&trdAmt=1000
```

- - -

##### 응답 전문(헥토파이낸셜->가맹점)

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| method | 결제수단 | 결제수단 구분 코드 | AN(2) | ●   | "VA" |
| bizType | 업무구분 | 업무구분 코드 | AN(2) | ●   | "F1" |
| outRsltCd | 결과코드 | 결과 코드 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 | AHN(200) | ●   | "정상 처리 되었습니다." |

## 14.5 노티 전문 (헥토파이낸셜 → 가맹점)

※ 가상계좌 거래는 채번노티, 입금노티 총 2번의 노티가 전달됩니다. 반드시 채번 노티와 입금 노티를 모두 처리해 주시기 바랍니다. 

*   채번 노티 : 가맹점측에서 헥토파이낸셜로 거래를 요청하여, 가상계좌번호가 발급되는 단계에서 헥토파이낸셜에서 가맹점으로 전달되는 노티입니다.
    *   outStatCd\[0051\] 로 전달됩니다.
*   입금 노티 : 가맹점 고객이 발급된 가상계좌번호로 입금하는 시점에 헥토파이낸셜에서 가맹점으로 전달되는 노티입니다.
    *   outStatCd\[0021\] 로 전달됩니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| outStatCd | 거래상태 | 성공\[0021\] / 가상계좌 입금대기중\[0051\] | N(4) | ●   | "0021" |
| trdNo | 거래번호 | 헥토파이낸셜에서 부여하는 고유 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| method | 결제수단 | 가상계좌\[VA\] | A(2) | ●   | "VA" |
| bizType | 업무구분 | 채번\[A0\], 채번취소\[A2\],  <br>010가상계좌 채번\[A4\],  <br>입금통보\[B1\],  <br>환불\[C0\] | AN(2) | ●   | "A0" |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 상점아이디 | AN(12) | ●   | "nx\_mid\_il" |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| mchtCustNm | 고객명 | 실제 결제자의 주문자명 | AHN(30) | ○   | "가맹점명\_홍길동" |
| mchtName | 상점한글명 | 실판매자명, 거래요청시 실판매자명이 없는 경우 헥토파이낸셜와 계약된 상점명 | AHN(20) | ○   | "헥토파이낸셜" |
| pmtprdNm | 상품명 | 고객이 주문한 결제 상품명 | AHN(128) | ○   | "테스트상품" |
| trdDtm | 거래일시 | 승인일시, 취소/부분취소거래 : 취소일시가 전달됩니다.  <br>형식:YYYYMMDDhhmmss | N(14) | ●   | "20211231100000" |
| trdAmt | 거래금액 | 거래금액 | N(12) | ○   | "1000" |
| bankCd | 은행코드 | 은행 코드  <br>\[[금융기관 식별자 참고](#item-546)\] | AN(10) | ○   | "011" |
| bankNm | 은행명 | 은행명  <br>\[[금융기관 식별자 참고](#item-546)\] | AHN(10) | ○   | "NH농협" |
| acntType | 계좌구분 | 1 : 기본(회전식),  <br>2 : 고정식,  <br>3 : 고정무제한 | N(1) | ○   | "1" |
| vAcntNo | 가상계좌번호 | 가상계좌번호 | N(64) | ○   | "0123456789" |
| expireDt | 가상계좌 입금만료일시 | 가상계좌 입금만료일시 | N(14) | ○   | "20211231235959" |
| AcntPrintNm | 통장인자명 | 고객의 통장에 찍힐 통장인자명 - 결제요청시 전달된 값으로 전달됩니다.  <br>단, 값이 없는 경우는 헥토파이낸셜와 계약된 상점명으로 전달됩니다. | AHN(12) | ○   | "헥토파이낸셜" |
| dpstrNm | 입금자명 | 가상계좌에 실제 입금한 사람의 이름 | AHN(30) | ○   | "홍길동" |
| email | 고객이메일 | 상점고객이메일 | AN(60) | ○   | "HongGilDong@example.com" |
| mchtCustId | 상점고객아이디 | 상점고객아이디 | AN(50) | ○   | "HongGilDong" |
| orgTrdNo | 원거래번호 | 취소 시, 원거래번호 | AN(40) | ○   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| orgTrdDt | 원거래일자 | 취소 시, 원거래일자 | N(8) | ○   | "20211231" |
| csrcIssNo | 현금영수증 승인번호 | 현금영수증 승인번호 | AN(9) | ○   | "0123456789" |
| cnclType | 취소거래타입 | 00:전체취소, 10:부분취소 | N(2) | ○   | "00" |
| mchtParam | 상점예약필드 | 상점에서 이용하는 추가 정보 필드로 전달한 값이 그대로 반환됩니다. | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| pktHash | 해쉬값 | SHA256 (거래상태코드+거래일자+거래시간+상점아이디+상점주문번호+거래금액+해쉬키) | AN(64) | ●   | "a2d6d597d55d7c9b689baa2e08c1ddf0ce71f4248c5b9b59fe61bfbf949543e1" |

가맹점에서 헥토파이낸셜로 응답을 전송합니다.

 
| 응답 (가맹점 → 헥토파이낸셜) |     |
| --- | --- |
| 성공시 | "OK" (대문자) |
| 실패시 | "FAIL" (대문자, FAIL로 응답시 명확한 실패로 인식합니다. 노티가 재전송 됩니다.) |
| 그 외 | 비정상 실패로 인식하여, 설정된 횟수만큼 노티 재발송 처리함. |

# 15\. 가상계좌 채번(Non-UI)

*   가상계좌 고정식 무제한 방식의 경우, 현금영수증 API를 따로 호출하셔야 합니다. 
[현금영수증 API 링크](https://develop.sbsvc.online/25/onlineDocList.do)

## 15.1.1 회전식, 고정식 요청 전문 (가맹점 → 헥토파이낸셜)

요청 URI

 
| 구분  | URL |
| --- | --- |
| 테스트베드 | https://tbgw.settlebank.co.kr/spay/APIVBank.do |
| 상용 환경 | https://gw.settlebank.co.kr/spay/APIVBank.do |

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디  <br>nx\_mid\_il:일반(회전식)  <br>nxva\_fix:고정식 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 채번 요청시 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| mobileYn | 모바일 여부 | Y:모바일웹/앱, N:PC 또는 그 외 | A(1) | ○   | "N" |
| osType | OS 구분 | A:Android, I:IOS, W:windows, M:Mac, E:기타, 공백:확인불가 | A(1) | ○   | "W" |
| data | pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-740)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| bankCd | 가상계좌  <br>은행코드 | \[[PG가상계좌 은행코드](#item-1124)\] 참고 | AN(3) | ●   | "011" |
| acntType | 계좌구분 | 1 : 기본(회전식): 랜덤으로 계좌 발급받아 사용  <br>2 : 고정식: 계좌 미리 할당 받아 사용(당사와 협의 필요). 입금할때마다 채번하는 방식 | N(1) | ●   | "1" (공백인 경우 1로 설정) |
| vAcntNo | 가상계좌번호 | ※ 고정식일 경우에만 사용합니다.( acntType = 2 or 3 )  <br>※ AES 암호화 | N(16) | ○   | \[[고정식 가상계좌 리스트](#item-1123)\] 참고 |
| expireDate | 입금만료일시 | 가상계좌 신청후 입금이 되어야 하는 기한 일시  <br>YYYYMMDDhhmmss  <br>※ 입금만료일을 넣지 않을 경우 거래일 기준으로 10일 뒤로 자동 세팅됩니다.  <br>※ 입금만료일의 최대기한은 현재일 기준 +365일 23:59:59를 초과할 수 없습니다.  <br>예) 신청일이 2022년  1월 1일인 경우, 20230101235959 를 초과할수 없습니다. | N(14) | ○   | "20211231235959" |
| prdtNm | 상품명 | 상품명 | AHN(128) | ●   | "테스트상품" |
| sellerNm | 판매자명 | 판매자명 | AHN(128) | ●   | "헥토파이낸셜" |
| ordNm | 주문자명 | 주문자명 | AHN(30) | ○   | "홍길동" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| dpstrNm | 통장인자명 | 고객의 통장에 찍히는 통장인자명  <br>※ 공백일 경우 sellerNm(판매자명)을 통장인자명으로 사용 | AHN(50) | ○   | "가맹점명\_홍길동" |
| taxTypeCd | 면세여부 | N:과세, Y:면세, G:복합과세  <br>공백일 경우 상점 설정에 따름 | A(1) | ●   | "N" |
| taxAmt | 과세금액 | 과세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "909" |
| vatAmt | 부가세금액 | 부가세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "91" |
| taxFreeAmt | 비과세금액 | 면세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "0" |
| escrAgrYn | 사용여부 | 에스크로 사용여부  <br>Y:동의, N:비동의 | A(1) | ●   | "N" |
| escrPwd | 비밀번호 | 에스크로비밀번호(에스크로 사용시 필수)  <br>※ AES 암호화 | AN(64) | ○   | "1234" |
| rfdDpstrNm | 예금주명 | 에스크로 환불시 예금주명(에스크로 사용시 필수)  <br>※ AES 암호화 | AHN(50) | ○   | "홍길동" |
| csrcIssReqYn | 발행여부 | 현금영수증 발행여부  <br>Y:발행, N:미발행 | A(1) | ●   | "N" |
| cashRcptPrposDivCd | 용도구분 | 현금영수증 용도구분(현금영수증 사용시 필수)  <br>0:소득증빙용, 1:지출증빙용 | N(1) | ○   | "0" |
| csrcRegNoDivCd | 등록번호구분코드 | 현금영수증 등록번호구분코드(현금영수증 사용시 필수)  <br>1:카드, 2:주민번호, 3:사업자번호, 4:휴대폰번호 | N(1) | ○   | "4" |
| csrcRegNo | 고유식별정보 | 현금영수증 고유식별정보(현금영수증 사용시 필수)  <br>※ AES 암호화 | N(18) | ○   | "1234567890" |
| email | 이메일 | 사용자 이메일(에스크로 사용시 필수) | AN(60) | ○   | "HongGilDong@example.com" |
| notiUrl | 결과처리 URL | 결제 후 결과 전달되는 페이지의 URL(Server To Server 연동 URL) | AN(250) | ○   | "https://example.com/notiUrl" |
| mchtParam | 상점예약필드 | 기타 주문 정보를 입력하는 상점 예약 필드 | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| mchtCustId | 상점고객아이디 | 상점에서 보내주는 고유 고객아이디 혹은 유니크키 | AN(50) | ○   | "HongGilDong" |

## 15.1.2 고정식무제한 요청 전문 (가맹점 → 헥토파이낸셜)

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디  <br>nxva\_fix2:고정무제한 | AN(10) | ●   | "nxva\_fix2" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 채번 요청시 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| mobileYn | 모바일 여부 | Y:모바일웹/앱, N:PC 또는 그 외 | A(1) | ○   | "N" |
| osType | OS 구분 | A:Android, I:IOS, W:windows, M:Mac, E:기타, 공백:확인불가 | A(1) | ○   | "W" |
| data | pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-740)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| bankCd | 가상계좌  <br>은행코드 | \[[PG가상계좌 은행코드](#item-1124)\] 참고 | AN(3) | ●   | "011" |
| acntType | 계좌구분 | 3 : 고정무제한: 계좌 미리 할당 받아 사용(당사와 협의 필요). 한 번만 채번하여 계속 입금하는 방식 | N(1) | ●   | "3"  <br>※ 고정값 |
| vAcntNo | 가상계좌번호 | ※ 고정식일 경우에만 사용합니다.( acntType = 2 or 3 )  <br>※ AES 암호화 | N(16) | ●   | \[[고정식 가상계좌 리스트](#item-1123)\] 참고 |
| expireDate | 입금만료일시 | 가상계좌 신청후 입금이 되어야 하는 기한 일시  <br>YYYYMMDDhhmmss  <br>※ 입금만료일을 넣지 않을 경우 거래일 기준으로 10일 뒤로 자동 세팅됩니다.  <br>※ 입금만료일의 최대기한은 현재일 기준 +365일 23:59:59를 초과할 수 없습니다.  <br>예) 신청일이 2022년  1월 1일인 경우, 20230101235959 를 초과할수 없습니다. | N(14) | ○   | "20211231235959" |
| prdtNm | 상품명 | 상품명 | AHN(128) | ●   | "테스트상품" |
| sellerNm | 판매자명 | 판매자명 | AHN(128) | ●   | "헥토파이낸셜" |
| ordNm | 주문자명 | 주문자명 | AHN(30) | ○   | "홍길동" |
| trdAmt | 거래금액 | 거래금액  <br>※ 고정식 무제한 계좌인 경우(acntType=3) 0으로 세팅  <br>※ AES 암호화 | N(12) | ●   | "0"  <br>※ 고정값 |
| dpstrNm | 통장인자명 | 고객의 통장에 찍히는 통장인자명  <br>※ 공백일 경우 sellerNm(판매자명)을 통장인자명으로 사용 | AHN(50) | ○   | "가맹점명\_홍길동" |
| mchtCustId | 상점고객아이디 | 상점에서 보내주는 고유 고객아이디 혹은 유니크키 | AN(50) | ○   | "HongGilDong" |

## 15.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 거래일자 + 거래시간 + 상점아이디 + 상점주문번호 + 거래금액(평문) + 해쉬키 |

## 15.3 응답 전문 (헥토파이낸셜 → 가맹점)

헥토파이낸셜에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 채번 요청시 상점에서 생성하는 고유한 거래번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdNo | 헥토파이낸셜 거래번호 | 헥토파이낸셜에서 생성하는 고유한 거래번호 | AN(40) | ●   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| outStatCd | 거래상태코드 | 거래상태코드(성공/실패)  <br>0021:채번 성공  <br>0031:실패 | AN(4) | ●   | "0021" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "정상적으로 처리되었습니다." |
| data | pktHash | 해쉬값 | 요청시, hash 값 그대로 return | AN(64) | ●   |     |
| bankCd | 가상계좌  <br>은행코드 | \[[PG가상계좌 은행코드](#item-1124)\] 참고 | AN(3) | ●   | "011" |
| vAcntNo | 가상계좌번호 | 채번받았던 가상계좌번호  <br>※ AES 암호화 | N(16) | ●   | "0123456789" |
| expireDate | 입금만료일시 | 입금만료일시 YYYYMMDDhhmmss | N(14) | ●   | "20211231235959" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| acntType | 계좌구분 | 요청시 값 그대로 전달 | N(1) | ●   | "1" |

## 15.4 응답 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 거래상태코드 + 요청일자 + 요청시간 + 상점아이디 + 상점주문번호 + 거래금액(평문) + 해쉬키 |

## 15.5 (테스트환경) 입금테스트API

※ \[[14.4 입금테스트API](#item-878)\] 참고

## 15.6 노티 전문 (헥토파이낸셜 → 가맹점)

※ 회전식/고정식 가상계좌는 \[[14.5 노티 전문](#item-715)\] 참고  
  
**고정식 무제한 계좌 입금노티**

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| outStatCd | 거래상태 | 성공\[0021\]  <br>(고정식무제한계좌는 채번노티 0051 지원하지 않음) | N(4) | ●   | "0021" |
| trdNo | 거래번호 | 헥토파이낸셜에서 부여하는 고유 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| method | 결제수단 | 가상계좌\[VA\] | A(2) | ●   | "VA" |
| bizType | 업무구분 | 입금통보\[B1\] | AN(2) | ●   | "B1" |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 상점아이디 | AN(12) | ●   | "nxva\_fix2" |
| mchtTrdNo | 상점주문번호 | 0000000 고정 | AN(100) | ●   | "0000000" |
| trdDtm | 거래일시 | 승인일시, 취소/부분취소거래 : 취소일시가 전달됩니다.  <br>형식:YYYYMMDDhhmmss | N(14) | ●   | "20211231100000" |
| trdAmt | 거래금액 | 거래금액 | N(12) | ○   | "1000" |
| bankCd | 은행코드 | 은행 코드  <br>\[[금융기관 식별자 참고](#item-546)\] | AN(10) | ○   | "011" |
| bankNm | 은행명 | 은행명  <br>\[[금융기관 식별자 참고](#item-546)\] | AHN(10) | ○   | "NH농협" |
| acntType | 계좌구분 | 1 : 기본(회전식),  <br>2 : 고정식,  <br>3 : 고정무제한 | N(1) | ○   | "3" |
| vAcntNo | 가상계좌번호 | 가상계좌번호 | N(64) | ○   | "0123456789" |
| expireDt | 가상계좌 입금만료일시 | 가상계좌 입금만료일시 | N(14) | ○   | "20211231235959" |
| AcntPrintNm | 통장인자명 | 고객의 통장에 찍힐 통장인자명 - 결제요청시 전달된 값으로 전달됩니다.  <br>단, 값이 없는 경우는 헥토파이낸셜와 계약된 상점명으로 전달됩니다. | AHN(12) | ○   | "헥토파이낸셜" |
| dpstrNm | 입금자명 | 가상계좌에 실제 입금한 사람의 이름 | AHN(30) | ○   | "홍길동" |
| pktHash | 해쉬값 | SHA256 (거래상태코드+거래일자+거래시간+상점아이디+상점주문번호+거래금액+해쉬키) | AN(64) | ●   | "a2d6d597d55d7c9b689baa2e08c1ddf0ce71f4248c5b9b59fe61bfbf949543e1" |

## 15.7 (테스트 환경) 고정식 가상계좌 리스트

테스트 환경(tbgw.settlebank.co.kr)에서만 사용할 수 있는 가상계좌번호입니다.

 
| 상점아이디(mchtId) | 은행코드(bankCd) | 가상계좌번호(vAcntNo) |
| --- | --- | --- |
| nxva\_fix | 004 | 2022004000001~2022004000050 |
| 011 | 2022011000001~2022011000050 |
| nxva\_fix2 | 004 | 2022004000056~2022004000100 |
| 011 | 2022011000056~2022011000100 |

## 15.8 PG가상계좌 은행코드

PG가상계좌 채번(가상계좌 발급) 가능한 은행코드는 다음과 같습니다.

| 은행코드 | 은행명 |
| --- | --- |
| 003 | IBK기업은행 |
| 004 | KB국민은행 |
| 011 | NH농협은행 |
| 020 | 우리은행 |
| 023 | SC제일은행 |
| 031 | iM뱅크(대구은행) |
| 032 | 부산은행 |
| 034 | 광주은행 |
| 039 | 경남은행 |
| 045 | 새마을금고 |
| 071 | 우체국 |
| 081 | 하나은행(KEB하나은행) |
| 088 | 신한은행 |
| 089 | 케이뱅크 |

※ 수협은행(007) 은 2025년 2분기부터 사용 불가합니다.

# 16\. 가상계좌 채번 정보 변경(Non-UI)

## 16.1 요청 전문 (가맹점 → 헥토파이낸셜)

### **※ 요청 URI**

 
| 구분  | URL |
| --- | --- |
| 테스트베드 | https://tbgw.settlebank.co.kr/spay/APIVBank.do |
| 상용 환경 | https://gw.settlebank.co.kr/spay/APIVBank.do |

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A1"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 요청시 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| mobileYn | 모바일 여부 | Y:모바일웹/앱, N:PC 또는 그 외 | A(1) | ○   | "N" |
| osType | OS 구분 | A:Android, I:IOS, W:windows, M:Mac, E:기타, 공백:확인불가 | A(1) | ○   | "W" |
| data | pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-1128)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| bankCd | 은행코드 | \[[PG가상계좌 은행코드](#item-1124)\] 참고 | AN(3) | ●   | "011" |
| vAcntNo | 가상계좌번호 | 발급받았던 가상 계좌 번호  <br>※ AES 암호화 | N(16) | ●   | "1234567890" |
| expireDate | 입금만료일시 | 변경할 입금만료일:yyyyMMddHHmmss | N(14) | ●   | "20221231235959" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| acntType | 계좌구분 | 가상계좌 구분  <br>1:회전식  <br>2:고정식  <br>3:고정무제한 | N(1) | ●   | "1" |

## 16.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 요청일자 + 요청시간 + 상점아이디 + 상점주문번호 + 거래금액 + 해쉬키 |

## 16.3 응답 전문 (헥토파이낸셜 → 가맹점)

헥토파이낸셜에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A1"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdNo | 헥토파이낸셜 거래번호 | 헥토파이낸셜에서 생성하는 고유한 거래번호 | AN(40) | ●   | "STBK\_0123456789" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "120000" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0021:성공  <br>0031:실패 | AN(4) | ●   | "0021" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "정상적으로 처리되었습니다." |
| data | pktHash | 해쉬값 | 요청시 값 그대로 return | AN(64) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| bankCd | 은행코드 | 요청시 값 그대로 return | AN(3) | ●   | "011" |
| vAcntNo | 가상계좌번호 | 요청시 값 그대로 return  <br>※ AES 암호화 | N(16) | ●   | "1234567890" |
| expireDate | 입금만료일시 | 요청시  값 그대로 return | N(14) | ●   | "20221231235959" |
| trdAmt | 거래금액 | 요청시 값 그대로 return  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| acntType | 계좌구분 | 요청시 값 그대로 return | N(1) | ●   | "1" |

# 17\. 가상계좌 채번 취소(Non-UI)

## 17.1 요청 전문 (가맹점 → 헥토파이낸셜)

요청 URI

 
| 구분  | URL |
| --- | --- |
| 테스트베드 | https://tbgw.settlebank.co.kr/spay/APIVBank.do |
| 상용 환경 | https://gw.settlebank.co.kr/spay/APIVBank.do |

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A2"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 채번 취소시 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdDt | 취소요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 취소요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| mobileYn | 모바일 여부 | Y:모바일웹/앱, N:PC 또는 그 외 | A(1) | ○   | "N" |
| osType | OS 구분 | A:Android, I:IOS, W:windows, M:Mac, E:기타, 공백:확인불가 | A(1) | ○   | "W" |
| data | pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-461)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| orgTrdNo | 원거래번호 | 채번시, 헥토파이낸셜에서 발급한 거래번호 | AN(40) | ●   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| vAcntNo | 가상계좌번호 | 발급받았던 가상 계좌 번호  <br>※ AES 암호화 | N(16) | ●   | "1234567890" |

## 17.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 취소요청일자 + 취소요청시간 + 상점아이디 + 상점주문번호 + "0" + 해쉬키 |

## 17.3 응답 전문 (헥토파이낸셜 → 가맹점)

헥토파이낸셜에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "A2"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 채번 취소시 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdNo | 헥토파이낸셜 거래번호 | 헥토파이낸셜에서 생성하는 고유한 거래번호 | AN(40) | ●   | "STBK\_0123456789" |
| trdDt | 취소요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 취소요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "120000" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0021:성공  <br>0031:실패 | AN(4) | ●   | "0021" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "정상적으로 처리되었습니다." |
| data | pktHash | 해쉬값 | 요청시, hash 값 그대로 return | AN(64) | ●   |     |
| orgTrdNo | 원거래번호 | 채번시, 헥토파이낸셜에서 발급한 거래번호 | AN(40) | ○   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| acntType | 계좌구분 | 가상계좌 구분  <br>4:010가상계좌  <br>null:이외 | N(1) | ○   | "4" |
| vAcntNo | 가상계좌번호 | 채번받았던 가상계좌번호  <br>※ AES 암호화 | N(16) | ●   | "1234567890" |

## 17.4 노티 전문 (헥토파이낸셜 → 가맹점)

※ \[[14.5 노티 전문](#item-715)\] 참고

# 18\. 가상계좌 환불 (Non-UI)

####  가상계좌 환불 주의사항

*   환불기능은 환불서비스가 등록된 상점에 한해서 가능합니다.
*   환불API는 환불 접수를 하는 기능이며, 실제 고객 계좌로의 송금은 3~5일이 걸릴 수 있습니다.
*   은행 점검 시간대(23:30~00:35) 사이에는 환불이 실패할 수 있으니 해당 시간대는 피해서 환불 요청해주시기 바랍니다.
*   테스트 환경에서는 개인정보 보호를 위하여 가상의 계좌번호 및 예금주명을 사용해주시기 바랍니다.

## 18.1 요청 전문 (가맹점 → 헥토파이낸셜)

요청 URI

 
| 구분  | URL |
| --- | --- |
| 테스트베드 | https://tbgw.settlebank.co.kr/spay/APIRefund.do |
| 상용 환경 | https://gw.settlebank.co.kr/spay/APIRefund.do |

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "C0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 환불시 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| mobileYn | 모바일 여부 | Y:모바일웹/앱, N:PC 또는 그 외 | A(1) | ○   | "N" |
| osType | OS 구분 | A:Android, I:IOS, W:windows, M:Mac, E:기타, 공백:확인불가 | A(1) | ○   | "W" |
| data | pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-696)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| orgTrdNo | 원거래번호 | 채번요청시, 헥토파이낸셜에서 발급한 거래번호 | AN(40) | ●   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| crcCd | 통화구분 | 통화 구분 값 | A(3) | ●   | "KRW"  <br>※ 고정값 |
| cnclOrd | 취소회차 | 001부터 시작. 부분취소 2회차의 경우 002 | N(3) | ●   | "001" |
| taxTypeCd | 면세여부 | Y:면세, N:과세, G:복합과세. 공백일 경우 상점 기본 정보에 따름.  <br>※ 복합과세인 경우 필수. | A(1) | ○   | "N" |
| cnclAmt | 환불금액 | 환불금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| taxAmt | 과세금액 | 환불금액 중 과세금액(복합과세인 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "909" |
| vatAmt | 부가세금액 | 환불금액 중 부가세금액(복합과세인 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "91" |
| taxFreeAmt | 비과세금액 | 환불금액 중 면세금액(복합과세인 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "0" |
| refundBankCd | 환불은행코드 | 환불할 은행 코드  <br>\[[금융기관 식별자](#item-546)\] 참고 | AN(3) | ●   | "011" |
| refundAcntNo | 환불계좌번호 | 환불할 계좌 번호  <br>※ AES 암호화 | N(16) | ●   | "1234567890" |
| refundDpstrNm | 환불계좌예금주명 | 화불계좌의 예금주명 | AHN(50) | ●   | "홍길동" |
| cnclRsn | 환불사유내용 | 필요한 경우, 환불 사유 메세지 기재 | AHN(255) | ○   | "상품이 마음에 들지 않아서" |

## 18.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 환불요청일자 + 환불요청시간 + 상점아이디 + 상점주문번호 + 환불금액(평문) + 해쉬키 |

## 18.3 응답 전문 (헥토파이낸셜 → 가맹점)

헥토파이낸셜에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "VA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "C0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 환불시, 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdNo | 헥토파이낸셜 거래번호 | 헥토파이낸셜에서 생성하는 고유한 거래번호 | AN(40) | ●   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| trdDt | 요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0021:성공  <br>0031:실패 | AN(4) | ●   | "0021" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "정상적으로 처리되었습니다." |
| data | pktHash | 해쉬값 | 요청시, hash 값 그대로 return | AN(64) | ●   |     |
| orgTrdNo | 원거래번호 | 채번 요청시, 헥토파이낸셜에서 발급한 거래번호 | AN(40) | ●   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| cnclAmt | 환불금액 | 환불금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| blcAmt | 환불가능잔액 | 환불성공시 거래번호 기준 남은 환불 가능잔액 리턴  <br>※ AES 암호화 | N(12) | ●   | "0" |

## 18.4 노티 전문 (헥토파이낸셜 → 가맹점)

※ \[[14.5 노티 전문](#item-715)\] 참고

# 19\. 010가상계좌 결제(UI)

010가상계좌 상세한 규격 및 API연동을 원하시는 경우, [여기를 클릭하십시오.](https://develop.sbsvc.online/26/onlineDocList.do)

## 19.1 요청 전문 (가맹점 → 헥토파이낸셜)

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nxva\_sb\_il" |
| method | 결제수단 | PG 서비스에 해당하는 결제 구분 코드 | AN(20) | ●   | “vbank010”  <br>※ 고정값 |
| trdDt | 요청일자 | yyyyMMdd | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | HH24MISS | N(6) | ●   | "100000" |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문번호  <br>※ 한글 제외 | AN(100) | ●   | "ORDER20211231100000" |
| mchtName | 상점한글명 | 상점한글명 | AHN(100) | ●   | "헥토파이낸셜" |
| mchtEName | 상점영문명 | 상점영문명 | AN(100) | ●   | "Hecto Financial" |
| pmtPrdtNm | 상품명 | 결제상품명 | AHN(128) | ●   | "테스트상품" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| mchtCustNm | 고객명 | 고객명  <br>※ AES 암호화 | AHN(30) | ○   | "가맹점명\_홍길동" |
| expireDt | 입금만료일 | 가상계좌 신청후 입금이 되어야 하는 기한 일시  <br>예) 신청일이 12월 30일인 경우 입금일을 "20201231235959"로 넘기면 입금기한은 12월 31일까지 입니다.  <br>※ 입금만료일을 넣지 않을 경우 거래일 기준으로 10일 뒤로 자동 세팅됩니다. | N(14) | ●   | "20201231235959" |
| notiUrl | 결과처리 URL | 결제 후 결과 전달되는 페이지의 URL(Server To Server 연동 URL) | AN(250) | ●   | "https://example.com/notiUrl" |
| nextUrl | 결과화면 URL | 결제 후 결과 전달 및 이동페이지 URL | AN(250) | ●   | "https://example.com/nextUrl" |
| cancUrl | 결제취소 URL | 고객 강제 종료시 결과 전달 및 이동페이지 URL | AN(250) | ●   | "https://example.com/cancUrl" |
| mchtParam | 상점예약필드 | 기타 주문 정보를 입력하는 상점 예약 필드 | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| email | 이메일 | 이메일 주소  <br>※ AES 암호화 | AN(60) | ○   | "HongGilDong@example.com" |
| prdtTerm | 상품제공기간 | yyyyMMddHHmmss  <br>값이 없으면 일반결제로 표기 | N(14) | ○   | "20221231235959" |
| cphoneNo | 휴대폰번호 | 010xxxxyyyy(하이픈 제거)  <br>※ 점유인증 생략을 원하시는 경우, 필수로 보내주십시오  <br>※ AES 암호화 | N(11) | ○   | "01012345678" |
| mchtCustId | 상점고객아이디 | 상점에서 보내주는 고유 고객아이디 혹은 유니크키  <br>※ 점유인증 생략을 원하시는 경우, 필수로 보내주십시오  <br>※ AES 암호화 | AN(50) | ○   | "HongGilDong" |
| taxTypeCd | 면세여부 | N:과세, Y:면세, G:복합과세  <br>공백일 경우 상점 설정에 따름 | A(1) | ○   | "N" |
| taxAmt | 과세금액 | 과세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "909" |
| vatAmt | 부가세금액 | 부가세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "91" |
| taxFreeAmt | 비과세금액 | 면세금액(복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "0" |
| custIp | 고객 IP주소 | 상점 서버의 IP가 아닌, 고객 기기의 IP주소 | AN(15) | ○   | "127.0.0.1" |
| pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-826)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |

## 19.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 상점아이디 + 결제수단 + 상점주문번호 + 요청일자 + 요청시간 + 거래금액(평문) + 해쉬키 |

## 19.3 응답 전문 (헥토파이낸셜 → 가맹점)

가상계좌 결제창에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의 합니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nxva\_sb\_il" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0051:채번 성공(입금대기중)  <br>0031:실패 | AN(4) | ●   | "0051" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "결제 요청 정보 누락 (상품명)" |
| method | 결제수단 | PG 서비스에 해당하는 결제 구분 코드 | AN(20) | ●   | "vbank010"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문번호  <br>※ 한글 제외 | AN(100) | ●   | "ORDER20211231100000" |
| mchtCustId | 상점고객아이디 | 보내주는 고유 고객아이디 혹은 유니크 키  <br>※ AES 암호화 | AN(50) | ○   | "HongGilDong" |
| trdNo | 거래번호 | 헥토파이낸셜 거래번호 | AN(40) | ●   | "STFP\_PGVAnx\_mid\_il00210806075210M1853381" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| mchtParam | 상점예약필드 | 요청으로 받은 필드값을 응답으로 Bypass | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| authDt | 승인일시 | 가상계좌 주문(채번) 일시 | N(14) | ○   | "20211231100000" |
| vtlAcntNo | 가상계좌번호 | 고객이 입금할 가상계좌번호  <br>※ AES 암호화 | N(30) | ○   | "1234567890" |
| expireDt | 입금기한 | 가상계좌번호 입금만료기간 | N(14) | ○   | "20210101235959" |
| reqIssueDt | 채번요청일시 | 채번 요청시의 일시  <br>yyyyMMddHHmmss | N(14) | ○   | "20211231100000" |
| fnNm | 은행명 | 은행명  <br>\[[금융 기관 식별자](#item-546)\] 참고 | AH(50) | ○   | "K뱅크" |
| fnCd | 은행코드 | 은행 코드  <br>\[[금융 기관 식별자](#item-546)\] 참고 | N(4) | ○   | "089" |

## 19.4 (테스트환경) 입금테스트API

※ \[[14.4 입금테스트API](#item-878)\] 참고

## 19.5 노티 전문 (헥토파이낸셜 → 가맹점)

※ \[[14.5 노티 전문](#item-715)\] 참고

