# 12\. 계좌이체 결제 (UI)

####  계좌이체 고객통장 적요

*   뱅크페이 결제 및 취소 시 고객통장에 찍히는 적요는 아래 정책에 따라 결정됩니다.
*   **결제 및 익일환불**: 뱅크페이에 등록된 가맹점명을 사용. 수정이 필요한 경우 헥토파이낸셜에 문의 필요
*   **당일취소**: 은행 정책에 따라 다름

## 12.1 요청 전문 (가맹점 → 헥토파이낸셜)

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| method | 결제수단 | PG 서비스에 해당하는 결제 구분 코드 | AN(20) | ●   | "bank"  <br>※ 고정값 |
| trdDt | 요청일자 | yyyyMMdd | N(8) | ●   | "20211231" |
| trdTm | 요청시간 | HH24MISS | N(6) | ●   | "100000" |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문번호  <br>※ 한글 제외 | AN(100) | ●   | "ORDER20211231100000" |
| mchtName | 상점한글명 | 상점한글명 | AHN(100) | ●   | "헥토파이낸셜" |
| mchtEName | 상점영문명 | 상점영문명 | AN(100) | ●   | "Hecto Financial" |
| pmtPrdtNm | 상품명 | 결제상품명 | AHN(128) | ●   | "테스트상품" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| mchtCustNm | 고객명 | 고객명  <br>※ AES 암호화 | AHN(30) | ○   | "홍길동" |
| notiUrl | 결과처리 URL | 결제 후 결과 전달되는 페이지의 URL(Server To Server 연동 URL) | AN(250) | ●   | "https://example.com/notiUrl" |
| nextUrl | 결과화면 URL | 결제 후 결과 전달 및 이동페이지 URL | AN(250) | ●   | "https://example.com/nextUrl" |
| cancUrl | 결제취소 URL | 고객 강제 종료시 결과 전달 및 이동페이지 URL | AN(250) | ●   | "https://example.com/cancUrl" |
| mchtParam | 상점예약필드 | 기타 주문 정보를 입력하는 상점 예약 필드 | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| email | 이메일 | 이메일 주소  <br>※ AES 암호화 | AN(60) | ○   | "HongGilDong@example.com" |
| prdtTerm | 상품제공기간 | yyyyMMddHHmmss  <br>값이 없으면 일반결제로 표기 | N(14) | ○   | "20221231235959" |
| mchtCustId | 상점고객아이디 | 상점에서 보내주는 고유 고객아이디 혹은 유니크키  <br>※ AES 암호화 | AN(50) | ○   | "HongGilDong" |
| taxTypeCd | 면세여부 | N:과세, Y:면세, G:복합과세  <br>공백일 경우 상점 설정에 따름 | A(1) | ○   | "N" |
| taxAmt | 과세금액 | 과세 금액 (복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "909" |
| vatAmt | 부가세금액 | 부가세 금액 (복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "91" |
| taxFreeAmt | 비과세금액 | 면세 금액 (복합과세일 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "0" |
| custIp | 고객 IP주소 | 상점 서버의 IP가 아닌, 고객 기기의 IP주소 | AN(15) | ○   | "127.0.0.1" |
| appScheme | 앱스키마 | (AppScheme://~)형식으로 사용되며, 자체앱을 구축하는 경우 사용 | AN(100) | ○   | "PAYAPPNAME://" |
| pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-445)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |

## 12.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 상점아이디 + 결제수단 + 상점주문번호 + 요청일자 + 요청시간 + 거래금액(평문) + 해쉬키 |

## 12.3 응답 전문 (헥토파이낸셜 → 가맹점)

계좌이체 결제창에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의 합니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0021:성공  <br>0031:실패 | AN(4) | ●   | "0021" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "결제 요청 정보 누락 (상품명)" |
| method | 결제수단 | PG 서비스에 해당하는 결제 구분 코드 | AN(20) | ●   | "bank"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문번호  <br>※ 한글 제외 | AN(100) | ●   | "ORDER20211231100000" |
| mchtCustId | 상점고객아이디 | 보내주는 고유 고객아이디 혹은 유니크 키  <br>※ AES 암호화 | AN(50) | ○   | "HongGilDong" |
| trdNo | 거래번호 | 헥토파이낸셜 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| trdAmt | 거래금액 | 거래금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| mchtParam | 상점예약필드 | 요청으로 받은 필드값을 응답으로 Bypass | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| authDt | 승인일시 | 결제 승인 일시 | N(14) | ○   | "20211231100000" |
| fnNm | 은행명 | 은행명  <br>\[[금융 기관 식별자](#item-546)\] 참고 | AH(50) | ○   | "농협" |
| fnCd | 은행코드 | 은행 코드  <br>\[[금융 기관 식별자](#item-546)\] 참고 | N(4) | ○   | "11" |

## 12.4 노티 전문 (헥토파이낸셜 → 가맹점)

거래가 정상적으로 완료되면, 헥토파이낸셜에서 가맹점으로 노티(결과통보) 메세지가 전송됩니다.

     
| 파라미터 | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- |
| outStatCd | 거래상태 | 성공\[0021\] | N(4) | ●   | "0021" |
| trdNo | 거래번호 | 헥토파이낸셜에서 부여하는 고유 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| method | 결제수단 | 계좌이체\[RA\] | A(2) | ●   | "RA" |
| bizType | 업무구분 | 승인\[B0\], 취소\[C0\] | AN(2) | ●   | "B0" |
| mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 상점아이디 | AN(12) | ●   | "nx\_mid\_il" |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유 주문 번호 | AN(100) | ●   | "ORDER20211231100000" |
| mchtCustNm | 고객명 | 실제 결제자의 주문자명 | AHN(30) | ○   | "홍길동" |
| mchtName | 상점한글명 | 실판매자명, 거래요청시 실판매자명이 없는 경우 헥토파이낸셜와 계약된 상점명 | AHN(20) | ○   | "헥토파이낸셜" |
| pmtprdNm | 상품명 | 고객이 주문한 결제 상품명 | AHN(128) | ○   | "테스트상품" |
| trdDtm | 거래일시 | 승인일시, 취소/부분취소거래 : 취소일시가 전달됩니다.  <br>형식:YYYYMMDDhhmmss | N(14) | ●   | "20211231100000" |
| trdAmt | 거래금액 | 거래금액 | N(12) | ○   | "1000" |
| bankCd | 은행코드 | 은행 코드  <br>\[[금융기관 식별자](#item-546)\] 참고 | AN(10) | ○   | "011" |
| bankNm | 은행명 | 은행명  <br>\[[금융기관 식별자](#item-546)\] 참고 | AHN(10) | ○   | "NH농협" |
| acntPrintNm | 통장인자명 | 고객의 통장에 찍힐 통장인자명 - 결제요청시 전달된 값으로 전달됩니다.  <br>단, 값이 없는 경우는 헥토파이낸셜와 계약된 상점명으로 전달됩니다. | AHN(12) | ○   | "헥토파이낸셜" |
| email | 고객이메일 | 상점 고객이메일 | AN(60) | ○   | "HongGilDong@example.com" |
| mchtCustId | 상점고객아이디 | 상점 고객 아이디 | AN(50) | ○   | "HongGilDong" |
| orgTrdNo | 원거래번호 | 취소 시, 원거래번호 | AN(40) | ○   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| orgTrdDt | 원거래일자 | 취소 시, 원거래일자 | N(8) | ○   | "20211231" |
| csrcIssNo | 현금영수증 승인번호 | 현금영수증 승인번호 | AN(9) | ○   | "0123456789" |
| cnclType | 취소거래타입 | 00:전체취소, 10:부분취소 | N(2) | ○   | "00" |
| mchtParam | 상점예약필드 | 상점에서 이용하는 추가 정보 필드로 전달한 값이 그대로 반환됩니다. | AHN(4000) | ○   | "name=HongGilDong&age=25" |
| pktHash | 해쉬값 | SHA256 (거래상태코드+거래일자+거래시간+상점아이디+상점주문번호+거래금액+해쉬키) | AN(64) | ●   | "a2d6d597d55d7c9b689baa2e08c1ddf0ce71f4248c5b9b59fe61bfbf949543e1" |

가맹점에서 헥토파이낸셜로 응답을 전송합니다.

 
| 응답 (가맹점 → 헥토파이낸셜) |     |
| --- | --- |
| 성공시 | "OK" (대문자) |
| 실패시 | "FAIL" (대문자, FAIL로 응답시 명확한 실패로 인식합니다. 노티가 재전송 됩니다.) |
| 그 외 | 비정상 실패로 인식하여, 설정된 횟수만큼 노티 재발송 처리함. |

# 13\. 계좌이체 취소 (Non-UI)

## 13.1 요청 전문 (가맹점 → 헥토파이낸셜)

가맹점 서버에서 헥토파이낸셜측으로 요청하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(12) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "RA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "C0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdDt | 취소요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 취소요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| mobileYn | 모바일 여부 | Y:모바일웹/앱, N:PC 또는 그 외 | A(1) | ○   | "N" |
| osType | OS 구분 | A:Android, I:IOS, W:windows, M:Mac, E:기타, 공백:확인불가 | A(1) | ○   | "W" |
| data | pktHash | hash데이터 | SHA256 방식으로 생성한 해쉬값  <br>\[[요청 전문 해쉬 코드](#item-451)\] 참고 | AN(200) | ●   | "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c" |
| orgTrdNo | 원거래번호 | 결제 시, 헥토파이낸셜에서 발급한 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| crcCd | 통화구분 | 통화 구분 값 | A(3) | ●   | "KRW"  <br>※ 고정값 |
| cnclOrd | 취소회차 | 001부터 시작. 부분취소 2회차의 경우 002 | N(3) | ●   | "001" |
| taxTypeCd | 면세여부 | Y:면세, N:과세, G:복합과세. 공백일 경우 상점 기본 정보에 따름. | A(1) | ○   | "N" |
| cnclAmt | 취소금액 | 취소금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| taxAmt | 과세금액 | 취소금액 중 과세금액(복합과세인 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "909" |
| vatAmt | 부가세금액 | 취소금액 중 부가세금액(복합과세인 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "91" |
| taxFreeAmt | 비과세금액 | 취소금액 중 면세금액(복합과세인 경우 필수)  <br>※ AES 암호화 | N(12) | ○   | "0" |
| cnclRsn | 취소사유내용 | 필요한 경우, 취소 사유 메세지 기재 | AHN(255) | ○   | "상품이 마음에 들지 않아서" |

## 13.2 요청 전문 해쉬 코드

 
| 항목  | 조합 필드 |
| --- | --- |
| pktHash | 취소요청일자 + 취소요청시간 + 상점아이디 + 상점주문번호 + 취소금액(평문) + 해쉬키 |

## 13.3 응답 전문 (헥토파이낸셜 → 가맹점)

헥토파이낸셜에서 가맹점측으로 응답하는 컬럼을 다음과 같이 정의합니다.

      
| 파라미터 |     | 이름  | 설명  | 타입(길이) | 필수  | 비고  |
| --- | --- | --- | --- | --- | --- | --- |
| params | mchtId | 상점아이디 | 헥토파이낸셜에서 부여하는 고유 상점아이디 | AN(10) | ●   | "nx\_mid\_il" |
| ver | 버전  | 전문의 버전 | AN(4) | ●   | "0A19"  <br>※ 고정값 |
| method | 결제수단 | 결제수단 | A(2) | ●   | "RA"  <br>※ 고정값 |
| bizType | 업무구분 | 업무 구분코드 | AN(2) | ●   | "C0"  <br>※ 고정값 |
| encCd | 암호화 구분 | 암호화 구분 코드 | N(2) | ●   | "23"  <br>※ 고정값 |
| mchtTrdNo | 상점주문번호 | 상점에서 생성하는 고유한 주문번호 | AN(100) | ●   | "ORDER20211231100000" |
| trdNo | 헥토파이낸셜 거래번호 | 헥토파이낸셜에서 생성하는 고유한 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| trdDt | 취소요청일자 | 현재 전문을 전송하는 일자(YYYYMMDD) | N(8) | ●   | "20211231" |
| trdTm | 취소요청시간 | 현재 전문을 전송하는 시간(HHMMSS) | N(6) | ●   | "100000" |
| outStatCd | 거래상태 | 거래상태코드(성공/실패)  <br>0021:성공  <br>0031:실패 | AN(4) | ●   | "0021" |
| outRsltCd | 거절코드 | 거래상태가 "0031"일 경우, 상세 코드 전달  <br>\[[거절 코드 표](#item-544)\] 참고 | AN(4) | ●   | "0000" |
| outRsltMsg | 결과메세지 | 결과 메세지 전달  <br>URL Encoding, UTF-8 | AHN(200) | ●   | "정상적으로 처리되었습니다." |
| data | pktHash | 해쉬값 | 요청시, hash 값 그대로 return | AN(64) | ●   |     |
| orgTrdNo | 원거래번호 | 결제 시, 헥토파이낸셜에서 발급한 거래번호 | AN(40) | ●   | "STFP\_PGCAnxca\_jt\_il0211129135810M1494620" |
| cnclAmt | 취소금액 | 취소금액  <br>※ AES 암호화 | N(12) | ●   | "1000" |
| blcAmt | 취소가능잔액 | 취소성공시 거래번호 기준 남은 취소 가능잔액 리턴  <br>※ AES 암호화 | N(12) | ●   | "0" |

## 13.4 노티 전문 (헥토파이낸셜 → 가맹점)

※ \[[12.4 노티 전문](#item-713)\] 참고

