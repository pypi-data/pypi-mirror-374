[build-system]
requires = ["setuptools>=64", "setuptools_scm>=8"]
build-backend = "setuptools.build_meta"

[tool.setuptools.packages]
find = {}

[tool.setuptools_scm]

[project]
dynamic = ["version"]
name = "dkist-dev-tools"
requires-python = ">=3.12"
description = "Toolkit for developers of the `dkist-processing-*` stack."
readme = "README.rst"
authors = [ {name = "NSO / AURA", email = "dkistdc@nso.edu"} ]
license = {text = "BSD-3-Clause"}
classifiers = [
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.12",
]
dependencies = [
    "tomlkit >= 0.9.0",
    "click >= 8.0.0",
    "rich >= 10.0.0",
    "packaging >= 24.2",
    "towncrier >= 24.8.0"
]

[project.urls]
Homepage = "https://nso.edu/dkist/data-center/"
Repository = "https://bitbucket.org/dkistdc/dkist-dev-tools/"
Documentation = "https://bitbucket.org/dkistdc/dkist-dev-tools/"
Help = "https://nso.atlassian.net/servicedesk/customer/portal/5"

[project.optional-dependencies]
test = [
    "pytest",
    "pytest-cov",
    "pytest-mock",
    "pytest-xdist",
    "tox>=4",
]

[project.scripts]
ddt = "dkist_dev_tools.cli:ddt_command"

[tool.pytest.ini_options]
markers = [
  "development: For tests that can only be run while developing with a sidecar proxy (as opposed to in bitbucket pipelines)"
]

[tool.coverage.run]
omit = [
    "*/dkist_dev_tools/tests/*",
    "*/dkist_dev_tools/__init__.py",
]

[tool.coverage.report]
show_missing = true

[tool.towncrier]
    package = "dkist_dev_tools"
    filename = "CHANGELOG.rst"
    directory = "changelog/"
    issue_format = "`#{issue} <https://bitbucket.org/dkistdc/dkist-dev-tools/pull-requests/{issue}>`__"
    title_format = "{version} ({project_date})"
    ignore = [".gitempty"]

[[tool.towncrier.type]]
      directory = "feature"
      name = "Features"
      showcontent = true

[[tool.towncrier.type]]
      directory = "bugfix"
      name = "Bugfixes"
      showcontent = true

[[tool.towncrier.type]]
      directory = "removal"
      name = "Removals"
      showcontent = true

[[tool.towncrier.type]]
      directory = "misc"
      name = "Misc"
      showcontent = true

[tool.black]
line-length = 100

[tool.isort]
profile = "black"
force_single_line = true
combine_as_imports = false
line_length = 100
