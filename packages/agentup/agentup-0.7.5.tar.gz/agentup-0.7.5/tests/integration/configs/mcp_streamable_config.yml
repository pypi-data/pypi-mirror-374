# AgentUp Configuration for MCP Streamable HTTP Transport Testing
name: MCP Streamable HTTP Test Agent
description: Test agent for MCP streamable HTTP transport integration testing
version: 1.0.0

# Security Configuration
security:
  enabled: true
  auth:
    api_key:
      header_name: "X-API-Key"
      keys:
        - key: "test-api-key"
          scopes: ["admin"]
  scope_hierarchy:
    admin: ["*"]
    weather:admin: ["weather:read", "alerts:read"]

# AI Provider Configuration (Test)
ai_provider:
  provider: openai
  api_key: sk-test-key-for-integration-tests
  model: gpt-4o-mini
  temperature: 0

# MCP Configuration - Streamable HTTP Transport
mcp:
  enabled: true
  client_enabled: true
  servers:
    - name: "streamable_weather"
      enabled: true
      transport: "streamable_http"
      url: "http://localhost:8123/mcp"
      timeout: 30
      headers:
        Authorization: "Bearer ${MCP_API_KEY}"
      tool_scopes:
        # Prefixed tool names (server:tool format) - REQUIRED
        "streamable_weather:get_alerts": ["alerts:read"]
        "streamable_weather:get_forecast": ["weather:read"]

# API Configuration
api:
  enabled: true
  host: "127.0.0.1"
  port: 8000
  workers: 1
  reload: false
  debug: false

# Logging Configuration
logging:
  enabled: true
  level: "ERROR"  # Reduce log level to minimize output
  format: "text"
  console:
    enabled: true
    colors: false  # Disable colors for CI/testing
  correlation_id: false
  request_logging: false
  modules:
    "a2a": "CRITICAL"                  # Suppress all a2a logs below ERROR level
    "a2a.utils": "CRITICAL"            # Specifically suppress a2a.utils logs
    "a2a.utils.telemetry": "CRITICAL"  # Specifically suppress telemetry logs
    "a2a.utils.telemetry": "CRITICAL" # Only critical errors from telemetry

# Middleware Configuration (Minimal for testing)
middleware:
  enabled: false

# Push Notifications
push_notifications:
  enabled: false

# State Management
state_management:
  enabled: true
  backend: memory
  ttl: 3600