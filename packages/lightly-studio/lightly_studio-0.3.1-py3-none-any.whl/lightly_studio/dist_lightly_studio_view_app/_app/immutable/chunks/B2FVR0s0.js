import"./CWj6FrbW.js";import{p as D,f as Q,s as p,g as t,d as i,a as R,t as V,c as z,r as I,V as U,L as Y}from"./l7KrR96u.js";import{t as Z,a as L,n as W}from"./Bu7uvVrG.js";import{i as E,s as $,a as O}from"./XO7A28GO.js";import{p as v,b as tt}from"./D98V7j6A.js";import{l as ot,m as w,n as et,o as at,p as nt,s as e}from"./CvOmgdoc.js";import"./vC4nQVEB.js";import"./CxtLVaYz.js";import"./D6su9Aln.js";import"./Bx1xMsFy.js";import"./Bsi3UGy5.js";import"./69_IOA4Y.js";import"./BJXwVxaE.js";import{s as it}from"./D6RI2Zrd.js";var rt=Z("<!> <!> <!>",1);function Lt(_,o){var T,M;D(o,!0);const[m,g]=$(),b=()=>O(u,"$taskMap",m),h=()=>O(f,"$customLabelColorsStore",m),l=v(o,"showLabel",3,!1),{taskMap:u}=ot(),{customLabelColorsStore:f}=at(),{annotation_task_id:a}=o.annotation,s=i(()=>o.annotation.annotation_label.annotation_label_name),c=i(()=>nt(o.annotation)),d=i(()=>t(c).x),r=i(()=>t(c).y),S=i(()=>t(c).width),x=i(()=>t(c).height),y=(M=(T=o.annotation)==null?void 0:T.instance_segmentation_details)==null?void 0:M.segmentation_mask,k=i(()=>a&&b().has(a)?b().get(a).is_prediction:!1),X=i(()=>o.annotation.annotation_id),j=i(()=>w(t(s),1)),q=i(()=>{var n;return((n=h()[t(s)])==null?void 0:n.color)??w(t(s),1).color}),C=i(()=>{var n;return((n=h()[t(s)])==null?void 0:n.color)??w(t(s),.4).color}),B=i(()=>{var n;return((n=h()[t(s)])==null?void 0:n.alpha)*.4});var P=rt(),A=Q(P);{var G=n=>{const N=i(()=>[t(d),t(r)]);dt(n,{get coordinates(){return t(N)},get colorText(){return t(j)},get label(){return t(s)},get isPrediction(){return t(k)}})};E(A,n=>{l()&&n(G)})}var F=p(A,2);{var H=n=>{et(n,{segmentation:y,get width(){return o.imageWidth},get colorFill(){return t(C)},get opacity(){return t(B)}})};E(F,n=>{y&&n(H)})}var J=p(F,2);const K=i(()=>[t(d),t(r),t(S),t(x)]);lt(J,{get bbox(){return t(K)},get annotationId(){return t(X)},get label(){return t(s)},get colorStroke(){return t(q)},get colorFill(){return t(C)},get opacity(){return t(B)},get isPrediction(){return t(k)}}),L(_,P),R(),g()}var st=W('<rect vector-effect="non-scaling-stroke" stroke-width="2" pointer-events="all" data-testid="annotation_box"></rect>');function lt(_,o){const m=v(o,"isPrediction",3,!1),[g,b,h,l]=o.bbox,u=m()?"5,5":"none",f=m()?.8:1;var a=st();e(a,"x",g),e(a,"y",b),e(a,"width",h),e(a,"height",l),e(a,"stroke-opacity",f),e(a,"stroke-dasharray",u),V(()=>{e(a,"stroke",o.colorStroke),e(a,"fill",o.colorFill),e(a,"fill-opacity",o.opacity),e(a,"aria-label",o.label),e(a,"data-annotation-id",o.annotationId)}),L(_,a)}var ct=W('<g class="unscaled"><rect></rect><text class="annotation-label-text" data-testid="svg-annotation-text"> </text></g>');function dt(_,o){D(o,!0);const m=v(o,"fontSize",3,14),g=v(o,"isPrediction",3,!1),[b,h]=o.coordinates;let l=U(null);const u=i(()=>t(l)?(t(l).textContent=g()?`${o.label} (pred)`:o.label,t(l).getBBox()):{width:0,height:0}),f=5,a=g()?.8:1,s=g()?"italic":"normal";var c=ct();e(c,"transform",`translate(${b}, ${h})`);var d=z(c);e(d,"opacity",a);var r=p(d);e(r,"x",f),e(r,"y",-5),e(r,"font-style",s);var S=z(r,!0);I(r),tt(r,x=>Y(l,x),()=>t(l)),I(c),V(()=>{var x,y,k;e(d,"y",-((x=t(u))==null?void 0:x.height)),e(d,"width",((y=t(u))==null?void 0:y.width)+f*2),e(d,"height",(k=t(u))==null?void 0:k.height),e(d,"fill",o.colorText.color),e(r,"fill",o.colorText.contrastColor),e(r,"font-size",m()),it(S,g()?`${o.label} (pred)`:o.label)}),L(_,c),R()}export{Lt as S};
