import{o as m,E as y,q as _,n as v,v as w,x as E,y as b,l as u,w as c,z as k,m as d}from"./l7KrR96u.js";import{c as L}from"./BJXwVxaE.js";import{u as x}from"./vC4nQVEB.js";function R(l,r,...o){var n=l,e=v,a;m(()=>{e!==(e=r())&&(a&&(w(a),a=null),a=_(()=>e(n,...o)))},y),E&&(n=b)}const f=c(new Set);function q(l){const{dataset_id:r,kind:o}=l,{tags:n}=x(),e=c(!1),a=c(null),i=c(!1),g=()=>{u(i)||(i.set(!0),L.GET("/api/datasets/{dataset_id}/tags",{params:{path:{dataset_id:r}}}).then(t=>{t.data&&n.set(t.data)}).catch(t=>{a.set(t)}).finally(()=>{i.set(!1)}))};!u(e)&&r&&(g(),e.set(!0));const p=k(n,t=>{const s=t??[];return o?s.filter(h=>o.includes(h.kind)):s}),S=t=>{f.update(s=>(s.has(t)?s.delete(t):s.add(t),new Set([...s])))},T=()=>{f.set(new Set)};return{tags:d(p),loadTags:g,tagsSelected:d(f),tagSelectionToggle:S,clearTagsSelected:T,isLoading:d(i),error:a}}export{R as s,q as u};
