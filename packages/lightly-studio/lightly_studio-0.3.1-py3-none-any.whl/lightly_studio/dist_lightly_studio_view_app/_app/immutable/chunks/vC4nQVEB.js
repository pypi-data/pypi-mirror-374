import{a as E}from"./BJXwVxaE.js";import{w as s,l as x}from"./l7KrR96u.js";function i(a,r){const l=s((()=>{if(typeof sessionStorage>"u")return r;try{const n=sessionStorage.getItem(a);if(n)return JSON.parse(n)}catch(n){console.warn(`Failed to read ${a} from sessionStorage`,n)}return r})());return l.subscribe(n=>{if(!(typeof sessionStorage>"u"))try{sessionStorage.setItem(a,JSON.stringify(n))}catch(m){console.warn(`Failed to write ${a} to sessionStorage`,m)}}),l}const f=s("samples"),d=s(new Set),c=s(new Set),u=s(new Set),h=s(0),w=s(0),C=s(!1),y=s(void 0),S=s(null),A=i("lightlyStudio_sampleSize",{width:200,height:200}),T=i("lightlyStudio_metadata_bounds",{}),_=i("lightlyStudio_metadata_values",{}),b=i("lightlyStudio_metadata_info",[]),V=s(void 0),B=s([]),p=s({}),M=s(!1),D=a=>{M.set(a)},I=()=>({tags:V,textEmbedding:y,setTextEmbedding:e=>{y.set(e)},selectedSampleIds:d,selectedSampleAnnotationCropIds:c,selectedAnnotationFilterIds:u,annotationsTotalCount:h,samplesTotalCount:w,datasetVersions:p,hideAnnotations:C,classifiers:B,classifierSamples:S,setClassifierSamples:e=>{S.set(e)},clearClassifierSamples:()=>{S.set(null)},metadataBounds:T,metadataValues:_,metadataInfo:b,updateMetadataValues:e=>{_.set(e)},updateMetadataBounds:e=>{T.set(e)},updateMetadataInfo:e=>{b.set(e)},setHideAnnotations:e=>{C.set(e)},getDatasetVersion:async e=>{const t=x(p);if(t[e])return t[e];const{data:o}=await E(e);if(o!=null&&o.created_at){const g=new Date(o.created_at).getTime().toString();return p.update(z=>({...z,[e]:g})),g}return""},toggleSampleSelection:e=>{d.update(t=>(t.has(e)?t.delete(e):t.add(e),t))},clearSelectedSamples:()=>{d.update(e=>(e.clear(),e))},toggleSampleAnnotationCropSelection:e=>{c.update(t=>(t.has(e)?t.delete(e):t.add(e),t))},clearSelectedSampleAnnotationCrops:()=>{c.update(e=>(e.clear(),e))},lastGridType:f,setLastGridType:e=>{f.set(e)},setSelectedAnnotationFilterIds:e=>{u.update(t=>(t.has(e)?t.delete(e):t.add(e),t))},clearSelectedAnnotationFilterIds:()=>{u.update(e=>(e.clear(),e))},setAnnotationsTotalCount:e=>{h.set(e)},setSamplesTotalCount:e=>{w.set(e)},sampleSize:A,updateSampleSize:e=>{A.set({width:e,height:e})},isEditingMode:M,setIsEditingMode:D});export{i as a,I as u};
