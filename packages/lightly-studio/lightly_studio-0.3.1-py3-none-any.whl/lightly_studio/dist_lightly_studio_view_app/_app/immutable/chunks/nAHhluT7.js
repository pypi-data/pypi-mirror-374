import"./CWj6FrbW.js";import{p as F,f as U,n as K,a as G,c as I,r as B,t as j,g as f,d as gt,s as tt,ax as At,u as Et,V as ht,L as ot}from"./l7KrR96u.js";import{c as et,a as S,t as q,d as Nt}from"./Bu7uvVrG.js";import{s as X}from"./DIRAtgl0.js";import{s as vt,r as L,p as rt,b as it,a as st}from"./D98V7j6A.js";import{I as pt,b as dt,c as yt,h as Yt,F as Dt,e as It,s as ct,am as St,an as qt,ap as Xt,aq as Bt,ar as zt,as as wt,T as Mt}from"./CvOmgdoc.js";import{i as bt}from"./XO7A28GO.js";import{P as Ft}from"./BJXwVxaE.js";import{b as Gt,u as Ht,c as Ot}from"./Bx1xMsFy.js";import{s as ut}from"./D6RI2Zrd.js";import{f as Zt,b as Ut}from"./D5-A_Ffd.js";import{o as jt}from"./CxtLVaYz.js";function Kt(e,t){F(t,!0);let n=L(t,["$$slots","$$events","$$legacy"]);pt(e,vt({name:"chevron-right"},()=>n,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(r,s)=>{var i=et(),d=U(i);X(d,()=>t.children??K),S(r,i)},$$slots:{default:!0}})),G()}function Xe(e,t){F(t,!0);let n=L(t,["$$slots","$$events","$$legacy"]);pt(e,vt({name:"database"},()=>n,{iconNode:[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]],children:(r,s)=>{var i=et(),d=U(i);X(d,()=>t.children??K),S(r,i)},$$slots:{default:!0}})),G()}function Fe(e,t){F(t,!0);let n=L(t,["$$slots","$$events","$$legacy"]);pt(e,vt({name:"house"},()=>n,{iconNode:[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]],children:(r,s)=>{var i=et(),d=U(i);X(d,()=>t.children??K),S(r,i)},$$slots:{default:!0}})),G()}function Lt(e,t){F(t,!0);let n=L(t,["$$slots","$$events","$$legacy"]);pt(e,vt({name:"zoom-in"},()=>n,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]],children:(r,s)=>{var i=et(),d=U(i);X(d,()=>t.children??K),S(r,i)},$$slots:{default:!0}})),G()}function Wt(e,t){F(t,!0);let n=L(t,["$$slots","$$events","$$legacy"]);pt(e,vt({name:"zoom-out"},()=>n,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]],children:(r,s)=>{var i=et(),d=U(i);X(d,()=>t.children??K),S(r,i)},$$slots:{default:!0}})),G()}var Qt=q("<nav><!></nav>");function Ge(e,t){F(t,!0);let n=rt(t,"ref",15),c=L(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Qt();let s;var i=I(r);X(i,()=>t.children??K),B(r),it(r,d=>n(d),()=>n()),j(()=>s=dt(r,s,{class:t.class,"aria-label":"breadcrumb",...c})),S(e,r),G()}var Jt=q("<li><!></li>");function He(e,t){F(t,!0);let n=rt(t,"ref",15,null),c=L(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Jt();let s;var i=I(r);X(i,()=>t.children??K),B(r),it(r,d=>n(d),()=>n()),j(d=>s=dt(r,s,{class:d,...c}),[()=>yt("inline-flex items-center gap-1.5",t.class)]),S(e,r),G()}var $t=q("<li><!></li>");function Oe(e,t){F(t,!0);let n=rt(t,"ref",15,null),c=L(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=$t();let s;var i=I(r);{var d=m=>{var z=et(),E=U(z);X(E,()=>t.children??K),S(m,z)},_=m=>{Kt(m,{})};bt(i,m=>{t.children?m(d):m(_,!1)})}B(r),it(r,m=>n(m),()=>n()),j(m=>s=dt(r,s,{role:"presentation","aria-hidden":"true",class:m,...c}),[()=>yt("[&>svg]:size-3.5",t.class)]),S(e,r),G()}var te=q("<a><!></a>");function Ue(e,t){F(t,!0);let n=rt(t,"ref",15,null),c=rt(t,"href",3,void 0),r=L(t,["$$slots","$$events","$$legacy","ref","class","href","child","children"]);const s=gt(()=>({class:yt("hover:text-foreground transition-colors",t.class),href:c(),...r})),i=Yt(),[d,_]=i;var m=et(),z=U(m);{var E=w=>{var x=et(),T=U(x);X(T,()=>t.child,()=>({props:f(s)})),S(w,x)},b=w=>{var x=te();let T;var k=I(x);X(k,()=>t.children??K),B(x),it(x,u=>n(u),()=>n()),j(u=>T=dt(x,T,{...u}),[()=>_({...f(s)},[{attribute_name:"href",lang_attribute_name:"hreflang"}])]),S(w,x)};bt(z,w=>{t.child?w(E):w(b,!1)})}S(e,m),G()}var ee=q("<ol><!></ol>");function je(e,t){F(t,!0);let n=rt(t,"ref",15,null),c=L(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=ee();let s;var i=I(r);X(i,()=>t.children??K),B(r),it(r,d=>n(d),()=>n()),j(d=>s=dt(r,s,{class:d,...c}),[()=>yt("text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5",t.class)]),S(e,r),G()}var ae=q("<span><!></span>");function Ke(e,t){F(t,!0);let n=rt(t,"ref",15,null),c=L(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=ae();let s;var i=I(r);X(i,()=>t.children??K),B(r),it(r,d=>n(d),()=>n()),j(d=>s=dt(r,s,{role:"link","aria-disabled":"true","aria-current":"page",class:d,...c}),[()=>yt("text-foreground font-normal",t.class)]),S(e,r),G()}const Le=e=>`${Ft}/sample/${e}`,We=({sampleId:e,datasetId:t})=>{const n=Gt({path:{sample_id:e,dataset_id:t}}),c=Ht(),r=Ot(n);return{refetch:()=>{c.invalidateQueries({queryKey:n.queryKey})},sample:r}};var ne=q('<span class="text-sm"> </span> <span class="break-all text-sm"> </span>',1),oe=q('<div class="grid grid-cols-[6rem_1fr] gap-y-3 text-diffuse-foreground"></div>'),re=q('<div class="flex items-start gap-3"><span class="truncate text-sm font-medium"> </span> <pre class="min-w-[8rem] flex-1 overflow-x-auto whitespace-pre-wrap rounded bg-muted p-2 text-sm"> </pre></div>'),ie=q('<div class="flex items-start gap-3"><span class="truncate text-sm font-medium"> </span> <span class="min-w-[8rem] flex-1 break-all text-sm"> </span></div>'),se=q('<div class="space-y-3 text-diffuse-foreground"></div>'),le=q("<!> <!>",1);function Qe(e,t){F(t,!0);const n=rt(t,"showCustomMetadata",3,!0),c=gt(()=>[{id:"height",label:"Height:",value:Zt(t.sample.height)+"px"},{id:"width",label:"Width:",value:Zt(t.sample.width)+"px"},{id:"filename",label:"Filename:",value:t.sample.file_name},{id:"filepath",label:"Filepath:",value:t.sample.file_path_abs}]),r=gt(()=>{const m=[];if(t.sample.metadata_dict&&typeof t.sample.metadata_dict=="object"&&"data"in t.sample.metadata_dict){const z=t.sample.metadata_dict.data;z&&typeof z=="object"&&Object.entries(z).forEach(([E,b])=>{const w=Ut(b),x=typeof b=="object"&&b!==null&&!Array.isArray(b);m.push({id:`metadata_${E}`,label:`${E}:`,value:w,isComplex:x})})}return m});var s=le(),i=U(s);Dt(i,{title:"Sample details",children:(m,z)=>{var E=oe();It(E,21,()=>f(c),({label:b,value:w,id:x})=>b,(b,w)=>{let x=()=>f(w).label,T=()=>f(w).value,k=()=>f(w).id;var u=ne(),A=U(u),C=I(A,!0);B(A);var v=tt(A,2),D=I(v,!0);B(v),j(()=>{ut(C,x()),ct(v,"data-testid",`sample-metadata-${k()}`),ut(D,T())}),S(b,u)}),B(E),S(m,E)}});var d=tt(i,2);{var _=m=>{Dt(m,{title:"Metadata",children:(z,E)=>{var b=se();It(b,21,()=>f(r),({label:w,value:x,id:T,isComplex:k})=>w,(w,x)=>{let T=()=>f(x).label,k=()=>f(x).value,u=()=>f(x).id,A=()=>f(x).isComplex;var C=et(),v=U(C);{var D=V=>{var N=re(),Y=I(N),at=I(Y,!0);B(Y);var nt=tt(Y,2),ft=I(nt,!0);B(nt),B(N),j(()=>{ct(Y,"title",T()),ut(at,T()),ut(ft,k())}),S(V,N)},Z=V=>{var N=ie(),Y=I(N),at=I(Y,!0);B(Y);var nt=tt(Y,2),ft=I(nt,!0);B(nt),B(N),j(()=>{ct(Y,"title",T()),ut(at,T()),ct(nt,"data-testid",`sample-metadata-${u()}`),ut(ft,k())}),S(V,N)};bt(v,V=>{A()?V(D):V(Z,!1)})}S(w,C)}),B(b),S(z,b)}})};bt(d,m=>{n()&&f(r).length>0&&m(_)})}S(e,s),G()}function Q(e){return typeof e=="string"?new St([[document.querySelector(e)]],[document.documentElement]):new St([[e]],qt)}function ue(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lt(e,t){if(e=ue(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var c=n.createSVGPoint();return c.x=e.clientX,c.y=e.clientY,c=c.matrixTransform(t.getScreenCTM().inverse()),[c.x,c.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function ce(e){return new St([document.querySelectorAll(e)],[document.documentElement])}const kt={capture:!0,passive:!1};function Pt(e){e.preventDefault(),e.stopImmediatePropagation()}function he(e){var t=e.document.documentElement,n=Q(e).on("dragstart.drag",Pt,kt);"onselectstart"in t?n.on("selectstart.drag",Pt,kt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function de(e,t){var n=e.document.documentElement,c=Q(e).on("dragstart.drag",null);t&&(c.on("click.drag",Pt,kt),setTimeout(function(){c.on("click.drag",null)},0)),"onselectstart"in n?c.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var fe=1e-12;function Ct(e){return((e=Math.exp(e))+1/e)/2}function me(e){return((e=Math.exp(e))-1/e)/2}function ge(e){return((e=Math.exp(2*e))-1)/(e+1)}const ve=function e(t,n,c){function r(s,i){var d=s[0],_=s[1],m=s[2],z=i[0],E=i[1],b=i[2],w=z-d,x=E-_,T=w*w+x*x,k,u;if(T<fe)u=Math.log(b/m)/t,k=function(V){return[d+V*w,_+V*x,m*Math.exp(t*V*u)]};else{var A=Math.sqrt(T),C=(b*b-m*m+c*T)/(2*m*n*A),v=(b*b-m*m-c*T)/(2*b*n*A),D=Math.log(Math.sqrt(C*C+1)-C),Z=Math.log(Math.sqrt(v*v+1)-v);u=(Z-D)/t,k=function(V){var N=V*u,Y=Ct(D),at=m/(n*A)*(Y*ge(t*N+D)-me(D));return[d+at*w,_+at*x,m*Y/Ct(t*N+D)]}}return k.duration=u*1e3*t/Math.SQRT2,k}return r.rho=function(s){var i=Math.max(.001,+s),d=i*i,_=d*d;return e(i,d,_)},r}(Math.SQRT2,2,4),_t=e=>()=>e;function pe(e,{sourceEvent:t,target:n,transform:c,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:c,enumerable:!0,configurable:!0},_:{value:r}})}function Tt(e){e.stopImmediatePropagation()}function mt(e){e.preventDefault(),e.stopImmediatePropagation()}function ye(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Vt(){return this.__zoom||Bt}function be(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xe(){return navigator.maxTouchPoints||"ontouchstart"in this}function ze(e,t,n){var c=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>c?(c+r)/2:Math.min(0,c)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function we(){var e=ye,t=_e,n=ze,c=be,r=xe,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],d=250,_=ve,m=Xt("start","zoom","end"),z,E,b,w=500,x=150,T=0,k=10;function u(a){a.property("__zoom",Vt).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",at).filter(r).on("touchstart.zoom",nt).on("touchmove.zoom",ft).on("touchend.zoom touchcancel.zoom",Rt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.transform=function(a,l,o,h){var g=a.selection?a.selection():a;g.property("__zoom",Vt),a!==g?D(a,l,o,h):g.interrupt().each(function(){Z(this,arguments).event(h).start().zoom(null,typeof l=="function"?l.apply(this,arguments):l).end()})},u.scaleBy=function(a,l,o,h){u.scaleTo(a,function(){var g=this.__zoom.k,p=typeof l=="function"?l.apply(this,arguments):l;return g*p},o,h)},u.scaleTo=function(a,l,o,h){u.transform(a,function(){var g=t.apply(this,arguments),p=this.__zoom,y=o==null?v(g):typeof o=="function"?o.apply(this,arguments):o,M=p.invert(y),P=typeof l=="function"?l.apply(this,arguments):l;return n(C(A(p,P),y,M),g,i)},o,h)},u.translateBy=function(a,l,o,h){u.transform(a,function(){return n(this.__zoom.translate(typeof l=="function"?l.apply(this,arguments):l,typeof o=="function"?o.apply(this,arguments):o),t.apply(this,arguments),i)},null,h)},u.translateTo=function(a,l,o,h,g){u.transform(a,function(){var p=t.apply(this,arguments),y=this.__zoom,M=h==null?v(p):typeof h=="function"?h.apply(this,arguments):h;return n(Bt.translate(M[0],M[1]).scale(y.k).translate(typeof l=="function"?-l.apply(this,arguments):-l,typeof o=="function"?-o.apply(this,arguments):-o),p,i)},h,g)};function A(a,l){return l=Math.max(s[0],Math.min(s[1],l)),l===a.k?a:new zt(l,a.x,a.y)}function C(a,l,o){var h=l[0]-o[0]*a.k,g=l[1]-o[1]*a.k;return h===a.x&&g===a.y?a:new zt(a.k,h,g)}function v(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function D(a,l,o,h){a.on("start.zoom",function(){Z(this,arguments).event(h).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event(h).end()}).tween("zoom",function(){var g=this,p=arguments,y=Z(g,p).event(h),M=t.apply(g,p),P=o==null?v(M):typeof o=="function"?o.apply(g,p):o,W=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),R=g.__zoom,H=typeof l=="function"?l.apply(g,p):l,J=_(R.invert(P).concat(W/R.k),H.invert(P).concat(W/H.k));return function(O){if(O===1)O=H;else{var $=J(O),xt=W/$[2];O=new zt(xt,P[0]-$[0]*xt,P[1]-$[1]*xt)}y.zoom(null,O)}})}function Z(a,l,o){return!o&&a.__zooming||new V(a,l)}function V(a,l){this.that=a,this.args=l,this.active=0,this.sourceEvent=null,this.extent=t.apply(a,l),this.taps=0}V.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,l){return this.mouse&&a!=="mouse"&&(this.mouse[1]=l.invert(this.mouse[0])),this.touch0&&a!=="touch"&&(this.touch0[1]=l.invert(this.touch0[0])),this.touch1&&a!=="touch"&&(this.touch1[1]=l.invert(this.touch1[0])),this.that.__zoom=l,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var l=Q(this.that).datum();m.call(a,this.that,new pe(a,{sourceEvent:this.sourceEvent,target:u,transform:this.that.__zoom,dispatch:m}),l)}};function N(a,...l){if(!e.apply(this,arguments))return;var o=Z(this,l).event(a),h=this.__zoom,g=Math.max(s[0],Math.min(s[1],h.k*Math.pow(2,c.apply(this,arguments)))),p=lt(a);if(o.wheel)(o.mouse[0][0]!==p[0]||o.mouse[0][1]!==p[1])&&(o.mouse[1]=h.invert(o.mouse[0]=p)),clearTimeout(o.wheel);else{if(h.k===g)return;o.mouse=[p,h.invert(p)],wt(this),o.start()}mt(a),o.wheel=setTimeout(y,x),o.zoom("mouse",n(C(A(h,g),o.mouse[0],o.mouse[1]),o.extent,i));function y(){o.wheel=null,o.end()}}function Y(a,...l){if(b||!e.apply(this,arguments))return;var o=a.currentTarget,h=Z(this,l,!0).event(a),g=Q(a.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",W,!0),p=lt(a,o),y=a.clientX,M=a.clientY;he(a.view),Tt(a),h.mouse=[p,this.__zoom.invert(p)],wt(this),h.start();function P(R){if(mt(R),!h.moved){var H=R.clientX-y,J=R.clientY-M;h.moved=H*H+J*J>T}h.event(R).zoom("mouse",n(C(h.that.__zoom,h.mouse[0]=lt(R,o),h.mouse[1]),h.extent,i))}function W(R){g.on("mousemove.zoom mouseup.zoom",null),de(R.view,h.moved),mt(R),h.event(R).end()}}function at(a,...l){if(e.apply(this,arguments)){var o=this.__zoom,h=lt(a.changedTouches?a.changedTouches[0]:a,this),g=o.invert(h),p=o.k*(a.shiftKey?.5:2),y=n(C(A(o,p),h,g),t.apply(this,l),i);mt(a),d>0?Q(this).transition().duration(d).call(D,y,h,a):Q(this).call(u.transform,y,h,a)}}function nt(a,...l){if(e.apply(this,arguments)){var o=a.touches,h=o.length,g=Z(this,l,a.changedTouches.length===h).event(a),p,y,M,P;for(Tt(a),y=0;y<h;++y)M=o[y],P=lt(M,this),P=[P,this.__zoom.invert(P),M.identifier],g.touch0?!g.touch1&&g.touch0[2]!==P[2]&&(g.touch1=P,g.taps=0):(g.touch0=P,p=!0,g.taps=1+!!z);z&&(z=clearTimeout(z)),p&&(g.taps<2&&(E=P[0],z=setTimeout(function(){z=null},w)),wt(this),g.start())}}function ft(a,...l){if(this.__zooming){var o=Z(this,l).event(a),h=a.changedTouches,g=h.length,p,y,M,P;for(mt(a),p=0;p<g;++p)y=h[p],M=lt(y,this),o.touch0&&o.touch0[2]===y.identifier?o.touch0[0]=M:o.touch1&&o.touch1[2]===y.identifier&&(o.touch1[0]=M);if(y=o.that.__zoom,o.touch1){var W=o.touch0[0],R=o.touch0[1],H=o.touch1[0],J=o.touch1[1],O=(O=H[0]-W[0])*O+(O=H[1]-W[1])*O,$=($=J[0]-R[0])*$+($=J[1]-R[1])*$;y=A(y,Math.sqrt(O/$)),M=[(W[0]+H[0])/2,(W[1]+H[1])/2],P=[(R[0]+J[0])/2,(R[1]+J[1])/2]}else if(o.touch0)M=o.touch0[0],P=o.touch0[1];else return;o.zoom("touch",n(C(y,M,P),o.extent,i))}}function Rt(a,...l){if(this.__zooming){var o=Z(this,l).event(a),h=a.changedTouches,g=h.length,p,y;for(Tt(a),b&&clearTimeout(b),b=setTimeout(function(){b=null},w),p=0;p<g;++p)y=h[p],o.touch0&&o.touch0[2]===y.identifier?delete o.touch0:o.touch1&&o.touch1[2]===y.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),o.taps===2&&(y=lt(y,this),Math.hypot(E[0]-y[0],E[1]-y[1])<k)){var M=Q(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return u.wheelDelta=function(a){return arguments.length?(c=typeof a=="function"?a:_t(+a),u):c},u.filter=function(a){return arguments.length?(e=typeof a=="function"?a:_t(!!a),u):e},u.touchable=function(a){return arguments.length?(r=typeof a=="function"?a:_t(!!a),u):r},u.extent=function(a){return arguments.length?(t=typeof a=="function"?a:_t([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),u):t},u.scaleExtent=function(a){return arguments.length?(s[0]=+a[0],s[1]=+a[1],u):[s[0],s[1]]},u.translateExtent=function(a){return arguments.length?(i[0][0]=+a[0][0],i[1][0]=+a[1][0],i[0][1]=+a[0][1],i[1][1]=+a[1][1],u):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},u.constrain=function(a){return arguments.length?(n=a,u):n},u.duration=function(a){return arguments.length?(d=+a,u):d},u.interpolate=function(a){return arguments.length?(_=a,u):_},u.on=function(){var a=m.on.apply(m,arguments);return a===m?u:a},u.clickDistance=function(a){return arguments.length?(T=(a=+a)*a,u):Math.sqrt(T)},u.tapDistance=function(a){return arguments.length?(k=+a,u):k},u}function Me(e,t){let n=e.scaleIndependentXForm;n||(n=e.scaleIndependentXForm=t.createSVGTransform(),e.transform.baseVal.appendItem(n));const c=e.parentNode;if(c){const r=c.getScreenCTM();if(r){const s=r.inverse().multiply(t.getScreenCTM());s.e=s.f=0,n.setMatrix(s)}}}var Te=q('<div class="pointer-events-auto absolute bottom-0 left-1 z-20 flex select-none items-center gap-1 rounded-lg bg-muted bg-opacity-80 shadow-md backdrop-blur-sm"><!> <div class="h-6 w-px bg-white bg-opacity-20"></div> <!> <div class="w-[32px] text-center text-sm text-muted-foreground" data-testid="zoom-level"> </div> <!></div>');function Se(e,t){var n=Te(),c=I(n);Mt(c,{variant:"ghost","data-testid":"zoom-reset",size:"sm",get onclick(){return t.onZoomReset},get disabled(){return t.isResetDisabled},children:(_,m)=>{At();var z=Nt("Reset");S(_,z)},$$slots:{default:!0}});var r=tt(c,4);Mt(r,{title:"zoom out",variant:"ghost",size:"icon","data-testid":"zoom-out",get onclick(){return t.onZoomOut},get disabled(){return t.isZoominDisabled},children:(_,m)=>{Wt(_,{class:"h-4 w-4"})},$$slots:{default:!0}});var s=tt(r,2),i=I(s);B(s);var d=tt(s,2);Mt(d,{title:"zoom in",variant:"ghost",size:"icon","data-testid":"zoom-in",get onclick(){return t.onZoomIn},get disabled(){return t.isZoomoutDisabled},children:(_,m)=>{Lt(_,{class:"h-4 w-4"})},$$slots:{default:!0}}),B(n),j(_=>ut(i,`${_??""}%`),[()=>Math.round(t.scale*100)]),S(e,n)}var ke=q('<div class="relative flex h-full w-full select-none items-center justify-center"><!> <svg class="z-10 h-full w-full cursor-grab" preserveAspectRatio="xMidYMid meet"><g><!></g></svg> <svg class="pointer-events-none absolute inset-0" preserveAspectRatio="xMidYMid meet"></svg></div>');function Je(e,t){F(t,!0);let n=ht(null),c=ht(null),r=ht(800),s=ht(600);Et(()=>{if(!f(n))return;ot(r,st(f(n).clientWidth)),ot(s,st(f(n).clientHeight));const v=new ResizeObserver(()=>{f(n)&&(ot(r,st(f(n).clientWidth)),ot(s,st(f(n).clientHeight)))});return v.observe(f(n)),()=>v.disconnect()});const i=10,d=gt(()=>{const v={x:0,y:0,width:t.width,height:t.height};if(t.boundingBox){w();const{x:D,y:Z,width:V,height:N}=t.boundingBox;return{x:Math.round(Math.max(0,D-i)),y:Math.round(Math.max(0,Z-i)),width:Math.round(Math.min(t.width-D,V+i*2)),height:Math.round(Math.min(t.height-Z,N+i*2))}}return v});let _=ht(st({k:1,x:0,y:0}));const m=gt(()=>{if(!f(n))return 1;const v=f(r)/t.width,D=f(s)/t.height,Z=Math.min(v,D);return f(_).k*Z});let z=ht(null);const E=()=>{f(n)&&(ot(z,st(we().on("zoom",v=>{ot(_,st(v.transform))}).filter(v=>(!v.ctrlKey||v.type==="wheel")&&!v.button&&!(v.type==="mousedown"&&v.button===2)).wheelDelta(v=>-v.deltaY*.002))),Q(f(n)).call(f(z)).on("dblclick.zoom",null))},b=v=>{if(!f(n)||!f(z))return;const D=v?1.5:.75;Q(f(n)).transition().duration(300).call(f(z).scaleBy,D)},w=()=>{!f(n)||!f(z)||Q(f(n)).transition().duration(300).call(f(z).transform,Bt)};jt(()=>{E()}),Et(()=>{f(_).k,ce(".unscaled").each(function(){Me(this,f(c))})});var x=ke(),T=I(x);Se(T,{get scale(){return f(m)},onZoomIn:()=>b(!0),onZoomOut:()=>b(!1),onZoomReset:w});var k=tt(T,2),u=I(k),A=I(u);X(A,()=>t.children),B(u),B(k),it(k,v=>ot(n,v),()=>f(n));var C=tt(k,2);ct(C,"viewBox","0 0 1024 768"),it(C,v=>ot(c,v),()=>f(c)),B(x),j(()=>{ct(k,"viewBox",`${f(d).x} ${f(d).y} ${f(d).width} ${f(d).height}`),ct(u,"transform",`translate(${f(_).x}, ${f(_).y}) scale(${f(_).k})`)}),S(e,x),G()}export{Ge as B,Xe as D,Fe as H,Qe as S,Je as Z,je as a,He as b,Ue as c,Oe as d,Ke as e,Le as g,We as u};
