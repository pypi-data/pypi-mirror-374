import"../chunks/CWj6FrbW.js";import{p as V,f as _,n as Ae,a as Z,ax as xe,g as a,d as p,s as l,c as u,r as o,t as j,L as J,V as $e,$ as be,l as aa}from"../chunks/l7KrR96u.js";import{c as M,a as n,t as x,d as Se,n as Be}from"../chunks/Bu7uvVrG.js";import{i as D,a as W,s as He}from"../chunks/XO7A28GO.js";import{s as ee}from"../chunks/DIRAtgl0.js";import{p as le}from"../chunks/Bsi3UGy5.js";import{I as Ne,s as Te,u as ta,d as Ie,C as De,z as Le,S as sa,e as ce,B as na,p as we,D as ra,a as Ue,E as oa,F as Pe,H as la,c as da,i as ye,J as ia}from"../chunks/CvOmgdoc.js";import{u as Ee}from"../chunks/vC4nQVEB.js";import{a as ca,g as ma}from"../chunks/CxtLVaYz.js";import"../chunks/D6su9Aln.js";import"../chunks/Bx1xMsFy.js";import"../chunks/69_IOA4Y.js";import"../chunks/BJXwVxaE.js";import{e as Ce}from"../chunks/DjfY96ND.js";import{s as Me,r as Ve,a as ke}from"../chunks/D98V7j6A.js";import{S as Ze}from"../chunks/D5-A_Ffd.js";import{r as Y}from"../chunks/H7C68rOM.js";import{S as va}from"../chunks/B2FVR0s0.js";import{s as me}from"../chunks/D6RI2Zrd.js";import{B as ua,a as fa,b as X,c as de,H as pa,d as ie,D as ga,e as _a,u as ha,Z as xa,g as $a,S as ba}from"../chunks/nAHhluT7.js";import{T as Sa}from"../chunks/r64xT6ao.js";function Ia($,e){V(e,!0);let c=Ve(e,["$$slots","$$events","$$legacy"]);Ne($,Me({name:"file-image"},()=>c,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["circle",{cx:"10",cy:"12",r:"2"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22"}]],children:(t,h)=>{var f=M(),k=_(f);ee(k,()=>e.children??Ae),n(t,f)},$$slots:{default:!0}})),Z()}function wa($,e){V(e,!0);let c=Ve(e,["$$slots","$$events","$$legacy"]);Ne($,Me({name:"images"},()=>c,{iconNode:[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18"}],["circle",{cx:"12",cy:"8",r:"2"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2"}]],children:(t,h)=>{var f=M(),k=_(f);ee(k,()=>e.children??Ae),n(t,f)},$$slots:{default:!0}})),Z()}var Pa=x('<!> <span class="hidden sm:inline">Home</span>',1),ya=x('<!> <span class="max-w-[150px] truncate"> </span>',1),Ca=x('<!> <span class="hidden sm:inline">Samples</span>',1),ka=x('<!> <span class="max-w-[200px] truncate"><!></span>',1),Aa=x("<!> <!> <!> <!> <!> <!> <!>",1);function Ba($,e){V(e,!0);const[c,S]=He(),t=()=>W(h,"$samplesTotalCount",c),{samplesTotalCount:h}=Ee();ua($,{class:"mb-2","data-testid":"sample-details-breadcrumb",children:(f,k)=>{fa(f,{children:(H,N)=>{var I=Aa(),A=_(I);X(A,{children:(g,L)=>{const d=p(()=>Y.toHome());de(g,{get href(){return a(d)},class:"flex items-center gap-2",children:(i,m)=>{var s=Pa(),v=_(s);pa(v,{class:"h-4 w-4"}),xe(2),n(i,s)},$$slots:{default:!0}})},$$slots:{default:!0}});var w=l(A,2);ie(w,{});var P=l(w,2);X(P,{children:(g,L)=>{const d=p(()=>Y.toSamples(e.dataset.dataset_id));de(g,{get href(){return a(d)},class:"flex items-center gap-2",get title(){return e.dataset.directory},children:(i,m)=>{var s=ya(),v=_(s);ga(v,{class:"h-4 w-4"});var C=l(v,2),z=u(C,!0);o(C),j(()=>{Te(C,"title",e.dataset.directory),me(z,e.dataset.name)}),n(i,s)},$$slots:{default:!0}})},$$slots:{default:!0}});var y=l(P,2);ie(y,{});var B=l(y,2);X(B,{children:(g,L)=>{const d=p(()=>Y.toSamples(e.dataset.dataset_id));de(g,{get href(){return a(d)},class:"flex items-center gap-2",children:(i,m)=>{var s=Ca(),v=_(s);wa(v,{class:"h-4 w-4"}),xe(2),n(i,s)},$$slots:{default:!0}})},$$slots:{default:!0}});var U=l(B,2);ie(U,{});var b=l(U,2);X(b,{children:(g,L)=>{_a(g,{class:"flex items-center gap-2",children:(d,i)=>{var m=ka(),s=_(m);Ia(s,{class:"h-4 w-4"});var v=l(s,2),C=u(v);{var z=T=>{var r=Se();j(()=>me(r,`Sample ${e.sampleIndex+1} of ${t()??""}`)),n(T,r)},ae=T=>{var r=Se("Sample");n(T,r)};D(C,T=>{e.sampleIndex!==void 0?T(z):T(ae,!1)})}o(v),n(d,m)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(H,I)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(),S()}var Ha=Be("<g></g>"),Na=Be("<image></image><!>",1),Ta=x('<div class="h-full w-full overflow-hidden"><div class="sample relative h-full w-full"><div class="absolute right-4 top-2 z-30"><!></div> <!> <!></div></div>'),Da=x('<div class="flex h-full w-full flex-col space-y-4"><div class="flex w-full items-center"><!></div> <!> <div class="flex min-h-0 flex-1 gap-4"><div class="flex-1"><!></div> <div class="relative w-[375px]"><!></div></div></div>');function La($,e){V(e,!0);const[c,S]=He(),t=()=>W(a(U),"$sample",c),h=()=>W(H,"$selectedSampleIds",c),f=()=>W(A,"$isHidden",c),k=()=>W(d,"$showAnnotationTextLabelsStore",c),{selectedSampleIds:H,toggleSampleSelection:N}=Ee(),I=e.dataset.dataset_id,{isHidden:A,handleKeyEvent:w}=ta(),{settingsStore:P}=Ie(),y=()=>{ma(Y.toSamples(I))},B=p(()=>ha({sampleId:e.sampleId,datasetId:I})),U=p(()=>a(B).sample),b=p(()=>a(B).refetch),g=r=>{switch(r.key){case aa(P).key_go_back:y();break;case" ":r.preventDefault(),N(e.sampleId);break}w(r)};let L=p(()=>$a(e.sampleId));const{showAnnotationTextLabelsStore:d}=Ie();let i=$e(void 0);ca(()=>{J(i,void 0),J(s,void 0)});const m=r=>{a(i)===r?J(i,void 0):J(i,ke(r))};let s=$e(void 0);const v=r=>{if(t().data.annotations){const E=t().data.annotations.find(F=>F.annotation_id===r);E&&J(s,ke(we(E)))}};var C=M();Ce("keydown",be,g),Ce("keyup",be,w);var z=_(C);{var ae=r=>{var E=Da(),F=u(E),ze=u(F);Ba(ze,{get dataset(){return e.dataset},get sampleIndex(){return e.sampleIndex}}),o(F);var ve=l(F,2);Ze(ve,{class:"mb-4 bg-border-hard"});var ue=l(ve,2),te=u(ue),Fe=u(te);De(Fe,{className:"h-full",children:(G,Fa)=>{Le(G,{className:"h-full",children:(Re,Ga)=>{var se=Ta(),pe=u(se),ne=u(pe),Je=u(ne);const We=p(()=>h().has(e.sampleId));sa(Je,{onSelect:()=>N(e.sampleId),get isSelected(){return a(We)}}),o(ne);var ge=l(ne,2);{var je=K=>{var re=M(),q=_(re);ee(q,()=>e.children),n(K,re)};D(ge,K=>{e.children&&K(je)})}var qe=l(ge,2);xa(qe,{get width(){return t().data.width},get height(){return t().data.height},get boundingBox(){return a(s)},children:(K,re)=>{var q=Na(),_e=_(q),Oe=l(_e);{var Qe=oe=>{var O=Ha();let he;ce(O,5,()=>ra(t().data),R=>R.annotation_id,(R,Q)=>{const Xe=p(()=>we(a(Q))),Ye=p(()=>a(Q).annotation_id===a(i));na(R,{get groupId(){return a(Q).annotation_id},onSelect:m,get box(){return a(Xe)},get isSelected(){return a(Ye)},children:(ea,Ka)=>{va(ea,{get annotation(){return a(Q)},get showLabel(){return k()},get imageWidth(){return t().data.width}})},$$slots:{default:!0}})}),o(O),j(R=>he=Ue(O,0,"",null,he,R),[()=>({invisible:f()})]),n(oe,O)};D(Oe,oe=>{t().data&&oe(Qe)})}j(()=>Te(_e,"href",a(L))),n(K,q)},$$slots:{default:!0}}),o(pe),o(se),n(Re,se)},$$slots:{default:!0}})},$$slots:{default:!0}}),o(te);var fe=l(te,2),Ge=u(fe);{var Ke=G=>{Za(G,{get sample(){return t().data},get selectedAnnotationId(){return a(i)},onAnnotationClick:m,onClickCenterIcon:v,get onUpdate(){return a(b)}})};D(Ge,G=>{t().data&&G(Ke)})}o(fe),o(ue),o(E),n(r,E)},T=r=>{oa(r,{})};D(z,r=>{t().data?r(ae):r(T,!1)})}n($,C),Z(),S()}var Ua=x("<div> </div>"),Ea=x('<div class="flex gap-1"></div>'),Ma=x('<div class="flex flex-col gap-2"></div>'),Va=x('<div class="flex-none"><div class="mb-2.5 text-lg font-semibold">Sample details</div> <!></div> <div class="flex h-full min-h-0 flex-col space-y-4 overflow-y-auto dark:[color-scheme:dark]"><!> <!> <!></div>',1);function Za($,e){V(e,!0);const c=e.sample.tags,S=p(()=>e.sample.annotations?[...e.sample.annotations].sort((t,h)=>t.annotation_label.annotation_label_name.localeCompare(h.annotation_label.annotation_label_name)):[]);De($,{className:"h-full",children:(t,h)=>{Le(t,{className:"h-full flex flex-col",children:(f,k)=>{var H=Va(),N=_(H),I=l(u(N),2);Ze(I,{class:"mb-4 bg-border-hard"}),o(N);var A=l(N,2),w=u(A);{var P=b=>{Pe(b,{title:"Tags",icon:Sa,children:(g,L)=>{var d=Ea();ce(d,21,()=>c,ye,(i,m)=>{var s=Ua(),v=u(s,!0);o(s),j(C=>{Ue(s,1,C),me(v,a(m).name)},[()=>la(da("inline rounded-lg bg-card px-2 py-2 text-xs"))]),n(i,s)}),o(d),n(g,d)}})};D(w,b=>{c&&c.length>0&&b(P)})}var y=l(w,2);{var B=b=>{Pe(b,{title:"Annotations",children:(g,L)=>{var d=Ma();ce(d,21,()=>a(S),ye,(i,m)=>{const s=p(()=>e.selectedAnnotationId===a(m).annotation_id);ia(i,{get annotation(){return a(m)},get isSelected(){return a(s)},onClick:()=>e.onAnnotationClick(a(m).annotation_id),onClickCenterIcon:v=>{v.stopPropagation(),e.onClickCenterIcon(a(m).annotation_id)},get onUpdate(){return e.onUpdate}})}),o(d),n(g,d)}})};D(y,b=>{a(S).length>0&&b(B)})}var U=l(y,2);ba(U,{get sample(){return e.sample}}),o(A),n(f,H)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z()}var za=x('<div class="flex h-full w-full space-x-4 px-4 pb-4" data-testid="sample-details"><div class="h-full w-full space-y-6 rounded-[1vw] bg-card p-4"><!></div></div>');function vt($,e){V(e,!0);const c=p(()=>le.params.sampleId),S=le.data.dataset,t=p(()=>Number(le.params.sampleIndex));var h=za(),f=u(h),k=u(f);La(k,{get sampleId(){return a(c)},dataset:S,get sampleIndex(){return a(t)},children:(H,N)=>{var I=M(),A=_(I);{var w=P=>{var y=M(),B=_(y);ee(B,()=>e.children),n(P,y)};D(A,P=>{e.children&&P(w)})}n(H,I)},$$slots:{default:!0}}),o(f),o(h),n($,h),Z()}export{vt as component};
