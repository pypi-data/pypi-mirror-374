# Custom MLflow package with johnsnowlabs improvements
# Based on MLflow 3.3.3.dev0 with custom modifications

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[project]
name = "mlflow-pri"
version = "3.3.3.post3"
description = "MLflow with enhanced johnsnowlabs support - Custom version by Pri"
readme = "README.md"
keywords = ["mlflow", "ai", "databricks", "johnsnowlabs", "nlp"]
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Intended Audience :: Developers",
  "Intended Audience :: End Users/Desktop",
  "Intended Audience :: Science/Research",
  "Intended Audience :: Information Technology",
  "Topic :: Scientific/Engineering :: Artificial Intelligence",
  "Topic :: Software Development :: Libraries :: Python Modules",
  "License :: OSI Approved :: Apache Software License",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3.10",
]
requires-python = ">=3.10"
dependencies = [
  "Flask<4",
  "alembic<2,!=1.10.0",
  "cachetools<7,>=5.0.0",
  "click<9,>=7.0",
  "cloudpickle<4",
  "cryptography<46,>=43.0.0",
  "databricks-sdk<1,>=0.20.0",
  "docker<8,>=4.0.0",
  "fastapi<1",
  "fastmcp<3,>=2.0.0",
  "gitpython<4,>=3.1.9",
  "graphene<4",
  "gunicorn<24; platform_system != 'Windows'",
  "importlib_metadata<9,>=3.7.0,!=4.7.0",
  "matplotlib<4",
  "numpy<3",
  "opentelemetry-api<3,>=1.9.0",
  "opentelemetry-proto<3,>=1.9.0",
  "opentelemetry-sdk<3,>=1.9.0",
  "packaging<26",
  "pandas<3",
  "protobuf<7,>=3.12.0",
  "pyarrow<22,>=4.0.0",
  "pydantic<3,>=1.10.8",
  "pyyaml<7,>=5.1",
  "requests<3,>=2.17.3",
  "scikit-learn<2",
  "scipy<2",
  "sqlalchemy<3,>=1.4.0",
  "sqlparse<1,>=0.4.0",
  "typing-extensions<5,>=4.0.0",
  "uvicorn<1",
  "waitress<4; platform_system == 'Windows'",
]

[[project.maintainers]]
name = "Prikshit"

[project.license]
file = "LICENSE.txt"

[project.optional-dependencies]
extras = [
  "pyarrow",
  "requests-auth-aws-sigv4",
  "boto3",
  "botocore",
  "google-cloud-storage>=1.30.0",
  "azureml-core>=1.2.0",
  "pysftp",
  "kubernetes",
  "virtualenv",
  "prometheus-flask-exporter",
]
databricks = [
  "azure-storage-file-datalake>12",
  "google-cloud-storage>=1.30.0",
  "boto3>1",
  "botocore",
  "databricks-agents>=1.2.0,<2.0",
]
mlserver = [
  "mlserver>=1.2.0,!=1.3.1,<2.0.0",
  "mlserver-mlflow>=1.2.0,!=1.3.1,<2.0.0",
]
gateway = [
  "aiohttp<4",
  "boto3<2,>=1.28.56",
  "fastapi<1",
  "slowapi<1,>=0.1.9",
  "tiktoken<1",
  "uvicorn[standard]<1",
  "watchfiles<2",
]
genai = [
  "aiohttp<4",
  "boto3<2,>=1.28.56",
  "fastapi<1",
  "slowapi<1,>=0.1.9",
  "tiktoken<1",
  "uvicorn[standard]<1",
  "watchfiles<2",
]
sqlserver = ["mlflow-dbstore"]
aliyun-oss = ["aliyunstoreplugin"]
jfrog = ["mlflow-jfrog-plugin"]
langchain = ["langchain>=0.2.15,<=0.3.27"]
auth = ["Flask-WTF<2"]
johnsnowlabs = ["johnsnowlabs"]  # Add johnsnowlabs as optional dependency

[project.urls]

[project.scripts]
mlflow = "mlflow.cli:cli"

[project.entry-points."mlflow.app"]
basic-auth = "mlflow.server.auth:create_app"

[project.entry-points."mlflow.app.client"]
basic-auth = "mlflow.server.auth.client:AuthServiceClient"

[project.entry-points."mlflow.deployments"]
databricks = "mlflow.deployments.databricks"
http = "mlflow.deployments.mlflow"
https = "mlflow.deployments.mlflow"
openai = "mlflow.deployments.openai"

[tool.setuptools.package-data]
mlflow = [
  "store/db_migrations/alembic.ini",
  "temporary_db_migrations_for_pre_1_users/alembic.ini",
  "pyspark/ml/log_model_allowlist.txt",
  "server/auth/basic_auth.ini",
  "server/auth/db/migrations/alembic.ini",
  "models/notebook_resources/**/*",
  "models/container/**/*",
  "server/js/build/**/*",
]

[tool.setuptools.packages.find]
where = ["."]
include = ["mlflow", "mlflow.*"]
exclude = ["tests", "tests.*"]
