import{G as B,u as m,P as L,d as P,a as N,b as V,r as p,g as q,o as E,c as M,e as U,f as _,h as n,w as r,_ as j,i as R,j as a,k as G,N as T,l as D,B as I,m as O,t as z,n as A,s as F}from"./index-Bl6WO0OO.js";import{_ as H,a as J}from"./FormItem-m3CyvpHh.js";function K(g){return L(m.login,g)}function Q(g){return B(m.clientStatus,g)}const W={class:"h-full"},X={class:"absolute top-1/2 left-1/2 -translate-1/2 rounded-2xl p-5 w-2xl"},Y={class:"flex items-center justify-between"},ee=P({__name:"LoginView",setup(g){const{t,locale:v}=N(),h=V(),i=p(!1),f=p(null),l=p({default_language:q(),server_addr:"http://127.0.0.1:80"}),b={default_language:{required:!0},cache_dir:{required:!0,message:t("login.localCacheErrMsg")},user_token:{required:!0,message:t("login.tokenErrMsg")},server_addr:{required:!0,message:t("login.cloudServerErrMsg")}},k=o=>{F(o),v.value=o},x=()=>{var o;i.value||(i.value=!0,(o=f.value)==null||o.validate(async e=>{if(e){i.value=!1;return}const[s,d]=await K(l.value);i.value=!1,!s&&d&&d.status===0&&h.push({path:"/"})}))};return E(async()=>{const[o,e]=await Q({default_language:l.value.default_language});if(!o&&e&&e.status===0){const s=e.data;l.value={...l.value,default_language:s.default_language,cache_dir:s.cache_dir,user_token:s.set_user_token,server_addr:s.cloud_server_addr}}}),(o,e)=>{const s=R,d=G,c=J,y=T,C=I,w=H,S=A;return U(),M("div",W,[e[6]||(e[6]=_("div",{class:"fixed inset-0 select-none h-screen w-screen",style:{"background-image":`linear-gradient(
          13deg,
          #cdd5e0,
          rgb(205, 213, 224),
          #e6e6e6,
          #bbc8d0
        )`}},null,-1)),_("div",X,[n(S,null,{default:r(()=>[e[5]||(e[5]=_("div",{class:"flex items-center justify-center mb-5"},[_("img",{src:j,alt:"Logo",class:"h-12"})],-1)),n(s),n(w,{ref_key:"formRef",ref:f,model:a(l),rules:b},{default:r(()=>[n(c,{label:"Cloud Server",path:"server_addr"},{default:r(()=>[n(d,{value:a(l).server_addr,"onUpdate:value":e[0]||(e[0]=u=>a(l).server_addr=u),placeholder:a(t)("login.cloudServerPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(c,{label:"Token",path:"user_token"},{default:r(()=>[n(d,{value:a(l).user_token,"onUpdate:value":e[1]||(e[1]=u=>a(l).user_token=u),placeholder:a(t)("login.tokenPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(c,{label:a(t)("login.localCacheLabel"),path:"cache_dir"},{default:r(()=>[n(d,{value:a(l).cache_dir,"onUpdate:value":e[2]||(e[2]=u=>a(l).cache_dir=u),placeholder:a(t)("login.localCachePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(c,{label:a(t)("login.language"),path:"default_language"},{default:r(()=>[n(y,{"onUpdate:value":[k,e[3]||(e[3]=u=>a(l).default_language=u)],placeholder:a(t)("login.languagePlaceholder"),value:a(l).default_language,options:a(D)},null,8,["placeholder","value","options"])]),_:1},8,["label"]),_("div",Y,[e[4]||(e[4]=_("div",{class:"flex items-center"},null,-1)),n(c,null,{default:r(()=>[n(C,{type:"primary",loading:a(i),onClick:x},{default:r(()=>[O(z(a(t)("login.submitBtn")),1)]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])]),_:1})])])}}});export{ee as default};
