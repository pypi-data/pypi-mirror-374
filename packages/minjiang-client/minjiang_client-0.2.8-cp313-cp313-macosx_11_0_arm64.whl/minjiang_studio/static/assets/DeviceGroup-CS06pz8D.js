import{d as S,a as T,b as $,r as _,J as j,K as E,o as z,I as m,q as w,a4 as H,aI as F,c as J,e as K,h as n,w as i,B as O,m as f,t as g,j as a,dh as A,M as Q,H as L,O as W,n as X,f as Y,k as Z,F as D,di as ee,dj as te,R as oe,dk as ae}from"./index-Bl6WO0OO.js";import{_ as ne}from"./Alert-CutWUBSD.js";import{_ as se,a as ie}from"./FormItem-m3CyvpHh.js";const re={class:"flex justify-end"},ce=S({__name:"DeviceGroup",setup(le){const{t}=T(),N=$(),d=_(!1),p=_(!1),y=_(),u=_({description:void 0,device_group_name:void 0}),x={description:{required:!0,message:t("deviceGroup.descriptionErrMsg")},device_group_name:{required:!0,message:t("deviceGroup.groupNameErrMsg")}},G=()=>{d.value=!1,u.value={description:void 0,device_group_name:void 0}},C=()=>{var o;p.value||(p.value=!0,(o=y.value)==null||o.validate(async e=>{if(e){p.value=!1;return}const[s,r]=await ee(u.value);p.value=!1,!s&&r&&r.status===0&&v()}))},M=o=>{o||G()},k=_(),c=j({page:1,per_page:E,total:0}),v=async()=>{const[o,e]=await te(oe(c));!o&&e&&e.status===0&&(k.value=e.data.list,c.total=e.data.total),d.value&&G()},I=async(o,e)=>{const[s,r]=await ae({device_id:e,hidden:!o});!s&&(r==null?void 0:r.status)===0&&v()};z(v);const P=[{title:t("deviceGroup.id"),key:"create_uid"},{title:t("deviceGroup.groupId"),key:"device_group_id"},{title:t("deviceGroup.groupName"),key:"device_group_name"},{title:t("deviceGroup.description"),key:"description"},{title:t("deviceGroup.descLine1"),key:"desc_line1"},{title:t("deviceGroup.descLine2"),key:"desc_line2"},{title:t("deviceGroup.createTime"),key:"create_time"},{title:t("deviceGroup.status"),key:"status",render:o=>{var e;if(o.status)return m(H,{type:((e=w[o.status])==null?void 0:e.type)||"default",bordered:!1},{default:()=>{var s;return t((s=w[o.status])==null?void 0:s.text)}})}},{title:t("deviceGroup.show2desktop"),key:"status",render:o=>{if(o.status)return m("div",{onClick:e=>e.stopPropagation()},m(F,{value:!o.hidden,onUpdateValue:e=>I(e,o.device_group_id)}))}}],U=({device_group_name:o})=>({class:"cursor-pointer",onClick:()=>{N.push({name:"taskList",query:{device_group_name:o}})}});return(o,e)=>{const s=O,r=Q,B=ne,h=Z,b=ie,R=se,V=X,q=D;return K(),J("div",null,[n(A,{title:a(t)("deviceGroup.pageTitle")},{extra:i(()=>[n(s,{type:"primary",onClick:e[0]||(e[0]=l=>d.value=!0)},{default:i(()=>[f(g(a(t)("deviceGroup.create")),1)]),_:1})]),_:1},8,["title"]),n(r,{columns:P,data:a(k),pagination:!1,"row-props":U},null,8,["data"]),n(W,{"page-info":a(c),"onUpdate:pageInfo":e[1]||(e[1]=l=>L(c)?c.value=l:null),onUpdateList:v},null,8,["page-info"]),n(q,{show:a(d),"onUpdate:show":e[4]||(e[4]=l=>L(d)?d.value=l:null),"on-update:show":M},{default:i(()=>[n(V,{style:{width:"600px"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true"},{default:i(()=>[n(B,{type:"info",class:"mb-5",bordered:!1},{default:i(()=>[f(g(a(t)("deviceGroup.tips")),1)]),_:1}),n(R,{ref_key:"formRef",ref:y,model:a(u),rules:x},{default:i(()=>[n(b,{label:a(t)("deviceGroup.groupNameLabel"),path:"device_group_name"},{default:i(()=>[n(h,{value:a(u).device_group_name,"onUpdate:value":e[2]||(e[2]=l=>a(u).device_group_name=l),placeholder:a(t)("deviceGroup.groupNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(b,{label:a(t)("deviceGroup.descriptionLabel"),path:"description"},{default:i(()=>[n(h,{value:a(u).description,"onUpdate:value":e[3]||(e[3]=l=>a(u).description=l),placeholder:a(t)("deviceGroup.descriptionPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),Y("div",re,[n(s,{type:"primary",loading:a(p),onClick:C},{default:i(()=>[f(g(a(t)("deviceGroup.create")),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])])}}});export{ce as default};
