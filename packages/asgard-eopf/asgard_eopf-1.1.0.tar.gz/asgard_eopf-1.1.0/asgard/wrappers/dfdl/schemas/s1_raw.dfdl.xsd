<xs:schema
  xmlns:sp="urn:spacePacket"
  xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns="http://www.esa.int/safe/sentinel-1.0/"
  targetNamespace="http://www.esa.int/safe/sentinel-1.0/">
  <xs:import namespace="urn:spacePacket" schemaLocation="SpacePacketFormat.dfdl.xsd"/>
  <xs:annotation>
    <xs:appinfo source="http://www.ogf.org/dfdl/">
      <dfdl:format ref="sp:SpacePacketFormat"/>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="isp" type="ispType"/>
  <xs:complexType name="ispType">
    <xs:sequence>
      <xs:element name="primaryHeader" type="sp:mainHeaderType"/>
      <xs:element name="secondaryHeader" type="secondaryHeaderType"/>
      <xs:element name="sourceData" type="sp:hexBytes" dfdl:length="{../primaryHeader/packetLength - 61}"/>
    </xs:sequence>
  </xs:complexType>
  
  <xs:complexType name="secondaryHeaderType">
    <xs:sequence>
      <xs:element name="time" type="cucTime"/>
      <xs:element name="syncMarker" type="sp:uint32"/>
      <xs:element name="dataTakeID" type="sp:uint32"/>
      <xs:element name="ECC" type="sp:uint8"/>
      <xs:element name="_padding1" type="sp:bit8" dfdl:length="1"/>
      <xs:element name="testMode" type="sp:bit8" dfdl:length="3"/>
      <xs:element name="RXChannelID" type="sp:bit8" dfdl:length="4"/>
      <xs:element name="instrumentConfigID" type="sp:uint32"/>
      <xs:element name="subcommutatedAncillary" type="subcommutatedAncillaryType"/>
      <xs:element name="spacePacketCount" type="sp:uint32"/>
      <xs:element name="PRICount" type="sp:uint32"/>
      <xs:element name="errorFlag" type="sp:bit8" dfdl:length="1"/>
      <xs:element name="_padding2" type="sp:bit8" dfdl:length="2"/>
      <xs:element name="BAQMode" type="sp:bit8" dfdl:length="5"/>
      <xs:element name="BAQBlockLength" type="sp:uint8"/>
      <xs:element name="_padding3" type="sp:bit8" dfdl:length="8"/>
      <xs:element name="rangeDecimation" type="sp:uint8"/>
      <xs:element name="rxGain" type="sp:uint8"/>
      <xs:element name="txPulseRampRate" type="sp:uint16"/>
      <xs:element name="txPulseStartFrequency" type="sp:uint16"/>
      <xs:element name="txPulseLength" type="sp:bit32" dfdl:length="24"/>
      <xs:element name="_padding4" type="sp:bit8" dfdl:length="3"/>
      <xs:element name="rank" type="sp:bit8" dfdl:length="5"/>
      <xs:element name="PRI" type="sp:bit32" dfdl:length="24"/>
      <xs:element name="SWST" type="sp:bit32" dfdl:length="24"/>
      <xs:element name="SWL" type="sp:bit32" dfdl:length="24"/>
      <xs:element name="SSBMessageSAS" type="sp:hexBytes" dfdl:length="3"/>
      <xs:element name="SSBMessageSES" type="sp:hexBytes" dfdl:length="3"/>
      <xs:element name="numberOfQuad" type="sp:uint16"/>
      <xs:element name="_padding5" type="sp:bit8" dfdl:length="8"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="cucTime">
    <xs:sequence>
      <xs:element name="coarse" type="sp:uint32">
          <xs:annotation>
            <xs:documentation>coarse, over-second, interger seconds (32 bits)
            </xs:documentation>
          </xs:annotation>
      </xs:element>
      <xs:element name="fine" type="sp:uint16">
          <xs:annotation>
              <xs:documentation> fine time, sub-seconds (16 bits)
              </xs:documentation>
          </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="subcommutatedAncillaryType">
    <xs:sequence>
      <xs:element name="wordIndex" type="sp:uint8"/>
      <xs:element name="word" type="sp:hexBytes" dfdl:length="2"/>
    </xs:sequence>
  </xs:complexType>
  <!-- === End of packet definition === -->
</xs:schema>
