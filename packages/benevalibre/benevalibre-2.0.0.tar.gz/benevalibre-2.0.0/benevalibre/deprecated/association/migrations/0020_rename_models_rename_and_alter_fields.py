# Generated by Django 5.2 on 2025-05-15 12:59

import benevalibre.associations.models
import django.db.models.deletion
import django_countries.fields
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('association', '0019_delete_old_association_thumbnails'),
        ('instance', '0009_rename_models_rename_and_alter_fields'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.RenameModel('Migration', 'AssociationMigration'),
        migrations.RenameModel('Category', 'AssociationBenevaloCategory'),
        migrations.RenameModel('Level', 'AssociationBenevaloLevel'),
        migrations.RenameModel('Project', 'AssociationProject'),
        migrations.RenameModel('Role', 'AssociationRole'),
        migrations.RenameModel('AnonymousEngagement', 'AssociationAnonymousMember'),
        migrations.RenameModel('Engagement', 'AssociationMembership'),
        migrations.AlterModelOptions(
            name='activityfield',
            options={'verbose_name': "champ d'activité", 'verbose_name_plural': "champs d'activité"},
        ),
        migrations.AlterModelOptions(
            name='activityfieldgroup',
            options={'verbose_name': "groupe de champs d'activité", 'verbose_name_plural': "groupes de champs d'activité"},
        ),
        migrations.AlterModelOptions(
            name='association',
            options={'verbose_name': 'association', 'verbose_name_plural': 'associations'},
        ),
        migrations.AlterModelOptions(
            name='associationanonymousmember',
            options={'verbose_name': 'membre anonyme', 'verbose_name_plural': 'membres anonymes'},
        ),
        migrations.AlterModelOptions(
            name='associationbenevalocategory',
            options={'verbose_name': 'catégorie de bénévolat', 'verbose_name_plural': 'catégories de bénévolat'},
        ),
        migrations.AlterModelOptions(
            name='associationbenevalolevel',
            options={'verbose_name': 'niveau de bénévolat', 'verbose_name_plural': 'niveaux de bénévolat'},
        ),
        migrations.AlterModelOptions(
            name='associationmembership',
            options={'verbose_name': "membre d'association", 'verbose_name_plural': "membres d'associations"},
        ),
        migrations.AlterModelOptions(
            name='associationmigration',
            options={'verbose_name': "migration d'association", 'verbose_name_plural': "migrations d'associations"},
        ),
        migrations.RemoveField(
            model_name='associationanonymousmember',
            name='last_updated_at',
        ),
        migrations.RemoveField(
            model_name='associationmigration',
            name='state',
        ),
        migrations.RenameField(
            model_name='associationbenevalocategory',
            old_name='instance_category',
            new_name='default_category',
        ),
        migrations.RenameField(
            model_name='association',
            old_name='conceal',
            new_name='is_hidden',
        ),
        migrations.RenameField(
            model_name='association',
            old_name='moderate_engagement',
            new_name='moderate_membership',
        ),
        migrations.RenameField(
            model_name='associationmigration',
            old_name='creator',
            new_name='author',
        ),
        migrations.RenameField(
            model_name='associationmigration',
            old_name='date',
            new_name='created_at',
        ),
        migrations.RenameField(
            model_name='associationmigration',
            old_name='token_used',
            new_name='is_done',
        ),
        migrations.RenameField(
            model_name='associationmigration',
            old_name='destination_uri',
            new_name='destination_url',
        ),
        migrations.RenameField(
            model_name='associationrole',
            old_name='new_comers',
            new_name='is_default',
        ),
        migrations.RenameField(
            model_name='associationrole',
            old_name='list_users',
            new_name='list_members',
        ),
        migrations.RenameField(
            model_name='associationrole',
            old_name='delegates',
            new_name='manage_members',
        ),
        migrations.RenameField(
            model_name='associationrole',
            old_name='manage_categories',
            new_name='manage_benevalo_categories',
        ),
        migrations.RenameField(
            model_name='associationrole',
            old_name='manage_levels',
            new_name='manage_benevalo_levels',
        ),
        migrations.RenameField(
            model_name='associationanonymousmember',
            old_name='expires_at',
            new_name='expiration_date',
        ),
        migrations.AddField(
            model_name='association',
            name='members',
            field=models.ManyToManyField(related_name='associations', related_query_name='association', through='association.AssociationMembership', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='associationanonymousmember',
            name='name',
            field=models.CharField(blank=True, max_length=255, verbose_name='nom'),
        ),
        migrations.AddField(
            model_name='associationanonymousmember',
            name='last_visit',
            field=models.DateTimeField(blank=True, null=True, verbose_name='dernière visite'),
        ),
        migrations.AddField(
            model_name='associationmigration',
            name='done_at',
            field=models.DateField(null=True),
        ),
        migrations.AlterField(
            model_name='activityfield',
            name='activity_field_group',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activity_fields', related_query_name='activity_field', to='association.activityfieldgroup', verbose_name="groupe de champs d'activité"),
        ),
        migrations.AlterField(
            model_name='association',
            name='activity_field',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='associations', related_query_name='association', to='association.activityfield', verbose_name="champ d'activité"),
        ),
        migrations.AlterField(
            model_name='association',
            name='country',
            field=django_countries.fields.CountryField(blank=True, default='FR', max_length=2, verbose_name='pays'),
        ),
        migrations.AlterField(
            model_name='association',
            name='description',
            field=models.TextField(blank=True, default='', verbose_name='description'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='association',
            name='has_employees',
            field=models.BooleanField(blank=True, null=True, verbose_name='a au moins un·e salarié·e'),
        ),
        migrations.AlterField(
            model_name='association',
            name='income',
            field=models.PositiveIntegerField(blank=True, null=True, verbose_name='revenus moyens annuels (en euros)'),
        ),
        migrations.AlterField(
            model_name='association',
            name='is_active',
            field=models.BooleanField(default=benevalibre.associations.models.is_registration_opened, editable=False, verbose_name='validée'),
        ),
        migrations.AlterField(
            model_name='association',
            name='is_hidden',
            field=models.BooleanField(default=False, help_text="L'association n'apparaitra pas dans la liste, il faudra connaître son URL pour la rejoindre.", verbose_name='cachée'),
        ),
        migrations.AlterField(
            model_name='association',
            name='moderate_membership',
            field=models.BooleanField(default=False, help_text="Une modération est nécessaire avant qu'un⋅e utilisateur⋅rice ne devienne membre de l'association.", verbose_name="modérer l'inscription des bénévoles"),
        ),
        migrations.AlterField(
            model_name='association',
            name='postal_code',
            field=models.CharField(blank=True, default='', max_length=10, verbose_name='code postal'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='association',
            name='website_url',
            field=models.URLField(blank=True, default='', verbose_name='adresse du site web'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='associationanonymousmember',
            name='association',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='anonymous_members', related_query_name='anonymous_member', to='association.association', verbose_name='association'),
        ),
        migrations.AlterField(
            model_name='associationanonymousmember',
            name='expiration_date',
            field=models.DateTimeField(blank=True, null=True, verbose_name="date d'expiration"),
        ),
        migrations.AlterField(
            model_name='associationanonymousmember',
            name='is_active',
            field=models.BooleanField(default=True, help_text="Détermine si l'accès de ce membre anonyme est actif, dans le cas où il n'a pas encore expiré.", verbose_name='actif'),
        ),
        migrations.AlterField(
            model_name='associationanonymousmember',
            name='uuid',
            field=models.UUIDField(default=uuid.uuid4),
        ),
        migrations.AlterField(
            model_name='associationbenevalocategory',
            name='association',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='benevalo_categories', related_query_name='benevalo_category', to='association.association', verbose_name='association'),
        ),
        migrations.AlterField(
            model_name='associationbenevalocategory',
            name='default_category',
            field=models.ForeignKey(help_text="Ces catégories sont celles proposées par défaut et permettent d'avoir une base commune pour toutes les associations. Si vous êtes amené⋅es à adapter certaines de ces catégories pour votre association, veuillez sélectionner celle dont elle se rattache.", on_delete=django.db.models.deletion.PROTECT, related_name='association_categories', related_query_name='association_category', to='instance.defaultbenevalocategory', verbose_name='catégorie rattachée'),
        ),
        migrations.AlterField(
            model_name='associationbenevalocategory',
            name='description',
            field=models.TextField(blank=True, default='', verbose_name='description'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='associationbenevalolevel',
            name='association',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='benevalo_levels', related_query_name='benevalo_level', to='association.association', verbose_name='association'),
        ),
        migrations.AlterField(
            model_name='associationbenevalolevel',
            name='description',
            field=models.TextField(blank=True, default='', verbose_name='description'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='associationmembership',
            name='association',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='memberships', related_query_name='membership', to='association.association', verbose_name='association'),
        ),
        migrations.AlterField(
            model_name='associationmembership',
            name='is_active',
            field=models.BooleanField(default=True, editable=False, verbose_name='validé'),
        ),
        migrations.AlterField(
            model_name='associationmembership',
            name='role',
            field=models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, related_name='memberships', related_query_name='membership', to='association.associationrole', verbose_name='rôle'),
        ),
        migrations.AlterField(
            model_name='associationmembership',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='memberships', related_query_name='membership', to=settings.AUTH_USER_MODEL, verbose_name='bénévole'),
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='association',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='migration', primary_key=True, serialize=False, to='association.association'),
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='author',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='created_at',
            field=models.DateField(auto_now_add=True),
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='destination_url',
            field=models.URLField(blank=True),
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='is_done',
            field=models.BooleanField(default=False, editable=False),
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='message',
            field=models.TextField(blank=True, default='', help_text="Ce message sera présenté sur la page de l'association pendant et après la migration.", verbose_name='message'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='associationmigration',
            name='token',
            field=models.UUIDField(default=uuid.uuid4, editable=False),
        ),
        migrations.AlterField(
            model_name='associationproject',
            name='association',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='projects', related_query_name='project', to='association.association', verbose_name='association'),
        ),
        migrations.AlterField(
            model_name='associationproject',
            name='description',
            field=models.TextField(blank=True, default='', verbose_name='description'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='association',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='roles', related_query_name='role', to='association.association', verbose_name='association'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='description',
            field=models.TextField(blank=True, default='', verbose_name='description'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='is_default',
            field=models.BooleanField(default=False, help_text='Ce rôle sera attribué automatiquement à chaque nouveau membre.', verbose_name='par défaut'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='list_members',
            field=models.BooleanField(default=False, verbose_name='lister les membres'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_association',
            field=models.BooleanField(default=False, help_text="Cette permission donne à un membre tous les droits de gestion de l'association, entraînant de fait toutes les autres.", verbose_name="gérer l'association"),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_benevalo_categories',
            field=models.BooleanField(default=False, verbose_name='gérer les catégories de bénévolat'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_benevalo_levels',
            field=models.BooleanField(default=False, verbose_name='gérer les niveaux de bénévolat'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_benevalos',
            field=models.BooleanField(default=False, verbose_name='gérer les actions de bénévolat'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_members',
            field=models.BooleanField(default=False, verbose_name='gérer les membres'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_projects',
            field=models.BooleanField(default=False, verbose_name='gérer les projets'),
        ),
        migrations.AlterField(
            model_name='associationrole',
            name='manage_roles',
            field=models.BooleanField(default=False, verbose_name='gérer les rôles'),
        ),
        migrations.AddConstraint(
            model_name='associationanonymousmember',
            constraint=models.UniqueConstraint(fields=('association', 'uuid'), name='unique_association_member_uuid'),
        ),
        migrations.AddConstraint(
            model_name='associationmembership',
            constraint=models.UniqueConstraint(fields=('association', 'user'), name='unique_association_membership'),
        ),
        migrations.AddConstraint(
            model_name='associationrole',
            constraint=models.UniqueConstraint(condition=models.Q(('is_default', True)), fields=('association',), name='unique_association_default', violation_error_message="Il ne peut y avoir qu'un rôle par défaut pour l'association."),
        ),
    ]
