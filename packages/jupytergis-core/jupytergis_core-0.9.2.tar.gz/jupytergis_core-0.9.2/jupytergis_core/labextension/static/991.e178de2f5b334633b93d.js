"use strict";(self.webpackChunk_jupytergis_jupytergis_core=self.webpackChunk_jupytergis_jupytergis_core||[]).push([[991],{29991:(e,t,r)=>{r.r(t),r.d(t,{JupyterGISDocumentWidgetFactory:()=>b,default:()=>M});var i=r(76903),o=r(22391),n=r(27323),a=r(21436),s=r(6391),p=r(75428),y=r(98397),m=r(46835),d=r(89565),u=r(12771),l=r(62043),c=r(15010),g=r(10830);class b extends m.ABCWidgetFactory{constructor(e){var t;const{backendCheck:r,externalCommandRegistry:i}=e;super(function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]])}return r}(e,["backendCheck","externalCommandRegistry"])),this.options=e,this._backendCheck=r,this._commands=e.commands,this._externalCommandRegistry=i,this._contentsManager=null===(t=e.manager)||void 0===t?void 0:t.contents}createNewWidget(e){if(this._backendCheck&&!this._backendCheck())throw new Error("Requested backend is not installed");const{model:t}=e;t.filePath=e.localPath,e.pathChanged.connect(()=>{t.filePath=e.localPath}),this._contentsManager&&(t.contentsManager=this._contentsManager);const r=new o.JupyterGISPanel({model:t,manager:this.options.manager,contentFactory:this.options.contentFactory,mimeTypeService:this.options.mimeTypeService,rendermime:this.options.rendermime,consoleTracker:this.options.consoleTracker,commandRegistry:this.options.commands,state:this.options.state,formSchemaRegistry:this.options.formSchemaRegistry,annotationModel:this.options.annotationModel}),i=new o.ToolbarWidget({commands:this._commands,model:t,externalCommands:this._externalCommandRegistry.getCommands()});return new o.JupyterGISDocumentWidget({context:e,content:r,toolbar:i})}}class h{constructor(e){this.collaborative=!0,this._disposed=!1,this._annotationModel=e.annotationModel,this._settingRegistry=e.settingRegistry}get name(){return"jupytergis-jgismodel"}get contentType(){return"jgis"}get fileFormat(){return"text"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){return new n.JupyterGISModel({sharedModel:e.sharedModel,languagePreference:e.languagePreference,annotationModel:this._annotationModel,settingRegistry:this._settingRegistry})}}const f="JupyterGIS .jgis Viewer",I="jgis",S="jupytergis-jgismodel",j="@jupytergis/jupytergis-core:jupytergis-settings",x={id:"jupyterGIS:jGISplugin",requires:[n.IJupyterGISDocTracker,a.IThemeManager,d.IFileBrowserFactory,n.IJGISExternalCommandRegistryToken,p.ConsolePanel.IContentFactory,s.IEditorServices,l.IRenderMimeRegistry,p.IConsoleTracker,n.IAnnotationToken,c.ISettingRegistry,n.IJGISFormSchemaRegistryToken,g.IStateDB],optional:[u.ILauncher,a.ICommandPalette,i.ICollaborativeDrive],autoStart:!0,activate:async(e,t,r,i,a,s,p,d,u,l,c,g,x,P,O,T)=>{y.PageConfig.getOption("jgis_expose_maps")&&(window.jupytergisMaps={});let G=null;try{G=await c.load(j),console.log(`Loaded settings for ${j}`,G)}catch(e){console.warn(`Failed to load settings for ${j}`,e)}const v=new b({name:f,modelName:S,fileTypes:[I],defaultFor:[I],tracker:t,commands:e.commands,externalCommandRegistry:a,manager:e.serviceManager,contentFactory:s,rendermime:d,mimeTypeService:p.mimeTypeService,formSchemaRegistry:g,consoleTracker:u,state:x,annotationModel:l});e.docRegistry.addWidgetFactory(v);const q=new m.MimeDocumentFactory({dataType:"json",rendermime:d,modelName:S,name:"JSON Editor",primaryFileType:e.docRegistry.getFileType("json"),fileTypes:[I]});e.docRegistry.addWidgetFactory(q);const J=new h({annotationModel:l,settingRegistry:c});e.docRegistry.addModelFactory(J),e.docRegistry.addFileType({name:I,displayName:"JGIS",mimeTypes:["text/json"],extensions:[".jgis",".JGIS"],fileFormat:"text",contentType:I,icon:o.logoMiniIcon});if(T&&T.sharedModelFactory.registerDocumentFactory(I,()=>new n.JupyterGISDoc),v.widgetCreated.connect((i,n)=>{n.title.icon=o.logoIcon,n.context.pathChanged.connect(()=>{t.save(n)}),r.themeChanged.connect((e,t)=>n.model.themeChanged.emit(t)),e.shell.activateById("jupytergis::leftControlPanel"),e.shell.activateById("jupytergis::rightControlPanel"),t.add(n).then(()=>{Object.values(o.CommandIDs).forEach(t=>{e.commands.hasCommand(t)&&e.commands.notifyCommandChanged(t)})}).catch(e=>{console.error("Cannot update JupyterGIS commands",e)})}),e.commands.addCommand(o.CommandIDs.createNew,{label:e=>{var t;return null!==(t=e.label)&&void 0!==t?t:"GIS Project"},caption:"Create a new JGIS Editor",icon:e=>o.logoIcon,execute:async t=>{var r;const o=t.cwd||(null===(r=i.tracker.currentWidget)||void 0===r?void 0:r.model.path);let a=await e.serviceManager.contents.newUntitled({path:o,type:"file",ext:".jGIS"});return a=await e.serviceManager.contents.save(a.path,Object.assign(Object.assign({},a),{format:"text",size:void 0,content:`{\n\t"schemaVersion": "${n.SCHEMA_VERSION}",\n\t"layers": {},\n\t"sources": {},\n\t"options": {"latitude": 0, "longitude": 0, "zoom": 0, "bearing": 0, "pitch": 0, "projection": "EPSG:3857"},\n\t"layerTree": [],\n\t"metadata": {}\n}`})),e.commands.execute("docmanager:open",{path:a.path,factory:f})}}),P&&P.add({command:o.CommandIDs.createNew,category:"Other",rank:1}),O){O.addItem({command:o.CommandIDs.createNew,args:{isPalette:!0},category:"JupyterGIS"}),O.addItem({command:o.CommandIDs.openLayerBrowser,category:"JupyterGIS"}),O.addItem({command:o.CommandIDs.newRasterEntry,category:"JupyterGIS"}),O.addItem({command:o.CommandIDs.newVectorTileEntry,category:"JupyterGIS"}),O.addItem({command:o.CommandIDs.newGeoJSONEntry,category:"JupyterGIS"}),O.addItem({command:o.CommandIDs.newHillshadeEntry,category:"JupyterGIS"}),O.addItem({command:o.CommandIDs.moveLayerToNewGroup,category:"JupyterGIS"});for(const e of n.ProcessingMerge)O.addItem({command:e.name,category:"JupyterGIS"})}e.contextMenu.addItem({command:o.CommandIDs.createNew,selector:".jp-DirListing",rank:55,args:{label:"New JupyterGIS Project"}})}};var P=r(22652),O=r(43517),T=r(4690);class G{constructor(){this._registry=new Set}registerCommand(e){this._registry.add(e)}getCommands(){return[...this._registry]}}class v{constructor(){this._registry=[]}getRegistryLayers(){return[...this._registry]}addRegistryLayer(e){this._registry.push(e)}removeRegistryLayer(e){this._registry=this._registry.filter(t=>t.name!==e)}clearRegistry(){this._registry=[]}}const q=JSON.parse('{"ExportGeoJSONSchema":{"type":"object","required":["exportFileName"],"additionalProperties":false,"properties":{"exportFileName":{"type":"string","title":"GeoJSON File Name","default":"exported_layer","description":"The name of the exported GeoJSON file."}}},"ExportGeoTIFFSchema":{"type":"object","required":["exportFileName","resolutionX","resolutionY"],"additionalProperties":false,"properties":{"exportFileName":{"type":"string","title":"GeoTiFF File Name","default":"exported_layer","description":"The name of the exported GeoTIFF file."},"resolutionX":{"type":"number","title":"Resolution (Width)","default":1200,"minimum":1,"maximum":10000,"description":"The width resolution for the raster export."},"resolutionY":{"type":"number","title":"Resolution (Height)","default":1200,"minimum":1,"maximum":10000,"description":"The height resolution for the raster export."}}},"BoundingBoxes":{"type":"object","required":["inputLayer"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for bounding boxes."}}},"Buffer":{"type":"object","required":["inputLayer","bufferDistance"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for buffering."},"bufferDistance":{"type":"number","default":10,"description":"The distance used for buffering the geometry (in projection units)."},"embedOutputLayer":{"type":"boolean","title":"Embed output buffered layer in file","default":true}}},"Centroids":{"type":"object","required":["inputLayer"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for centroids."}}},"ConcaveHull":{"type":"object","required":["inputLayer"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for Concave Hull."},"pctconvex":{"type":"number","description":"Controls the concaveness of the computed hull, vary from 0 to 1, 0 corresponds to the maximum concavity.","multipleOf":0.1,"minimum":0,"maximum":1,"default":0.5},"allowHoles":{"type":"boolean","title":"Allow holes in the hull","default":false}}},"ConvexHull":{"type":"object","required":["inputLayer"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for Convex Hull."}}},"Dissolve":{"type":"object","required":["inputLayer","dissolveField"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for the dissolve operation."},"dissolveField":{"type":"string","description":"The field based on which geometries will be dissolved."},"embedOutputLayer":{"type":"boolean","title":"Embed output dissolved layer in file","default":true}}},"HeatmapLayer":{"type":"object","required":["source","blur","radius"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1},"radius":{"type":"number","description":"Radius size in pixels","default":8},"blur":{"type":"number","description":"Blur size in pixels","default":15},"color":{"type":"array","items":{"type":"string"},"default":["#00f","#0ff","#0f0","#ff0","#f00"]},"symbologyState":{"type":"object","description":"The state of the symbology panel options","required":["renderType"],"properties":{"renderType":{"type":"string"},"colorRamp":{"type":"string","default":"viridis"}}}}},"HillshadeLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"shadowColor":{"type":"string","description":"The color of the the shadows","default":"#473B24"}}},"ImageLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"RasterLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"StacLayer":{"type":"object","required":["data"],"additionalProperties":false,"properties":{"data":{"type":"object","description":"The data of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"VectorLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"color":{"type":"object","description":"The color of the the object"},"opacity":{"type":"number","description":"The opacity of the the object","default":1,"multipleOf":0.1,"minimum":0,"maximum":1},"symbologyState":{"type":"object","description":"The state of the symbology panel options","required":["renderType"],"properties":{"renderType":{"type":"string","enum":["Single Symbol","Graduated","Categorized"]},"value":{"type":"string"},"method":{"type":"string","enum":["color","radius"]},"colorRamp":{"type":"string","default":"viridis"},"nClasses":{"type":"string","default":"9"},"mode":{"type":"string","default":"equal interval","enum":["quantile","equal interval","jenks","pretty","logarithmic"]}},"additionalProperties":false}}},"VectorTileLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"color":{"type":"object","description":"The color of the the object"},"opacity":{"type":"number","description":"The opacity of the the object","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"WebGlLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1},"color":{"oneOf":[{"type":"string"},{"type":"number"},{"type":"array","items":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"array","items":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"array","items":{"anyOf":[{"type":"number"},{"type":"string"}]}}]}}]}}],"description":"The color of the the object"},"symbologyState":{"type":"object","description":"The state of the symbology panel options","required":["renderType"],"properties":{"renderType":{"type":"string"},"band":{"type":"number"},"redBand":{"type":"number"},"greenBand":{"type":"number"},"blueBand":{"type":"number"},"alphaBand":{"type":"number"},"interpolation":{"type":"string","enum":["discrete","linear","exact"]},"colorRamp":{"type":"string","default":"viridis"},"nClasses":{"type":"string","default":"9"},"mode":{"type":"string","default":"equal interval","enum":["continuous","equal interval","quantile"]}},"additionalProperties":false}}},"GeoParquetSource":{"type":"object","required":["path"],"additionalProperties":false,"properties":{"path":{"type":"string","description":"The path to the GeoParquet source"},"attribution":{"type":"string","readOnly":true,"description":"The attribution for the GeoParquet source.","default":""},"projection":{"type":"string","description":"The projection information for the GeoParquet data (optional).","default":"EPSG:4326"}}},"GeoTiffSource":{"type":"object","required":["urls"],"additionalProperties":false,"properties":{"urls":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"min":{"type":"number"},"max":{"type":"number"}}},"minItems":1,"description":"URLs"},"normalize":{"type":"boolean","default":true},"wrapX":{"type":"boolean","default":false},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"ImageSource":{"type":"object","required":["path","coordinates"],"additionalProperties":false,"properties":{"path":{"type":"string","readOnly":true,"description":"Path that points to an image"},"coordinates":{"type":"array","readOnly":true,"items":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"minItems":4,"maxItems":4,"default":[],"description":"Corners of image specified in longitude, latitude pairs"},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"RasterDemSource":{"type":"object","required":["url"],"additionalProperties":false,"properties":{"url":{"type":"string","description":"The url to the tile provider"},"attribution":{"type":"string","description":"The attribution for the raster-dem source"},"urlParameters":{"type":"object","additionalProperties":{"type":"string"}},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"RasterSource":{"type":"object","required":["url","maxZoom","minZoom"],"additionalProperties":false,"properties":{"url":{"type":"string","description":"The url to the tile provider"},"minZoom":{"type":"number","minimum":0,"maximum":24,"readOnly":true,"description":"The minimum zoom level for the raster source","default":0},"maxZoom":{"type":"number","minimum":0,"maximum":24,"readOnly":true,"description":"The maximum zoom level for the raster source","default":24},"attribution":{"type":"string","readOnly":true,"description":"The attribution for the raster source","default":""},"htmlAttribution":{"type":"string","readOnly":true,"description":"The html attribution for the raster source","default":""},"provider":{"type":"string","readOnly":true,"description":"The map provider","default":""},"bounds":{"type":"array","readOnly":true,"items":{"type":"array","items":{"type":"number"}},"default":[],"description":"The bounds of the source"},"urlParameters":{"type":"object","additionalProperties":{"type":"string"},"default":{}},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"ShapefileSource":{"type":"object","required":["path"],"additionalProperties":false,"properties":{"path":{"type":"string","description":"The path to the shapefile (.shp, .zip, or folder URL)."},"attribution":{"type":"string","readOnly":true,"description":"The attribution for the shapefile source.","default":""},"projection":{"type":"string","description":"The projection information for the shapefile (optional).","default":"WGS84"},"encoding":{"type":"string","description":"The encoding used for the shapefile\'s DBF (optional).","default":"UTF-8"},"additionalFiles":{"type":"object","description":"Additional files associated with the shapefile (e.g., .dbf, .prj, .cpg).","additionalProperties":{"type":"string"},"default":{}}}},"VectorTileSource":{"type":"object","required":["url","maxZoom","minZoom"],"additionalProperties":false,"properties":{"url":{"type":"string","description":"The url to the tile provider"},"minZoom":{"type":"number","minimum":0,"maximum":24,"description":"The minimum zoom level for the vector source"},"maxZoom":{"type":"number","minimum":0,"maximum":24,"description":"The maximum zoom level for the vector source"},"attribution":{"type":"string","description":"The attribution for the vector source"},"provider":{"type":"string","readOnly":true,"description":"The map provider"},"urlParameters":{"type":"object","additionalProperties":{"type":"string"}}}},"VideoSource":{"type":"object","required":["urls","coordinates"],"additionalProperties":false,"properties":{"urls":{"type":"array","items":{"type":"string"},"minItems":1,"default":[],"description":"URLs to video content in order of preferred format"},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"minItems":4,"maxItems":4,"default":[],"description":"Corners of video specified in longitude, latitude pairs"}}},"GeoJSONSource":{"type":"object","required":[],"additionalProperties":false,"properties":{"path":{"type":"string","description":"The local path to a GeoJSON file"},"data":{"type":"object","description":"The GeoJSON data","$schema":"http://json-schema.org/draft-07/schema#","$id":"https://geojson.org/schema/GeoJSON.json","title":"GeoJSON","oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON GeometryCollection","type":"object","required":["type","geometries"],"properties":{"type":{"type":"string","enum":["GeometryCollection"]},"geometries":{"type":"array","items":{"oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Feature","type":"object","required":["type","properties","geometry"],"properties":{"type":{"type":"string","enum":["Feature"]},"id":{"oneOf":[{"type":"number"},{"type":"string"}]},"properties":{"oneOf":[{"type":"null"},{"type":"object"}]},"geometry":{"oneOf":[{"type":"null"},{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON GeometryCollection","type":"object","required":["type","geometries"],"properties":{"type":{"type":"string","enum":["GeometryCollection"]},"geometries":{"type":"array","items":{"oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON FeatureCollection","type":"object","required":["type","features"],"properties":{"type":{"type":"string","enum":["FeatureCollection"]},"features":{"type":"array","items":{"title":"GeoJSON Feature","type":"object","required":["type","properties","geometry"],"properties":{"type":{"type":"string","enum":["Feature"]},"id":{"oneOf":[{"type":"number"},{"type":"string"}]},"properties":{"oneOf":[{"type":"null"},{"type":"object"}]},"geometry":{"oneOf":[{"type":"null"},{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON GeometryCollection","type":"object","required":["type","geometries"],"properties":{"type":{"type":"string","enum":["GeometryCollection"]},"geometries":{"type":"array","items":{"oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]},"valid":{"type":"boolean","description":"Whether the data are valid or not","readOnly":true}}}}');class J{constructor(e){this._registry=new Map(Object.entries(q)),this._docManager=e}registerSchema(e,t){this._registry.has(e)?console.error("Worker is already registered!"):this._registry.set(e,t)}has(e){return this._registry.has(e)}getSchemas(){return this._registry}getDocManager(){return this._docManager}}const M=[{id:"jupytergis:core:tracker",autoStart:!0,requires:[T.ITranslator],optional:[O.IMainMenu],provides:n.IJupyterGISDocTracker,activate:(e,t,r)=>{const i=new a.WidgetTracker({namespace:"jupytergis"});return console.log("jupytergis:core:tracker is activated!"),i}},x,{id:"jupytergis:core:form-schema-registry",autoStart:!0,requires:[P.IDocumentManager],provides:n.IJGISFormSchemaRegistryToken,activate:(e,t)=>new J(t)},{id:"jupytergis:core:external-command-registry",autoStart:!0,requires:[],provides:n.IJGISExternalCommandRegistryToken,activate:e=>new G},{id:"jupytergis:core:layer-browser-registry",autoStart:!0,requires:[],provides:n.IJGISLayerBrowserRegistryToken,activate:e=>(console.log("jupytergis:core:layer-browser-registry is activated"),new v)},{id:"jupytergis:core:annotation",autoStart:!0,requires:[n.IJupyterGISDocTracker],provides:n.IAnnotationToken,activate:(e,t)=>{var r;const i=new o.AnnotationModel({model:null===(r=t.currentWidget)||void 0===r?void 0:r.model});return t.currentChanged.connect((e,t)=>{i.model=(null==t?void 0:t.model)||void 0}),i}}]}}]);