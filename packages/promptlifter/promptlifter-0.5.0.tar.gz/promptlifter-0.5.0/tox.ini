[tox]
envlist = py313, lint, type-check, format-check
isolated_build = True
minversion = 4.0

[testenv]
deps =
    pytest>=7.0.0
    pytest-asyncio>=0.21.0
    pytest-cov>=4.0.0
    httpx>=0.24.0
    python-dotenv>=1.0.0
    openai>=1.0.0
    anthropic>=0.18.0
    google-generativeai>=0.3.0
    pinecone>=7.3.0
    tavily-python>=0.3.0
commands =
    pytest tests/ --cov=promptlifter --cov-report=term-missing --cov-report=html:htmlcov

[testenv:lint]
deps =
    flake8>=5.0.0
    black>=22.0.0
    isort>=5.12.0
commands =
    flake8 promptlifter tests --count --select=E9,F63,F7,F82 --show-source --statistics
    flake8 promptlifter tests --count --exit-zero --max-complexity=10 --max-line-length=88 --statistics
    black --check promptlifter tests
    isort --check-only --diff promptlifter tests

[testenv:type-check]
deps =
    mypy>=1.0.0
commands =
    mypy promptlifter --ignore-missing-imports

[testenv:format-check]
deps =
    black>=22.0.0
    isort>=5.12.0
commands =
    black --check promptlifter tests
    isort --check-only --diff promptlifter tests

[testenv:format]
deps =
    black>=22.0.0
    isort>=5.12.0
commands =
    black promptlifter tests
    isort promptlifter tests 