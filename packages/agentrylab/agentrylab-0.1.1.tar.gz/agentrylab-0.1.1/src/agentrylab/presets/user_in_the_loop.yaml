#########################
# User-in-the-Loop preset
# Demonstrates a scheduled user node placed before an agent.
# Use CLI to append messages: `agentrylab say <preset.yaml> <thread> "Hi agents!"`
#########################

version: "1.0.0"
id: user_in_the_loop
name: User in the Loop
description: A scheduled user node feeds messages into the conversation before the agent.

objective: ${TOPIC:Say hello and provide a short hint for the agent.}

runtime:
  max_rounds: 4
  trace: { enabled: true }
  scheduler:
    impl: agentrylab.runtime.scheduler.round_robin.RoundRobinScheduler
    params:
      order: ["user:alice", "assistant"]
  message_contract:
    require_metadata: false
  context_defaults:
    pin_objective: true

providers:
  - id: ollama_llama3
    impl: agentrylab.runtime.providers.ollama.OllamaProvider
    model: "llama3:latest"
    base_url: "http://localhost:11434"
    timeout: 8

tools: []
advisors: []

agents:
  - id: "user:alice"
    role: user
    provider: ollama_llama3
    description: A scheduled user node emitting queued messages

  - id: assistant
    role: agent
    provider: ollama_llama3
    description: Friendly agent that reacts to user input
    system_prompt: |
      You are a friendly assistant. React concisely (2â€“4 lines) to the user's last message.
      Do not ask the user to type/answer; write a self-contained reply.

