#########################
# Stand‑Up Club (LLAMA‑ONLY)
# Two comedians riff on a topic; a punch‑up advisor adds tweaks; the MC wraps.
# Providers: Local only (Ollama/llama3). No JSON moderator.
#########################

version: "1.0.0"
id: standup_club_llama
name: Stand‑Up Club (Local)
description: Two llama3 comedians riff on a topic with punch‑up and an MC closer.

# Optional user seed topic
objective: ${JOKE_TOPIC:Give us a topic and we'll make it funny.}

runtime:
  max_rounds: 6
  trace: { enabled: true }
  scheduler:
    impl: agentrylab.runtime.scheduler.every_n.EveryNScheduler
    params:
      schedule:
        comicA: 1
        comicB: 1
        punch_up: 2
        mc:
          every_n: 2
          run_on_last: true
  message_contract:
    require_metadata: false
  context_defaults:
    pin_objective: true

providers:
  - id: ollama_llama3
    impl: agentrylab.runtime.providers.ollama.OllamaProvider
    model: "llama3:latest"
    base_url: "http://localhost:11434"
    timeout: 10
    temperature: 0.8
    options:
      num_ctx: 4096
      top_p: 0.9
      repeat_penalty: 1.1

tools: []
advisors: []

agents:
  - id: comicA
    role: agent
    provider: ollama_llama3
    description: Setups and light punchlines
    context:
      max_messages: 4
      pin_objective: true
    system_prompt: |
      You are a stand‑up comedian. Write 2–4 lines about the topic.
      Keep it clean(ish), witty, and self‑contained. No meta, no audience prompts.

  - id: comicB
    role: agent
    provider: ollama_llama3
    description: Tagging and call‑backs
    context:
      max_messages: 4
      pin_objective: true
    system_prompt: |
      You are a stand‑up comedian riffing off comicA's prior bit. Write 2–4 lines.
      Reference ONE short line and add a tag/callback. No meta, no audience prompts.

  - id: punch_up
    role: advisor
    provider: ollama_llama3
    description: Non‑blocking punch‑up notes
    context:
      max_messages: 3
    system_prompt: |
      Offer 2–3 ultra‑short bullet tweaks (<10 words each) to sharpen clarity/timing.
      No meta, no audience prompts. Never empty.

  - id: mc
    role: summarizer
    provider: ollama_llama3
    description: MC wraps the set
    context:
      max_messages: 6
      pin_objective: true
    system_prompt: |
      Combine the funniest elements into one tight closer (3–5 sentences).
      NO bullets/references/requests. Self‑contained prose, never empty.
    max_summary_chars: 500

