################################################################################
# Build Configuration
################################################################################
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"


################################################################################
# Project Configuration
################################################################################
[project]
name = "VTKio"
dynamic = ["version"]
description = 'A simple package for converting data between VTK files (XML and HDF5) and NumPy arrays.'
readme = "README.md"
requires-python = ">=3.10"
license = "BSD-3-Clause"
keywords = ["VTK", "NumPy", "HDF5", "XML", "Converter", "Visualisation"]
authors = [
  { name = "JP Morrissey", email = "morrissey.jp@gmail.com" },
]
maintainers  = [
  { name = "JP Morrissey", email = "morrissey.jp@gmail.com" },
]
classifiers = [
  "Development Status :: 4 - Beta",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: Implementation :: CPython",
  "Operating System :: OS Independent",
  "Intended Audience :: Science/Research",
  "Intended Audience :: Manufacturing",
  "Topic :: Scientific/Engineering",
  "Topic :: Scientific/Engineering :: Visualization",
]

dependencies = [
    "dotwiz>=0.4.0",
    "h5py>=3.11",
    "numpy>=2.1",
    "pybase64>=1.3",
    "xmltodict>=0.13",
]


[dependency-groups]
dev = [
    "grayskull>=2.9.1",
    "ipython>=8",
    "pygmsh>=7.1.17",
    "pytest>=8.3.5",
    "pytest-cov>=6.1.1",
    "ruff>=0.12.3",
]


[project.optional-dependencies]
docs = [
    "markdown-exec[ansi]>=1.10.3",
    "mkdocs>=1.6.1",
    "mkdocs-autorefs>=1.4.2",
    "mkdocs-git-committers-plugin-2>=2.5.0",
    "mkdocs-git-revision-date-localized-plugin>=1.4.7",
    "mkdocs-material[imaging]>=9.6.14",
    "mkdocs-material-extensions>=1.3.1",
    "mkdocstrings>=0.29.1",
    "mkdocstrings-python>=0.18",
    "pipdeptree"
]
tests = [
    "pytest>=8.3.5",
    "pytest-cov>=6.1.1",
]


[project.urls]
Homepage = "https://jpmorr.gitlab.io/vtkio"
Documentation = "https://jpmorr.gitlab.io/vtkio"
Issues = "https://gitlab.com/jpmorr/vtkio/-/issues"
Source = "https://gitlab.com/jpmorr/vtkio/-/tree/main"
Changelog = "https://gitlab.com/jpmorr/vtkio/-/tree/main"
donate = "https://ko-fi.com/jpmorr"

################################################################################
# Tool Configuration
################################################################################
[tool.hatch.version]
path = "src/vtkio/version.py"

[tool.hatch.build.targets.sdist]
include = [
  "/src",
  "/tests",
  "/examples",
  "*.cff"
]
exclude = [
  "/examples/example_data",
  "/TestData"
]

[tool.hatch.build.targets.wheel]
packages = ["src/vtkio"]

[tool.hatch.envs.types]
extra-dependencies = [
  "mypy>=1.0.0",
]
[tool.hatch.envs.types.scripts]
check = "mypy --install-types --non-interactive {args:src/vtkio tests}"

[tool.coverage.run]
source_pkgs = ["vtkio", "tests"]
branch = true
parallel = true
omit = [
  "src/vtkio/__about__.py",
]

[tool.coverage.paths]
vtkio = ["src/vtkio", "*/vtkio/src/vtkio"]
tests = ["tests", "*/vtkio/tests"]

[tool.coverage.report]
exclude_lines = [
  "no cov",
  "if __name__ == .__main__.:",
  "if TYPE_CHECKING:",
]

[tool.ruff]
# Set the maximum line length to 79.
line-length = 120

[tool.ruff.lint]
select = [
    # pycodestyle
    "E",
    # Pyflakes
    "F",
    # pyupgrade
    "UP",
    # flake8-bugbear
    "B",
    # flake8-simplify
    "SIM",
    # isort
    "I",
]
extend-select = [
  "D",   # pydocstyle
]
ignore = ["D103"]

[tool.ruff.lint.pydocstyle]
convention = "numpy"


