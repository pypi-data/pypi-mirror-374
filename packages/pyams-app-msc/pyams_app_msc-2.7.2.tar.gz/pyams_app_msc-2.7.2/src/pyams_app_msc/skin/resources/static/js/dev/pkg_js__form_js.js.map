{"version":3,"file":"pkg_js__form_js.js","mappings":"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","sources":["webpack://pyams_app_msc/./pkg/js/_form.js"],"sourcesContent":["\n\nimport 'jquery-form';\nimport 'jquery-validation';\nimport 'jsrender';\nimport \"jquery.scrollto\";\n\nimport MyAMS from \"./_utils\";\n\n\nconst ERRORS_TEMPLATE_STRING = `\n\t<div class=\"alert alert-{{:status}}\" role=\"alert\">\n\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\" \n\t\t\t\taria-label=\"{{*: MyAMS.i18n.BTN_CLOSE }}\">\n\t\t\t<i class=\"fa fa-times\" aria-hidden=\"true\"></i>\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class=\"alert-heading\">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{if message}}\n\t\t<p>{{:message}}</p>\n\t\t{{/if}}\n\t\t{{if messages}}\n\t\t<ul>\n\t\t{{for messages}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t\t{{if widgets}}\n\t\t<ul>\n\t\t{{for widgets}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t</div>`;\n\nconst ERROR_TEMPLATE = $.templates({\n\tmarkup: ERRORS_TEMPLATE_STRING,\n\tallowCode: true\n});\n\n\n/**\n * Clear form messages\n */\nconst clearMessages = (form) => {\n\t$('.alert-success, SPAN.state-success', form).not('.persistent').remove();\n\t$('.state-success', form).removeClassPrefix('state-');\n\t$('.invalid-feedback', form).remove();\n\t$('.is-invalid', form).removeClass('is-invalid');\n}\n\n\n/**\n * Clear form alerts\n */\nconst clearAlerts = (form) => {\n\t$('.alert-danger, SPAN.state-error', form).not('.persistent').remove();\n\t$('.state-error', form).removeClassPrefix('state-');\n\t$('.invalid-feedback', form).remove();\n\t$('.is-invalid', form).removeClass('is-invalid');\n}\n\n\nconst PyAMS_form = {\n\n\tinit: (forms) => {\n\n\t\t$('label', forms).removeClass('col-md-3');\n\t\t$('.col-md-9', forms).removeClass('col-md-9');\n\t\t$('input, select, textarea', forms).addClass('form-control');\n\t\t$('button', forms).addClass('border');\n\t\t$('button[type=\"submit\"]', forms).addClass('btn-primary');\n\n\t\tconst lang = $('html').attr('lang');\n\n\n\t\t//\n\t\t// Initialize input masks\n\t\t//\n\n\t\tconst inputs = $('input[data-input-mask]');\n\t\tif (inputs.length > 0) {\n\t\t\timport(\"inputmask\").then(() => {\n\t\t\t\tinputs.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tinput = $(elt),\n\t\t\t\t\t\tdata = input.data(),\n\t\t\t\t\t\tdefaultOptions = {\n\t\t\t\t\t\t\tautoUnmask: true,\n\t\t\t\t\t\t\tclearIncomplete: true,\n\t\t\t\t\t\t\tremoveMaskOnSubmit: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsettings = $.extend({}, defaultOptions, data.amsInputMaskOptions || data.amsOptions || data.options),\n\t\t\t\t\t\tveto = {veto: false};\n\t\t\t\t\tinput.trigger('before-init.ams.inputmask', [input, settings, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst\n\t\t\t\t\t\tmask = new Inputmask(data.inputMask, settings),\n\t\t\t\t\t\tplugin = mask.mask(elt);\n\t\t\t\t\tinput.trigger('after-init.ams.inputmask', [input, plugin]);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\t//\n\t\t// Initialize select2 widgets\n\t\t//\n\n\t\tconst selects = $('.select2');\n\t\tif (selects.length > 0) {\n\t\t\timport(\"select2\").then(() => {\n\t\t\t\tselects.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tselect = $(elt),\n\t\t\t\t\t\tdata = select.data(),\n\t\t\t\t\t\tdefaultOptions = {\n\t\t\t\t\t\t\ttheme: data.amsSelect2Options || data.amsTheme || 'bootstrap',\n\t\t\t\t\t\t\tlanguage: data.amsSelect2Language || data.amsLanguage || lang\n\t\t\t\t\t\t},\n\t\t\t\t\t\tajaxUrl = data.amsSelect2AjaxUrl || data.amsAjaxUrl || data['ajax-Url'];\n\t\t\t\t\tif (ajaxUrl) {\n\t\t\t\t\t\t// check AJAX data helper function\n\t\t\t\t\t\tlet ajaxParamsHelper;\n\t\t\t\t\t\tconst ajaxParams = MyAMS.getFunctionByName(\n\t\t\t\t\t\t\tdata.amsSelect2AjaxParams || data.amsAjaxParams || data['ajax-Params']) ||\n\t\t\t\t\t\t\tdata.amsSelect2AjaxParams || data.amsAjaxParams || data['ajax-Params'];\n\t\t\t\t\t\tif (typeof ajaxParams === 'function') {\n\t\t\t\t\t\t\tajaxParamsHelper = ajaxParams;\n\t\t\t\t\t\t} else if (ajaxParams) {\n\t\t\t\t\t\t\tajaxParamsHelper = (params) => {\n\t\t\t\t\t\t\t\treturn _select2Helpers.select2AjaxParamsHelper(params, ajaxParams);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefaultOptions.ajax = {\n\t\t\t\t\t\t\turl: MyAMS.getFunctionByName(\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxUrl || data.amsAjaxUrl) ||\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxUrl || data.amsAjaxUrl,\n\t\t\t\t\t\t\tdata: ajaxParamsHelper || MyAMS.getFunctionByName(\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxData || data.amsAjaxData) ||\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxData || data.amsAjaxData,\n\t\t\t\t\t\t\tprocessResults: MyAMS.getFunctionByName(\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxProcessResults || data.amsAjaxProcessResults) ||\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxProcessResults || data.amsAjaxProcessResults,\n\t\t\t\t\t\t\ttransport: MyAMS.getFunctionByName(\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxTransport || data.amsAjaxTransport) ||\n\t\t\t\t\t\t\t\tdata.amsSelect2AjaxTransport || data.amsAjaxTransport\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdefaultOptions.minimumInputLength = data.amsSelect2MinimumInputLength ||\n\t\t\t\t\t\t\tdata.amsMinimumInputLength || data.minimumInputLength || 1;\n\t\t\t\t\t}\n\t\t\t\t\tconst\n\t\t\t\t\t\tsettings = $.extend({}, defaultOptions, data.amsSelect2Options || data.amsOptions || data.options),\n\t\t\t\t\t\tveto = {veto: false};\n\t\t\t\t\tselect.trigger('before-init.ams.select2', [select, settings, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst plugin = select.select2(settings);\n\t\t\t\t\tselect.trigger('after-init.ams.select2', [select, plugin]);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\t//\n\t\t// Initialize datetime widgets\n\t\t//\n\n\t\tconst dates = $('.datetime');\n\t\tif (dates.length > 0) {\n\t\t\timport(\"tempusdominus-bootstrap-4\").then(() => {\n\t\t\t\tdates.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tinput = $(elt),\n\t\t\t\t\t\tdata = input.data(),\n\t\t\t\t\t\tdefaultOptions = {\n\t\t\t\t\t\t\tlocale: data.amsDatetimeLanguage || data.amsLanguage || lang,\n\t\t\t\t\t\t\ticons: {\n\t\t\t\t\t\t\t\ttime: 'far fa-clock',\n\t\t\t\t\t\t\t\tdate: 'far fa-calendar',\n\t\t\t\t\t\t\t\tup: 'fas fa-arrow-up',\n\t\t\t\t\t\t\t\tdown: 'fas fa-arrow-down',\n\t\t\t\t\t\t\t\tprevious: 'fas fa-chevron-left',\n\t\t\t\t\t\t\t\tnext: 'fas fa-chevron-right',\n\t\t\t\t\t\t\t\ttoday: 'far fa-calendar-check-o',\n\t\t\t\t\t\t\t\tclear: 'far fa-trash',\n\t\t\t\t\t\t\t\tclose: 'far fa-times'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdate: input.val() || elt.defaultValue,\n\t\t\t\t\t\t\tformat: data.amsDatetimeFormat || data.amsFormat\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsettings = $.extend({}, defaultOptions, data.datetimeOptions || data.options),\n\t\t\t\t\t\tveto = {veto: false};\n\t\t\t\t\tinput.trigger('before-init.ams.datetime', [input, settings, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tinput.datetimepicker(settings);\n\t\t\t\t\tconst plugin = input.data('datetimepicker');\n\t\t\t\t\tif (data.amsDatetimeIsoTarget || data.amsIsoTarget) {\n\t\t\t\t\t\tinput.on('change.datetimepicker', (evt) => {\n\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\tsource = $(evt.currentTarget),\n\t\t\t\t\t\t\t\tdata = source.data(),\n\t\t\t\t\t\t\t\ttarget = $(data.amsDatetimeIsoTarget || data.amsIsoTarget);\n\t\t\t\t\t\t\ttarget.val(evt.date ? evt.date.toISOString(true) : null);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tinput.trigger('after-init.ams.datetime', [input, plugin]);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\t//\n\t\t// Initialize forms\n\t\t//\n\n\t\tconst defaultOptions = {\n\t\t\tsubmitHandler: PyAMS_form.submitHandler,\n\t\t\tmessages: {}\n\t\t};\n\n\t\tconst getFormOptions = (form, options) => {\n\t\t\t$('[data-ams-validate-messages]', form).each((idx, elt) => {\n\t\t\t\toptions.messages[$(elt).attr('name')] = $(elt).data('ams-validate-messages');\n\t\t\t\toptions.errorClass = 'error d-block';\n\t\t\t\toptions.errorPlacement = (error, element) => {\n\t\t\t\t\telement.parents('div:first').append(error);\n\t\t\t\t};\n\t\t\t});\n\t\t\treturn options;\n\t\t};\n\n\t\tconst validateForms = () => {\n\t\t\t$(forms).each((idx, form) => {\n\t\t\t\tconst options = $.extend({}, defaultOptions);\n\t\t\t\t$(form).validate(getFormOptions(form, options));\n\t\t\t});\n\t\t}\n\n\t\tif (lang === 'fr') {\n\t\t\timport(\"jquery-validation/dist/localization/messages_fr\").then(() => {\n\t\t\t\tvalidateForms();\n\t\t\t});\n\t\t} else {\n\t\t\tvalidateForms();\n\t\t}\n\t},\n\n\n\t/**\n\t * Show message extracted from JSON response\n\t */\n\tshowMessage: (errors, form) => {\n\n\t\tconst createMessages = () => {\n\t\t\tconst\n\t\t\t\theader = errors.header ||\n\t\t\t\t\tMyAMS.i18n.SUCCESS,\n\t\t\t\tprops = {\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t\theader: header,\n\t\t\t\t\tmessage: errors.message || null\n\t\t\t\t};\n\t\t\t$(ERROR_TEMPLATE.render(props)).prependTo(form);\n\t\t}\n\n\t\tclearMessages(form);\n\t\tclearAlerts(form);\n\t\tcreateMessages();\n\t\t$.scrollTo('.alert', {\n\t\t\toffset: -15\n\t\t});\n\n\t},\n\n\n\t/**\n\t * Show errors extracted from JSON response\n\t */\n\tshowErrors: (errors, form) => {\n\n\t\tconst setInvalid = (form, input, message) => {\n\t\t\tif (typeof input === 'string') {\n\t\t\t\tinput = $(`[name=\"${input}\"]`, form);\n\t\t\t}\n\t\t\tif (input.exists()) {\n\t\t\t\tconst widget = input.closest('.form-widget');\n\t\t\t\t$('.invalid-feedback', widget).remove();\n\t\t\t\t$('<span>')\n\t\t\t\t\t.text(message)\n\t\t\t\t\t.addClass('is-invalid invalid-feedback')\n\t\t\t\t\t.appendTo(widget);\n\t\t\t\tinput.removeClass('valid')\n\t\t\t\t\t.addClass('is-invalid');\n\t\t\t}\n\t\t}\n\n\t\tconst createAlerts = () => {\n\t\t\tconst messages = [];\n\t\t\tfor (const message of errors.messages || []) {\n\t\t\t\tif (typeof message === 'string') {\n\t\t\t\t\tmessages.push({\n\t\t\t\t\t\theader: null,\n\t\t\t\t\t\tmessage: message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmessages.push(message);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const widget of errors.widgets || []) {\n\t\t\t\tmessages.push({\n\t\t\t\t\theader: widget.label,\n\t\t\t\t\tmessage: widget.message\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst\n\t\t\t\theader = errors.header ||\n\t\t\t\t\t(messages.length > 1 ? MyAMS.i18n.ERRORS_OCCURRED : MyAMS.i18n.ERROR_OCCURRED),\n\t\t\t\tprops = {\n\t\t\t\t\tstatus: 'danger',\n\t\t\t\t\theader: header,\n\t\t\t\t\tmessage: errors.error || null,\n\t\t\t\t\tmessages: messages\n\t\t\t\t};\n\t\t\t$(ERROR_TEMPLATE.render(props)).prependTo(form);\n\t\t\t// update status of invalid widgets\n\t\t\tfor (const widget of errors.widgets || []) {\n\t\t\t\tlet input;\n\t\t\t\tif (widget.id) {\n\t\t\t\t\tinput = $(`#${widget.id}`, form);\n\t\t\t\t} else {\n\t\t\t\t\tinput = $(`[name=\"${widget.name}\"]`, form);\n\t\t\t\t}\n\t\t\t\tif (input.exists()) {\n\t\t\t\t\tsetInvalid(form, input, widget.message);\n\t\t\t\t}\n\t\t\t\t// open parent fieldsets switchers\n\t\t\t\tconst fieldsets = input.parents('fieldset.switched');\n\t\t\t\tfieldsets.each((idx, elt) => {\n\t\t\t\t\t$('legend.switcher', elt).click();\n\t\t\t\t});\n\t\t\t\t// open parent tab panels\n\t\t\t\tconst panels = input.parents('.tab-pane');\n\t\t\t\tpanels.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tpanel = $(elt),\n\t\t\t\t\t\ttabs = panel.parents('.tab-content')\n\t\t\t\t\t\t\t.siblings('.nav-tabs');\n\t\t\t\t\t$(`li:nth-child(${panel.index() + 1})`, tabs)\n\t\t\t\t\t\t.addClass('is-invalid');\n\t\t\t\t\t$('li.is-invalid:first a', tabs)\n\t\t\t\t\t\t.click();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tclearMessages(form);\n\t\tclearAlerts(form);\n\t\tcreateAlerts();\n\t\t$.scrollTo('.alert', {\n\t\t\toffset: -15\n\t\t});\n\n\t},\n\n\tsubmitHandler: (form) => {\n\n\t\tconst doSubmit = (form) => {\n\t\t\t// record submit button as hidden input\n\t\t\tconst\n\t\t\t\tbutton = $('button[type=\"submit\"]', form),\n\t\t\t\tname = button.attr('name'),\n\t\t\t\tinput = $('input[name=\"' + name + '\"]', form);\n\t\t\tif (input.length === 0) {\n\t\t\t\t$('<input />')\n\t\t\t\t\t.attr('type', 'hidden')\n\t\t\t\t\t.attr('name', name)\n\t\t\t\t\t.attr('value', button.attr('value'))\n\t\t\t\t\t.appendTo(form);\n\t\t\t} else {\n\t\t\t\tinput.val(button.attr('value'));\n\t\t\t}\n\t\t\t// record CSRF token as hidden input\n\t\t\tconst csrf_param = $('meta[name=csrf-param]').attr('content'),\n\t\t\t\t  csrf_token = $('meta[name=csrf-token]').attr('content'),\n\t\t\t\t  csrf_input = $(`input[name=\"${csrf_param}\"]`, form);\n\t\t\tif (csrf_input.length === 0) {\n\t\t\t\t$('<input />')\n\t\t\t\t\t.attr('type', 'hidden')\n\t\t\t\t\t.attr('name', csrf_param)\n\t\t\t\t\t.attr('value', csrf_token)\n\t\t\t\t\t.appendTo(form);\n\t\t\t} else {\n\t\t\t\tcsrf_input.val(csrf_token);\n\t\t\t}\n\t\t\t// submit form!\n\t\t\t$(form).ajaxSubmit({\n\t\t\t\t// success handler\n\t\t\t\tsuccess: (result, status, response, form) => {\n\t\t\t\t\tconst contentType = response.getResponseHeader('content-type');\n\t\t\t\t\tif (contentType === 'application/json') {\n\t\t\t\t\t\tconst status = result.status;\n\t\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\t\tcase 'success':\n\t\t\t\t\t\t\t\tPyAMS_form.showMessage(result, form);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\t\tPyAMS_form.showErrors(result, form);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'reload':\n\t\t\t\t\t\t\tcase 'redirect':\n\t\t\t\t\t\t\t\tconst location = result.location;\n\t\t\t\t\t\t\t\tif (window.location.href === location) {\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\twindow.location.replace(location);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tif (window.console) {\n\t\t\t\t\t\t\t\t\twindow.console.warn(`Unhandled JSON status: ${status}`);\n\t\t\t\t\t\t\t\t\twindow.console.warn(` > ${result}`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (contentType === 'text/html') {\n\t\t\t\t\t\tconst target = $('#main');\n\t\t\t\t\t\ttarget.html(result);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// error handler\n\t\t\t\terror: (response, status, message, form) => {\n\t\t\t\t\tclearAlerts(form);\n\t\t\t\t\tconst\n\t\t\t\t\t\theader = MyAMS.i18n.ERROR_OCCURRED,\n\t\t\t\t\t\tprops = {\n\t\t\t\t\t\t\tstatus: 'danger',\n\t\t\t\t\t\t\theader: header,\n\t\t\t\t\t\t\tmessage: message\n\t\t\t\t\t\t};\n\t\t\t\t\t$(ERROR_TEMPLATE.render(props)).prependTo(form);\n\t\t\t\t\t$.scrollTo('.alert', {\n\t\t\t\t\t\toffset: -15\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif (window.grecaptcha) {  // check if recaptcha was loaded\n\t\t\tconst captcha_key = $(form).data('ams-form-captcha-key');\n\t\t\tgrecaptcha.execute(captcha_key, {\n\t\t\t\taction: 'form_submit'\n\t\t\t}).then((token) => {\n\t\t\t\t$('.state-error', form).removeClass('state-error');\n\t\t\t\t$('input[name=\"g-recaptcha-response\"]', form).val(token);\n\t\t\t\tdoSubmit(form);\n\t\t\t});\n\t\t} else {\n\t\t\tdoSubmit(form);\n\t\t}\n\t}\n\n};\n\n\nexport default PyAMS_form;\n"],"names":["MyAMS","ERRORS_TEMPLATE_STRING","ERROR_TEMPLATE","$","templates","markup","allowCode","clearMessages","form","not","remove","removeClassPrefix","removeClass","clearAlerts","PyAMS_form","init","forms","addClass","lang","attr","inputs","length","then","each","idx","elt","input","data","defaultOptions","autoUnmask","clearIncomplete","removeMaskOnSubmit","settings","extend","amsInputMaskOptions","amsOptions","options","veto","trigger","mask","Inputmask","inputMask","plugin","selects","select","theme","amsSelect2Options","amsTheme","language","amsSelect2Language","amsLanguage","ajaxUrl","amsSelect2AjaxUrl","amsAjaxUrl","ajaxParamsHelper","ajaxParams","getFunctionByName","amsSelect2AjaxParams","amsAjaxParams","params","_select2Helpers","select2AjaxParamsHelper","ajax","url","amsSelect2AjaxData","amsAjaxData","processResults","amsSelect2AjaxProcessResults","amsAjaxProcessResults","transport","amsSelect2AjaxTransport","amsAjaxTransport","minimumInputLength","amsSelect2MinimumInputLength","amsMinimumInputLength","select2","dates","locale","amsDatetimeLanguage","icons","time","date","up","down","previous","next","today","clear","close","val","defaultValue","format","amsDatetimeFormat","amsFormat","datetimeOptions","datetimepicker","amsDatetimeIsoTarget","amsIsoTarget","on","evt","source","currentTarget","target","toISOString","submitHandler","messages","getFormOptions","errorClass","errorPlacement","error","element","parents","append","validateForms","validate","showMessage","errors","createMessages","header","i18n","SUCCESS","props","status","message","render","prependTo","scrollTo","offset","showErrors","setInvalid","concat","exists","widget","closest","text","appendTo","createAlerts","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","push","err","e","f","_iterator2","widgets","_step2","label","ERRORS_OCCURRED","ERROR_OCCURRED","_iterator3","_step3","id","name","fieldsets","click","panels","panel","tabs","siblings","index","doSubmit","button","csrf_param","csrf_token","csrf_input","ajaxSubmit","success","result","response","contentType","getResponseHeader","location","window","href","reload","replace","console","warn","html","grecaptcha","captcha_key","execute","action","token"],"sourceRoot":""}