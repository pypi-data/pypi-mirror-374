{"version":3,"file":"pkg_js__calendar_js.js","mappings":"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","sources":["webpack://pyams_app_msc/./pkg/js/_calendar.js"],"sourcesContent":["\n\nimport { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport bootstrapPlugin from '@fullcalendar/bootstrap';\n\n\nconst isSmallDevice = () => {\n    return (window.innerWidth < 768);\n};\n\n\nconst createCalendar = (calendar, config, options, callback) => {\n    return new Promise((resolve, reject) => {\n        const data = calendar.data();\n        let settings = {\n            plugins: [\n                interactionPlugin,\n                dayGridPlugin,\n                listPlugin,\n                bootstrapPlugin\n            ],\n            initialView: isSmallDevice() ? 'listMonth': 'dayGridMonth',\n            themeSystem: 'bootstrap',\n            locale: $('html').attr('lang'),\n            headerToolbar: {\n                start: 'title',\n                center: 'today',\n                right: 'prev,next'\n            },\n            bootstrapFontAwesome: {\n                prev: 'fa-chevron-left',\n                next: 'fa-chevron-right'\n            },\n            firstDay: 1,\n            weekNumberCalculation: 'ISO',\n            eventDidMount: PyAMS_calendar.mountedEvent,\n            eventClick: PyAMS_calendar.clickEvent\n        }\n        settings = $.extend({}, settings, config, options);\n        calendar.trigger('calendar.init', [calendar, settings]);\n        const instance = new Calendar(calendar.get(0), settings);\n        calendar.trigger('calendar.finishing', [calendar, instance, settings]);\n        if (callback) {\n            callback(instance, config);\n        }\n        calendar.trigger('calendar.finished', [calendar, instance, settings]);\n        instance.render();\n        resolve(instance);\n    });\n};\n\n\nconst PyAMS_calendar = {\n\n    init: (calendars, options, callback) => {\n        const $calendars = $.map(calendars, (elt) => {\n            return new Promise((resolve, reject) => {\n                const\n                    calendar = $(elt),\n                    data = calendar.data(),\n                    config = data.calendarConfig;\n                if (config) {\n                    resolve(createCalendar(calendar, config, options, callback));\n                } else {\n                    $.get(data.calendarUrl || 'get-calendar-configuration.json', (config) => {\n                        resolve(createCalendar(calendar, config, options, callback));\n                    });\n                }\n            });\n        });\n        $.when.apply($, $calendars).then();\n    },\n\n    mountedEvent: (info) => {\n        const\n            lang = $('html').attr('lang'),\n            elt = $(info.el),\n            event = info.event,\n            startDate = new Intl.DateTimeFormat(lang, {\n                hour: '2-digit',\n                minute: '2-digit'\n            }).format(event.start);\n        elt.tooltip({\n            title: event.display === 'background' ? event.title : `${startDate} - ${event.title}`\n        });\n    },\n\n    clickEvent: (info) => {\n        const\n            event = info.event,\n            href = event.extendedProps?.href;\n        if (href) {\n            window.location.href = href;\n        }\n    }\n};\n\n\nexport default PyAMS_calendar;\n"],"names":["Calendar","dayGridPlugin","listPlugin","interactionPlugin","bootstrapPlugin","isSmallDevice","window","innerWidth","createCalendar","calendar","config","options","callback","Promise","resolve","reject","data","settings","plugins","initialView","themeSystem","locale","$","attr","headerToolbar","start","center","right","bootstrapFontAwesome","prev","next","firstDay","weekNumberCalculation","eventDidMount","PyAMS_calendar","mountedEvent","eventClick","clickEvent","extend","trigger","instance","get","render","init","calendars","$calendars","map","elt","calendarConfig","calendarUrl","when","apply","then","info","lang","el","event","startDate","Intl","DateTimeFormat","hour","minute","format","tooltip","title","display","concat","_event$extendedProps","href","extendedProps","location"],"sourceRoot":""}