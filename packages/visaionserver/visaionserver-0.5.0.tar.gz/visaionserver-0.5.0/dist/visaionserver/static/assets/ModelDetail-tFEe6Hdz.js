import{d as Ve,r as d,W as be,D as me,z as Me,c as I,o as g,b as m,P as Y,Q as K,A as ye,t as O,n as rt,s as Ue,y as qe,a as Pe,m as R,g as i,w as l,j as X,e as t,a5 as we,X as Be,q as E,a6 as Je,a7 as He,f as it,E as re,a8 as _e,a9 as he,M as Ye,v as dt,h as ut,O as ct,B as Ge,a4 as pt,C as mt,aa as _t}from"./index-DeXzsHYB.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as xe}from"./tools-CaaA-KU6.js";import{c as We,e as ft,a as Ie,f as gt,h as vt,i as ht,k as yt,r as xt}from"./all-DeDzFpLI.js";import{a as le,b as pe,E as H,J as bt}from"./const-DgT7xBJS.js";import{i as wt}from"./index-u3wYLQ4o.js";import Ct from"./TrainingSample-0YmYM9oz.js";import{g as Et}from"./dataset-C69Q8yLu.js";import"./model-CscD02Wt.js";const Lt=Ve({name:"ConsoleLog",setup(){const L=d([]),f=d(null),y=(M,x="")=>{console.log("log-add"),L.value.push({level:x,message:M,timestamp:""}),me(()=>{f.value&&(f.value.scrollTop=f.value.scrollHeight)})},S=M=>{L.value=M,me(()=>{f.value&&(console.log("logContainer.value.scrollHeight",f.value.scrollHeight),f.value.scrollTop=f.value.scrollHeight)})},u=()=>{f.value&&(console.log("logContainer.value.scrollHeight",f.value.scrollHeight),f.value.scrollTop=f.value.scrollHeight)};return be(()=>{me(()=>{u()})}),Me(()=>L.value.length,()=>{me(()=>u())}),{setLogs:S,logs:L,logContainer:f,addLog:y,scroll:u}}}),St={class:"console-container"},Nt={ref:"logContainer",class:"log-window"},Dt={key:0},jt={class:"log-timestamp"},kt={class:"log-message"},Tt={key:1},It={class:"log-message"};function Ot(L,f,y,S,u,M){return g(),I("div",St,[m("div",Nt,[(g(!0),I(Y,null,K(L.logs,(x,P)=>(g(),I("div",{key:P,class:"log-item"},[typeof x=="object"?(g(),I("div",Dt,[m("span",jt,O(x.timestamp),1),m("span",{class:rt(`log-level log-level-${x.level}`)},O(x.level.toUpperCase()),3),m("span",kt,O(x.message),1)])):ye("",!0),typeof x=="string"?(g(),I("div",Tt,[m("span",It,O(x),1)])):ye("",!0)]))),128))],512)])}const Oe=Ce(Lt,[["render",Ot],["__scopeId","data-v-2b736ddd"]]),Vt={key:0,style:{float:"right",position:"relative","z-index":"2",width:"200px"}},Mt=Ve({__name:"Chart",props:["title","xData","yData","type"],setup(L){var Q;const f=Ue(),y=L,S=d([]),u=(Q=f.currentProject)==null?void 0:Q.type,M=qe(()=>y.xData.length==0?"":y.title),x=Pe({animation:!1,title:{text:M},tooltip:{trigger:"axis"},grid:{left:"2%",right:"30px",bottom:"3%",containLabel:!0},toolbox:{feature:{}},xAxis:{type:"category",boundaryGap:!1,data:y.xData,axisLabel:{showMaxLabel:!0},splitLine:{show:!1}},legend:{},yAxis:{type:"value",splitLine:{show:!1}},series:[]}),P=d([]),U=d([]),$=v=>{let T;U.value.length>v.length?T=U.value.filter(function(b){return v.indexOf(b)==-1}):T=v.filter(function(b){return U.value.indexOf(b)==-1}),C.dispatchAction({type:"legendToggleSelect",name:T}),U.value=v},q=()=>{if(y.yData.length==0)return;let v=[];u==pe.SEG||u==pe.ABNORMAL?v=["mIoU","aAcc"]:u==pe.DET||u==pe.INS?v=["coco/bbox_mAP_50"]:u==pe.CLS&&(v=["accuracy/top1"]),S.value.forEach(T=>{v.includes(T.label)||C.dispatchAction({type:"legendToggleSelect",name:T.label})}),U.value=P.value=v},w=d(!0);Me(y,()=>{y.yData.length!=0&&(ee(),w.value?(w.value=!1,y.type!=le.LEARNING&&q()):x.animation=!0)});const B=d();let C;const ee=()=>{x.series=[],y.yData.forEach((v,T)=>{let b={type:"line",smooth:!0,name:v.name,data:v.data};if(y.type==le.LEARNING)b.yAxisIndex=T;else{x.grid.top="60px",x.legend.left="100px",x.legend.data=[];let Z={label:v.name};S.value.find(k=>k.label==v.name)||S.value.push(Z)}x.series.push(b)}),x.xAxis.data=y.xData,C.setOption(x)};return d(null),be(()=>{if(console.log("chartprops",y),y.type==le.LEARNING){let v={color:"#000",fontWeight:"bold",fontSize:"14"};x.yAxis=[{type:"value",name:"lr",position:"left",splitLine:{show:!1},nameTextStyle:v},{type:"value",name:"loss",position:"right",splitLine:{show:!1},nameTextStyle:v}]}else x.yAxis={type:"value",splitLine:{show:!1}};try{C=wt(B.value),window.onresize=()=>{C.resize()},ee(),y.type!=le.LEARNING&&q(),y.yData.length!=0&&(w.value=!1)}catch(v){console.log("======="+v+"=======")}}),(v,T)=>{const b=i("el-option"),Z=i("el-select"),G=i("el-card");return g(),R(G,null,{default:l(()=>[y.type!=X(le).LEARNING?(g(),I("div",Vt,[t(Z,{modelValue:P.value,"onUpdate:modelValue":T[0]||(T[0]=k=>P.value=k),"collapse-tags":"",multiple:"",placeholder:"选择",size:"small",onChange:$},{default:l(()=>[(g(!0),I(Y,null,K(S.value,k=>(g(),R(b,{key:k.label,value:k.label},null,8,["value"]))),128))]),_:1},8,["modelValue"])])):ye("",!0),m("div",{ref_key:"chartDom",ref:B,class:"chart"},null,512)]),_:1})}}}),ze=Ce(Mt,[["__scopeId","data-v-f4edba40"]]),Ee={exportOnnxCreate:"/export/onnx_create",exportOnnxList:"/export/onnx_list",updateExportOnnxStatus:"/export/update_onnx_status",exportOnnxDelete:"/export/onnx_delete"},Ut=L=>we.post(Ee.exportOnnxCreate,L),Pt=L=>we.get(Ee.exportOnnxList,{params:L}),At=L=>we.post(Ee.updateExportOnnxStatus,L),Rt=L=>we.delete(Ee.exportOnnxDelete,{params:L}),$t={class:"dialog-footer",style:{"margin-right":"4px"}},Gt={class:"d-flex align-items-center justify-left w-100",style:{padding:"0 20px"}},zt={style:{padding:"16px 20px"}},Ft={class:"text-gray-700"},qt={class:"flex gap-4"},Fe=3e3,Bt={__name:"ExportOnnx",props:{job_id:{type:[String,Number],required:!0}},setup(L,{expose:f}){const y=Ue(),S=d([]),u={PENDING:1,PROCESSING:2,SUCCESS:3,FAILED:4,TIMEOUT:5,CANCELLED:6},M=r=>({[u.PENDING]:"primary",[u.PROCESSING]:"warning",[u.SUCCESS]:"primary",[u.FAILED]:"danger",[u.TIMEOUT]:"danger",[u.CANCELLED]:"primary"})[r]||"info",x=r=>({[u.PENDING]:"待处理",[u.PROCESSING]:"处理中",[u.SUCCESS]:"成功",[u.FAILED]:"失败",[u.TIMEOUT]:"超时",[u.CANCELLED]:"已取消"})[r]||"未知",P=L,U=d([]),$=d(!1),q=d(null);d([{label:"model_v1.pth",value:"model_v1.pth"},{label:"model_v2.pth",value:"model_v2.pth"}]);const w=Pe({channels:1,batchSize:1,version:"11",pthFile:"",height:256,width:256}),B={batchSize:[{required:!0,message:"请输入批次大小",trigger:"blur"}],channels:[{required:!0,message:"请输入通道数",trigger:"blur"}],version:[{required:!0,message:"请选择版本",trigger:"change"}],pthFile:[{required:!0,message:"请选择pth文件",trigger:"change"}]},C=r=>{q.value.resetFields(),r()},ee=async()=>{if(q.value){if(w.width%32!=0||w.height%32!=0){re.warning("宽高必须是32的倍数");return}try{await q.value.validate();const r={model_id:P.job_id,opset_version:w.version,param:{batch:w.batchSize,height:w.height,width:w.width,pth_path:w.pthFile}},s=await Ut(r);console.log(s),s.status===200?(re.success("开始导出ONNX模型"),$.value=!1,G()):re.error("导出失败")}catch(r){console.error("表单验证失败:",r)}}};function Q(r,s){const h=document.createElement("a");h.href=r,h.download=s||"downloaded-file",document.body.appendChild(h),h.click(),document.body.removeChild(h)}const v=r=>{var h;console.log("下载:",r),(h=y.currentProject)==null||h.id;let s=xe(_e("projects"+r.download_url));Q(s,"model"+r.id+"_.visaion")},T=r=>{Ye.confirm("确认要删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{data:s}=await Rt({export_id:r.id});s.code===200?(re.success("删除成功"),G()):re.error("删除失败")}).catch(()=>{})},b=new Map,Z=async r=>{if(b.has(r))return;const s=async()=>{try{const{data:h}=await At({export_id:r});if(h.code===200){const z=U.value.findIndex(J=>J.id===r);if(z!==-1){if(U.value[z].status=h.data.status,h.data.status==u.SUCCESS&&G(),h.data.status!==u.PROCESSING){clearTimeout(b.get(r)),b.delete(r);return}b.set(r,setTimeout(()=>s(),Fe))}}}catch(h){console.error(`更新任务 ${r} 状态失败:`,h),clearTimeout(b.get(r)),b.delete(r)}};b.set(r,setTimeout(()=>s(),Fe))},G=async()=>{const{data:r}=await Pt({model_id:P.job_id});r.code===200&&(U.value=r.data.items,r.data.items.filter(h=>h.status===u.PROCESSING).forEach(h=>{Z(h.id)}))},k=d(!1),N=d();let ae;const ie=r=>{var J;r!=null&&r.id&&(ae=r);let s=ae.id,h=(J=y.currentProject)==null?void 0:J.id,z=_e("projects/"+h+"/export/"+s+"/visaion.log");console.log("logurl",z),he.get(xe(`${z}`)).then(oe=>{var A;let ne=oe.data.split(`
`);(A=N.value)==null||A.setLogs(ne)}),k.value=!0},de=r=>{$.value=!0};return f({exportFunc:de}),Be(()=>{for(const r of b.values())clearTimeout(r);b.clear()}),be(()=>{G(),We({model_id:P.job_id}).then(r=>{S.value=r.data.data})}),(r,s)=>{const h=i("el-input-number"),z=i("el-form-item"),J=i("el-option"),oe=i("el-select"),ne=i("el-form"),A=i("el-button"),ue=i("el-dialog"),Le=i("el-icon"),Se=i("el-link"),fe=i("el-row"),se=i("el-tooltip"),W=i("el-table-column"),ge=i("el-tag"),ce=i("el-table"),Ne=i("el-collapse-item");return g(),I(Y,null,[t(fe,null,{default:l(()=>[t(ue,{modelValue:$.value,"onUpdate:modelValue":s[4]||(s[4]=_=>$.value=_),title:"导出模型",width:"500px","before-close":C},{footer:l(()=>[m("div",$t,[t(A,{onClick:s[3]||(s[3]=_=>$.value=!1)},{default:l(()=>s[6]||(s[6]=[E("取消")])),_:1}),t(A,{type:"primary",onClick:ee},{default:l(()=>s[7]||(s[7]=[E(" 确认 ")])),_:1})])]),default:l(()=>[t(ne,{model:w,"label-width":"80px",rules:B,ref_key:"formRef",ref:q},{default:l(()=>[t(z,{label:"批次大小",prop:"batchSize"},{default:l(()=>[t(h,{modelValue:w.batchSize,"onUpdate:modelValue":s[0]||(s[0]=_=>w.batchSize=_),min:0,max:64},null,8,["modelValue"])]),_:1}),t(z,{label:"版本",prop:"version"},{default:l(()=>[t(oe,{modelValue:w.version,"onUpdate:modelValue":s[1]||(s[1]=_=>w.version=_),placeholder:"请选择版本"},{default:l(()=>[t(J,{label:"9",value:"9"}),t(J,{label:"11",value:"11"})]),_:1},8,["modelValue"])]),_:1}),t(z,{label:"pth文件",prop:"pthFile"},{default:l(()=>[t(oe,{modelValue:w.pthFile,"onUpdate:modelValue":s[2]||(s[2]=_=>w.pthFile=_),placeholder:"请选择pth文件"},{default:l(()=>[(g(!0),I(Y,null,K(S.value,_=>(g(),R(J,{label:_,value:_},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(ue,{modelValue:k.value,"onUpdate:modelValue":s[5]||(s[5]=_=>k.value=_),title:"日志信息"},{header:l(()=>[s[8]||(s[8]=E(" 日志信息 ")),t(Se,{onClick:ie},{default:l(()=>[t(Le,{style:{"font-size":"18px","margin-bottom":"2px"}},{default:l(()=>[t(X(Je))]),_:1})]),_:1})]),default:l(()=>[t(Oe,{ref_key:"evalConsoleLog",ref:N},null,512)]),_:1},8,["modelValue"])]),_:1}),t(Ne,{name:"2",class:"exportItem"},{title:l(()=>[m("div",Gt,[s[9]||(s[9]=m("span",{class:"text-base font-medium",style:{"font-size":"16px"}},"模型导出",-1)),t(se,{content:"添加模型",placement:"top"},{default:l(()=>[t(A,{onClick:it(de,["stop"]),type:"primary",style:{color:"white","background-color":"#555fff",width:"20px",height:"20px","font-size":"10px","margin-left":"6px"},icon:X(He),circle:""},null,8,["icon"])]),_:1})])]),default:l(()=>[m("div",zt,[t(ce,{data:U.value,style:{width:"100%"},class:"mt-4"},{default:l(()=>[t(W,{prop:"id",label:"编号",width:"100"}),t(W,{label:"验证集","min-width":"200"},{default:l(_=>[m("div",Ft,[m("div",null,"尺寸：["+O(_.row.param.batch)+", "+O(_.row.param.channels)+", "+O(_.row.param.height)+", "+O(_.row.param.width)+"]",1),m("div",null,"版本："+O(_.row.param.onnx_opset),1)])]),_:1}),t(W,{prop:"status",label:"状态"},{default:l(_=>[t(ge,{type:M(_.row.status)},{default:l(()=>[E(O(x(_.row.status)),1)]),_:2},1032,["type"])]),_:1}),t(W,{prop:"username",label:"创建人"}),t(W,{prop:"create_time",label:"创建时间"}),t(W,{label:"操作",fixed:"right"},{default:l(_=>[m("div",qt,[t(A,{type:"primary",link:"",onClick:ve=>ie(_.row)},{default:l(()=>s[10]||(s[10]=[E(" 日志 ")])),_:2},1032,["onClick"]),_.row.status===3?(g(),R(A,{key:0,type:"primary",link:"",onClick:ve=>v(_.row),class:"!text-[#409EFF]"},{default:l(()=>s[11]||(s[11]=[E(" 下载 ")])),_:2},1032,["onClick"])):ye("",!0),t(A,{type:"danger",link:"",onClick:ve=>T(_.row)},{default:l(()=>s[12]||(s[12]=[E(" 删除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])]),_:1})],64)}}},Jt=Ce(Bt,[["__scopeId","data-v-94fccf17"]]),Ht={class:"min-h-screen bg-gray-100 p-8"},Yt={class:"mx-auto max-w-7xl"},Wt={style:{position:"relative"}},Xt={class:"flex items-center justify-between"},Qt={class:"flex items-center gap-2"},Zt={class:"flex items-center"},Kt={class:"flex gap-4"},el={class:"dialog-footer",style:{"margin-right":"4px"}},tl=Ve({__name:"ModelDetail",setup(L){const f=ct(),y=ut(),S=Ue();dt();const u=d([1]),M=d(!1),x=d(),P=d("default"),U=d([]),$=d(!1),q=d(),w=qe(()=>{const a={large:"32px",default:"28px",small:"24px"};return{marginTop:a[P.value]||a.default}}),B=d(!1),C=Pe({pth:"",datasets:[],VISAION_NEED_GPUS:1});let ee,Q=new Worker(new URL("/assets/parseLog-B_CRYzIY.js",import.meta.url),{type:"module"});const v=d(new Date),T=d(new Date),b=d(),Z=d(["detail","1","2"]),G=d("first");Me(G,a=>{a==="second"&&me(()=>{var e;(e=b.value)==null||e.scroll()})});const k=d([]);d([{id:"001",modelInfo:`分辨率: 640x640
批大小: 32
训练轮次: 300
验证精度: 91.2%`,creator:"David Chen",createTime:"2025-10-10 12:30:00"},{id:"002",modelInfo:`分辨率: 1024x1024
批大小: 16
训练轮次: 200
验证精度: 89.5%`,creator:"Sarah Johnson",createTime:"2025-10-09 15:45:00"},{id:"003",modelInfo:`分辨率: 512x512
批大小: 64
训练轮次: 400
验证精度: 93.4%`,creator:"Michael Zhang",createTime:"2025-10-08 09:20:00"}]);const N=d({logContent:[],nowStep:0,logMetrics:{xList:[],xOtherList:[],yListData:[],yOtherData:[]}}),ae=d(!1),ie=d({});let de=null;const r=a=>{let e=a.datasets.map(n=>n.id);y.push({path:"/sample/analysis",query:{evalId:a.id,modelId:f.query.jid,datasetIds:JSON.stringify(e)}})},s=a=>{var p;ae.value=!0;let e=(p=S.currentProject)==null?void 0:p.id,n=a.id,c=_e("projects/"+e+"/eval/"+n+"/metrics.json");gt({job_id:n,project_id:e,job_type:"eval"}).then(j=>{he.get(c).then(D=>{ie.value=D.data})})},h=a=>{Ye.confirm("确定删除么?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{vt(a.id).then(e=>{se(Re.value)})})},z=a=>{var p;let e=(p=S.currentProject)==null?void 0:p.id,n=f.query.jid,c=_e("projects/"+e+"/train/"+n+"/visaion.log");he.get(xe(`${c}`)).then(j=>{var V;let D=j.data.split(`
`);N.value.logRow=D.length,N.value.logContent=D,(V=b.value)==null||V.setLogs(D),A(D),a!=H.TERMINATED&&a!=H.COMPLETED&&oe()})},J=()=>{var e;let a={project_id:(e=S.currentProject)==null?void 0:e.id,job_id:f.query.jid,start_row:N.value.logRow,job_type:"train"};ht(a).then(n=>{var c,p,j;try{"data"in n&&n.data!=null&&n.data.data&&((p=(c=n.data)==null?void 0:c.data)==null||p.forEach(D=>{var V;(V=b.value)==null||V.addLog(D),N.value.logRow++}),A((j=n.data)==null?void 0:j.data))}catch(D){console.log("fetchlog-err",D)}})},oe=()=>{ee=setInterval(function(){J()},2e3)},ne=(a,e,n)=>{let c=a.find(p=>p.name==e);c?c.data=c.data.concat(n):a.push({name:e,data:n})},A=a=>{Q.postMessage([a,N.value.nowStep]),Q.onmessage=e=>{var n,c,p;N.value.logMetrics.xList=(n=N.value.logMetrics.xList)==null?void 0:n.concat(e.data.xList),N.value.logMetrics.xOtherList=(c=N.value.logMetrics.xOtherList)==null?void 0:c.concat(e.data.xOtherList);for(let j in e.data.yList)ne(N.value.logMetrics.yListData,j,e.data.yList[j]);for(let j in e.data.yOtherList)ne(N.value.logMetrics.yOtherData,j,e.data.yOtherList[j]);N.value.nowStep=e.data.step,e.data.xList&&((p=e.data.xList)==null?void 0:p.length)>0&&(M.value=!1),e.data.eta}},ue=d([]),Le=a=>{var e;a.stopPropagation(),B.value=!0,We({model_id:f.query.jid}).then(n=>{U.value=n.data.data}),Et({project_id:(e=S.currentProject)==null?void 0:e.id,page:1,size:1e3}).then(n=>{ue.value=n.data.data.datasets}),yt().then(n=>{u.value=[];let c=n.data.data.gpuNum;for(let p=0;p<c;p++)u.value.push(p+1)})},Se=()=>{if(C.datasets==null||C.datasets.length==0){re.warning("请选择评测集");return}let a={id:f.query.jid,job_type:"eval",eval_param:{pth:C.pth,datasets:C.datasets,VISAION_NEED_GPUS:C.VISAION_NEED_GPUS}};xt(a).then(e=>{B.value=!1,se()})},fe=()=>{var n;let a=[],e=k.value;if(!(!e||e.length===0)){for(let c=0;c<e.length;c++){const p=e[c];a.push(p.id)}Ie({project_id:(n=S.currentProject)==null?void 0:n.id,job_ids:a,job_type:"eval"}).then(c=>{var D;let p=[],j=(D=c.data)==null?void 0:D.data;k.value.forEach(V=>{V.status=bt[j[V.id]],p.push(V)}),k.value=p})}},se=(a=1)=>{var e;ft({page:a,size:10,job_id:(e=f.query)==null?void 0:e.jid}).then(n=>{Ae.value=n.data.total,k.value=n.data.data,fe(),W=setInterval(fe,2e3)})};let W,ge;const ce=d(!0),Ne=()=>{var a;ce.value&&Ie({project_id:(a=S.currentProject)==null?void 0:a.id,job_ids:[f.query.jid],job_type:"train"}).then(e=>{var p;let c=((p=e.data)==null?void 0:p.data)[f.query.jid];c==H.RUNNING||c==H.PENDING?ce.value=!0:ce.value=!1,c==H.TERMINATED&&(M.value=!1)})},_=a=>{var p;a!=null&&a.id&&(de=a);let e=de.id,n=(p=S.currentProject)==null?void 0:p.id,c=_e("projects/"+n+"/eval/"+e+"/visaion.log");he.get(xe(`${c}`)).then(j=>{var V;let D=j.data.split(`
`);(V=q.value)==null||V.setLogs(D)}),$.value=!0},ve=()=>{var a;Ie({project_id:(a=S.currentProject)==null?void 0:a.id,job_ids:[f.query.jid],job_type:"train"}).then(e=>{let n=e.data.data[f.query.jid];n!=H.READY&&n!=H.PENDING&&setTimeout(()=>{z(n)},900),(n==H.RUNNING||n==H.COMPLETED||n==H.PENDING)&&(M.value=!0)})},Ae=d(0),Re=d(1),Xe=a=>{Re.value=a,se(a)},Qe=a=>({已完成:"primary",已终止:"danger"})[a];return be(()=>{var a;(a=b.value)==null||a.setLogs(["None"]),ve(),se(),ge=setInterval(Ne,2e3)}),Be(()=>{console.log("clearInterval-modeldetail"),clearInterval(ee),clearInterval(W),clearInterval(ge),Q.terminate()}),(a,e)=>{const n=i("el-button"),c=i("el-collapse-item"),p=i("el-col"),j=i("el-row"),D=i("el-tab-pane"),V=i("el-tabs"),te=i("el-table-column"),$e=i("el-tag"),Ze=i("el-table"),Ke=i("el-pagination"),et=i("el-collapse"),De=i("el-option"),je=i("el-select"),ke=i("el-form-item"),tt=i("el-form"),Te=i("el-dialog"),lt=i("el-descriptions-item"),at=i("el-descriptions"),ot=i("el-icon"),nt=i("el-link"),st=pt("loading");return g(),I(Y,null,[m("div",Ht,[m("div",Yt,[t(n,{type:"primary",style:{"margin-bottom":"8px",color:"white"},onClick:e[0]||(e[0]=o=>X(y).push("/sample/model"))},{default:l(()=>e[10]||(e[10]=[E("返回")])),_:1}),t(et,{modelValue:Z.value,"onUpdate:modelValue":e[2]||(e[2]=o=>Z.value=o)},{default:l(()=>[t(c,{name:"config",style:{"margin-bottom":"14px"}},{title:l(()=>e[11]||(e[11]=[m("div",{style:{"border-bottom":"0px solid lightgray"}},[m("div",null,[m("span",{class:""},"模型配置")])],-1)])),default:l(()=>[m("div",Wt,[t(Ct,{mode:"show"}),e[12]||(e[12]=m("div",{id:"disableDiv","aria-disabled":!0,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},null,-1))])]),_:1}),t(c,{name:"detail",style:{"margin-bottom":"14px"}},{title:l(()=>e[13]||(e[13]=[m("div",{style:{"border-bottom":"0px solid lightgray"}},[m("div",null,[m("span",{class:""},"训练详情")])],-1)])),default:l(()=>[m("div",null,[t(V,{modelValue:G.value,"onUpdate:modelValue":e[1]||(e[1]=o=>G.value=o),class:"demo-tabs",onTabClick:a.handleClick},{default:l(()=>[Ge((g(),R(D,{label:"训练报表",name:"first",id:"detailChart","element-loading-background":"rgba(122, 122, 122, 0.8)"},{default:l(()=>[t(j,{gutter:20,class:"conts_modle"},{default:l(()=>[t(p,{span:24,class:"cn_item",style:{width:"100%"}},{default:l(()=>{var o;return[(g(),R(ze,{title:"学习率和损失函数",type:X(le).LEARNING,xData:(o=N.value)==null?void 0:o.logMetrics.xList,yData:N.value.logMetrics.yListData,key:v.value},null,8,["type","xData","yData"]))]}),_:1}),t(p,{span:24,class:"cn_item",style:{width:"100%"}},{default:l(()=>{var o,F;return[(g(),R(ze,{title:"训练指标",type:X(le).TRAIN,xData:(o=N.value)==null?void 0:o.logMetrics.xOtherList,yData:(F=N.value)==null?void 0:F.logMetrics.yOtherData,key:T.value},null,8,["type","xData","yData"]))]}),_:1})]),_:1})]),_:1})),[[st,M.value]]),t(D,{label:"训练详情",name:"second"},{default:l(()=>[t(Oe,{ref_key:"consoleLog",ref:b},null,512)]),_:1})]),_:1},8,["modelValue","onTabClick"])])]),_:1}),t(c,{name:"1",style:{"margin-bottom":"14px"}},{title:l(()=>[m("div",Xt,[m("div",Qt,[e[14]||(e[14]=m("span",{class:"text-lg font-semibold text-gray-900"},"模型评测",-1)),t(n,{onClick:Le,type:"primary",style:{color:"white","background-color":"#555fff",width:"20px",height:"20px","font-size":"10px","margin-left":"6px"},icon:X(He),circle:""},null,8,["icon"])])])]),default:l(()=>[t(Ze,{data:k.value,stripe:"",class:"w-full"},{default:l(()=>[t(te,{prop:"id",label:"编号",width:"100"}),t(te,{prop:"status",label:"状态",width:"100"},{default:l(({row:o})=>[m("div",Zt,[t($e,{type:Qe(o.status),effect:"light",class:"whitespace-nowrap"},{default:l(()=>[E(O(o.status),1)]),_:2},1032,["type"])])]),_:1}),t(te,{prop:"pth",label:"checkpoint",width:"300"}),t(te,{prop:"datasets",label:"评测集"},{default:l(o=>[(g(!0),I(Y,null,K(o.row.datasets,F=>(g(),R($e,{effect:"plain"},{default:l(()=>[E(O(F.name),1)]),_:2},1024))),256))]),_:1}),t(te,{prop:"user_id",label:"创建人",width:"200"},{default:l(o=>[E(O(o.row.user.username),1)]),_:1}),t(te,{prop:"create_time",label:"创建时间",width:"230"},{default:l(({row:o})=>[E(O(o.create_time.replace("T"," ")),1)]),_:1}),t(te,{label:"操作",width:"200"},{default:l(({row:o})=>[m("div",Kt,[t(n,{style:{"margin-left":"0"},type:"primary",link:"",class:"!rounded-button whitespace-nowrap",onClick:F=>r(o)},{default:l(()=>e[15]||(e[15]=[E(" 分析 ")])),_:2},1032,["onClick"]),t(n,{type:"primary",link:"",class:"!rounded-button whitespace-nowrap",onClick:F=>s(o)},{default:l(()=>e[16]||(e[16]=[E(" 指标 ")])),_:2},1032,["onClick"]),t(n,{style:{"margin-left":"0"},type:"primary",link:"",class:"!rounded-button whitespace-nowrap",onClick:F=>_(o)},{default:l(()=>e[17]||(e[17]=[E(" 日志 ")])),_:2},1032,["onClick"]),t(n,{type:"danger",link:"",class:"!rounded-button whitespace-nowrap",onClick:F=>h(o)},{default:l(()=>e[18]||(e[18]=[E(" 删除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),t(Ke,{style:{"margin-top":"8px"},background:"",layout:"prev, pager, next",total:Ae.value,"default-page-size":10,onCurrentChange:Xe},null,8,["total"])]),_:1}),t(Jt,{job_id:X(f).query.jid,ref_key:"exportRef",ref:x},null,8,["job_id"])]),_:1},8,["modelValue"])])]),t(Te,{modelValue:B.value,"onUpdate:modelValue":e[7]||(e[7]=o=>B.value=o),title:"评测任务",width:"400"},{footer:l(()=>[m("div",el,[t(n,{onClick:e[6]||(e[6]=o=>B.value=!1),style:{"margin-right":"10px"}},{default:l(()=>e[19]||(e[19]=[E("取消")])),_:1}),t(n,{style:{color:"white"},type:"primary",onClick:Se},{default:l(()=>e[20]||(e[20]=[E(" 运行 ")])),_:1})])]),default:l(()=>[t(tt,{model:C},{default:l(()=>[Ge(t(ke,{label:"GPU数量","label-width":"70"},{default:l(()=>[t(je,{modelValue:C.VISAION_NEED_GPUS,"onUpdate:modelValue":e[3]||(e[3]=o=>C.VISAION_NEED_GPUS=o),style:{width:"300px"}},{default:l(()=>[(g(!0),I(Y,null,K(u.value,o=>(g(),R(De,{label:o,value:o},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},512),[[mt,u.value.length>0&&u.value[0]>1||u.value.length>1]]),t(ke,{label:"checkpoint","label-width":"70"},{default:l(()=>[t(je,{modelValue:C.pth,"onUpdate:modelValue":e[4]||(e[4]=o=>C.pth=o),style:{width:"300px"}},{default:l(()=>[(g(!0),I(Y,null,K(U.value,o=>(g(),R(De,{label:o,value:o},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(ke,{label:"评测集","label-width":"70",prop:"datasets",required:""},{default:l(()=>[t(je,{style:{width:"300px"},modelValue:C.datasets,"onUpdate:modelValue":e[5]||(e[5]=o=>C.datasets=o),onChange:a.FnChange,onClear:a.clearSelectEval,clearable:"",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"选择数据集"},{default:l(()=>[(g(!0),I(Y,null,K(ue.value,o=>(g(),R(De,{key:o.id,disabled:o.has_raw_status,label:o.has_raw_status?o.name+"-不可使用未处理的样本作为训练集或验证集":o.name,value:o.id},null,8,["disabled","label","value"]))),128))]),_:1},8,["modelValue","onChange","onClear"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(Te,{modelValue:ae.value,"onUpdate:modelValue":e[8]||(e[8]=o=>ae.value=o),title:"指标查看"},{default:l(()=>[t(at,{title:"",column:4,size:"default",direction:"vertical",style:_t(w.value),border:""},{default:l(()=>[(g(!0),I(Y,null,K(ie.value,(o,F)=>(g(),R(lt,{key:F,label:F},{default:l(()=>[E(O(parseFloat(o).toFixed(3)),1)]),_:2},1032,["label"]))),128))]),_:1},8,["style"])]),_:1},8,["modelValue"]),t(Te,{modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=o=>$.value=o),title:"日志信息"},{header:l(()=>[e[21]||(e[21]=E(" 日志信息 ")),t(nt,{onClick:_},{default:l(()=>[t(ot,{style:{"font-size":"18px","margin-bottom":"2px"}},{default:l(()=>[t(X(Je))]),_:1})]),_:1})]),default:l(()=>[t(Oe,{ref_key:"evalConsoleLog",ref:q},null,512)]),_:1},8,["modelValue"])],64)}}}),cl=Ce(tl,[["__scopeId","data-v-b820870a"]]);export{cl as default};
//# sourceMappingURL=ModelDetail-tFEe6Hdz.js.map
