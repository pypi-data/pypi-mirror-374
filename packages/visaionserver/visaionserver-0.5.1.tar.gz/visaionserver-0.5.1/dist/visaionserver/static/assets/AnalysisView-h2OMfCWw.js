import{d as b,y as v,c as D,b as e,t as p,o as S,s as x,x as R,O as w,ar as E,r as h,z as U,W as V,E as $,h as B,D as C,e as g,j as M}from"./index-o9GSe-j3.js";import{u as j}from"./dataset-Bfw4s_vB.js";import{S as L}from"./SampleListComponent-C6l9fJTz.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dataset-_GDMqlnk.js";import"./project-AUnovL9V.js";import"./label-NvfHJJOO.js";import"./global-BtpACQe8.js";import"./tag-VQIGgSji.js";import"./LabelManage-COK4wkk3.js";import"./tools-CaaA-KU6.js";import"./const-DgT7xBJS.js";import"./validator-da1ShlCT.js";import"./index-u3wYLQ4o.js";import"./model-D63OprUB.js";const N={class:"analysis-toolbar"},z={class:"toolbar-header"},O={class:"evaluation-info"},W={class:"model-info"},F=b({__name:"AnalysisToolbar",props:{evalId:{type:String,required:!0},modelId:{type:String,required:!0},datasets:{type:Array,required:!0,default:()=>[]}},emits:["return","threshold-change","metric-change"],setup(i,{emit:l}){const r=i,c=v(()=>Array.isArray(r.datasets)?r.datasets.map(s=>s.name).join(", "):""),u=l,o=()=>{u("return")};return(s,t)=>(S(),D("div",N,[e("div",z,[e("div",{class:"title"},[e("div",{class:"nav-group left-section"},[e("button",{class:"back-button",onClick:o},t[0]||(t[0]=[e("i",{class:"icon-back"},null,-1)]))]),t[1]||(t[1]=e("span",null,"模型分析",-1))]),e("div",O,[e("div",W,[e("span",null,"评测ID: "+p(i.evalId),1),e("span",null,"模型ID: "+p(i.modelId),1),e("span",null,"数据集: "+p(c.value),1)])])])]))}}),G=A(F,[["__scopeId","data-v-76e8082e"]]),H={class:"analysis-view"},J={class:"sticky-toolbar"},K={class:"sample-list-container"},Q=b({__name:"AnalysisView",setup(i){var y;const l=w(),r=B(),c=x(),u=j(),{currentProject:o}=R(c),s=v(()=>l.query.evalId),t=v(()=>l.query.modelId),d=l.query.datasetIds,f=E(((y=o.value)==null?void 0:y.id)+"/eval/"+s.value+"/"),n=h([]),_=h(!1),k=async()=>{var a;if(!((a=o.value)!=null&&a.id)||!(d!=null&&d.length)){console.warn("缺少项目ID或数据集ID，无法获取数据集信息");return}_.value=!0;try{const I=(await u.fetchDatasets(o.value.id)).datasets.filter(T=>d.includes(T.id.toString()));n.value=I,console.log("获取到数据集信息:",I)}catch(m){console.error("获取数据集失败:",m),n.value=[]}finally{_.value=!1}};U(o,a=>{a!=null&&a.id&&k()},{immediate:!0}),console.log(n.value,"final datasets"),console.log(f),V(async()=>{if(!s.value||!t.value){$.error("缺少必要的参数"),r.push("/sample/model");return}await C(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0})});const q=()=>{r.push({path:"/sample/modeldetail",query:{jid:t.value}})};return(a,m)=>(S(),D("div",H,[e("div",J,[g(G,{evalId:s.value,modelId:t.value,datasets:n.value,onReturn:q},null,8,["evalId","modelId","datasets"])]),e("div",K,[g(L,{mode:"analysis",evalId:s.value,modelId:t.value,datasets:n.value,predictUrl:M(f)},null,8,["evalId","modelId","datasets","predictUrl"])])]))}}),ue=A(Q,[["__scopeId","data-v-1d684207"]]);export{ue as default};
//# sourceMappingURL=AnalysisView-h2OMfCWw.js.map
