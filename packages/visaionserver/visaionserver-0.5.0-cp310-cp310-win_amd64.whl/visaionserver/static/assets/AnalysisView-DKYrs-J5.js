import{d as b,y as v,c as D,b as e,t as p,o as S,s as x,x as R,O as w,ar as E,r as h,z as U,W as V,E as $,h as B,D as C,e as g,j as M}from"./index-DeXzsHYB.js";import{u as j}from"./tag-40RALpC4.js";import{S as L}from"./SampleListComponent-DPjHHEsW.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dataset-C69Q8yLu.js";import"./project-pakq9IUW.js";import"./label-BkejwNG2.js";import"./global-2z0YYaJU.js";import"./LabelManage-D7VrEeu0.js";import"./tools-CaaA-KU6.js";import"./const-DgT7xBJS.js";import"./validator-D9zwvgt-.js";import"./index-u3wYLQ4o.js";import"./model-CscD02Wt.js";const N={class:"analysis-toolbar"},z={class:"toolbar-header"},O={class:"evaluation-info"},W={class:"model-info"},F=b({__name:"AnalysisToolbar",props:{evalId:{type:String,required:!0},modelId:{type:String,required:!0},datasets:{type:Array,required:!0,default:()=>[]}},emits:["return","threshold-change","metric-change"],setup(d,{emit:l}){const r=d,c=v(()=>Array.isArray(r.datasets)?r.datasets.map(s=>s.name).join(", "):""),u=l,o=()=>{u("return")};return(s,t)=>(S(),D("div",N,[e("div",z,[e("div",{class:"title"},[e("div",{class:"nav-group left-section"},[e("button",{class:"back-button",onClick:o},t[0]||(t[0]=[e("i",{class:"icon-back"},null,-1)]))]),t[1]||(t[1]=e("span",null,"模型分析",-1))]),e("div",O,[e("div",W,[e("span",null,"评测ID: "+p(d.evalId),1),e("span",null,"模型ID: "+p(d.modelId),1),e("span",null,"数据集: "+p(c.value),1)])])])]))}}),G=A(F,[["__scopeId","data-v-76e8082e"]]),H={class:"analysis-view"},J={class:"sticky-toolbar"},K={class:"sample-list-container"},Q=b({__name:"AnalysisView",setup(d){var y;const l=w(),r=B(),c=x(),u=j(),{currentProject:o}=R(c),s=v(()=>l.query.evalId),t=v(()=>l.query.modelId),i=l.query.datasetIds,f=E(((y=o.value)==null?void 0:y.id)+"/eval/"+s.value+"/"),n=h([]),_=h(!1),k=async()=>{var a;if(!((a=o.value)!=null&&a.id)||!(i!=null&&i.length)){console.warn("缺少项目ID或数据集ID，无法获取数据集信息");return}_.value=!0;try{const I=(await u.fetchDatasets(o.value.id)).datasets.filter(T=>i.includes(T.id.toString()));n.value=I,console.log("获取到数据集信息:",I)}catch(m){console.error("获取数据集失败:",m),n.value=[]}finally{_.value=!1}};U(o,a=>{a!=null&&a.id&&k()},{immediate:!0}),console.log(n.value,"final datasets"),console.log(f),V(async()=>{if(!s.value||!t.value){$.error("缺少必要的参数"),r.push("/sample/model");return}await C(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0})});const q=()=>{r.push({path:"/sample/modeldetail",query:{jid:t.value}})};return(a,m)=>(S(),D("div",H,[e("div",J,[g(G,{evalId:s.value,modelId:t.value,datasets:n.value,onReturn:q},null,8,["evalId","modelId","datasets"])]),e("div",K,[g(L,{mode:"analysis",evalId:s.value,modelId:t.value,datasets:n.value,predictUrl:M(f)},null,8,["evalId","modelId","datasets","predictUrl"])])]))}}),ce=A(Q,[["__scopeId","data-v-1d684207"]]);export{ce as default};
//# sourceMappingURL=AnalysisView-DKYrs-J5.js.map
