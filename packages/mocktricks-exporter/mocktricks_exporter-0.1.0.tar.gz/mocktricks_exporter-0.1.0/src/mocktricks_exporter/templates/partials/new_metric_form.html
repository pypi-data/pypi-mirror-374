<div class="rounded-lg border bg-white p-4 shadow-sm">
  <div class="mb-3 flex items-center justify-between">
    <h3 class="text-sm font-semibold">Create Metric</h3>
    <button
      class="text-xs text-slate-600 hover:text-slate-900"
      hx-get="/ui/metrics" hx-target="#new-metric-area" hx-swap="innerHTML">Close</button>
  </div>
  <form
    hx-post="/ui/metric"
    hx-target="#new-metric-area"
    hx-swap="innerHTML"
    class="grid grid-cols-1 gap-3 text-sm"
  >
    <div>
      <label class="block text-xs text-neutral-600">Name</label>
      <input name="name" required class="mt-1 w-full rounded-md border px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="http_requests_total" />
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      {% if not disable_units %}
      <div>
        <label class="block text-xs text-neutral-600">Unit</label>
        <input name="unit" class="mt-1 w-full rounded-md border px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="bytes" />
      </div>
      {% endif %}
      <div class="{% if disable_units %}sm:col-span-2{% endif %}">
        <label class="block text-xs text-neutral-600">Labels (comma separated)</label>
        <input name="labels" class="mt-1 w-full rounded-md border px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="method, status" />
      </div>
    </div>
    <div>
      <label class="block text-xs text-neutral-600">Documentation</label>
      <textarea name="documentation" rows="2" class="mt-1 w-full rounded-md border px-3 py-1.5" placeholder="What this metric tracks"></textarea>
    </div>

    <details class="rounded-md border p-3">
      <summary class="cursor-pointer text-xs text-slate-700">Add initial labelset (optional)</summary>
      <div class="mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3">
        <div>
          <label class="block text-xs text-neutral-600">Kind</label>
          <select name="kind" class="mt-1 w-full rounded-md border px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-400"
                  hx-get="/ui/value-fields" hx-trigger="change" hx-target="#init-fields" hx-swap="innerHTML"
                  hx-vals='{"prefix":"init_"}'>
            <option value="">None</option>
            <option value="static">static</option>
            <option value="ramp">ramp</option>
            <option value="sine">sine</option>
            <option value="square">square</option>
            <option value="gaussian">gaussian</option>
          </select>
        </div>
        <div class="sm:col-span-2">
          <label class="block text-xs text-neutral-600">Value Labels (comma separated)</label>
          <input name="init_labels" class="mt-1 w-full rounded-md border px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="e.g. GET, 200" />
        </div>
        <div id="init-fields" class="contents"></div>
      </div>
    </details>

    <div class="mt-1 flex items-center gap-2">
      <button class="inline-flex items-center rounded-md border border-indigo-600 bg-indigo-600 px-3 py-1.5 text-xs text-white hover:bg-indigo-500">Create</button>
      <button type="button" class="inline-flex items-center rounded-md border px-3 py-1.5 text-xs hover:bg-slate-50"
        hx-get="/ui/metrics" hx-target="#new-metric-area" hx-swap="innerHTML">Cancel</button>
    </div>
  </form>
</div>
