{
  "commit_hash": "fe9d0061c413f8fb8c529b18b592b04170850ded",
  "commit_url": "https://git.kernel.org/stable/c/fe9d0061c413f8fb8c529b18b592b04170850ded",
  "commit_details": "commit fe9d0061c413f8fb8c529b18b592b04170850ded\nAuthor:     Philip Yang <Philip.Yang@amd.com>\nAuthorDate: Mon Feb 10 09:42:31 2025 -0500\nCommit:     Alex Deucher <alexander.deucher@amd.com>\nCommitDate: Thu Feb 27 16:50:05 2025 -0500\n\n    drm/amdkfd: debugfs hang_hws skip GPU with MES\n    \n    debugfs hang_hws is used by GPU reset test with HWS, for MES this crash\n    the kernel with NULL pointer access because dqm->packet_mgr is not setup\n    for MES path.\n    \n    Skip GPU with MES for now, MES hang_hws debugfs interface will be\n    supported later.\n    \n    Signed-off-by: Philip Yang <Philip.Yang@amd.com>\n    Reviewed-by: Kent Russell <kent.russell@amd.com>\n    Reviewed-by: Felix Kuehling <felix.kuehling@amd.com>\n    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>\n",
  "patch_content": "commit fe9d0061c413f8fb8c529b18b592b04170850ded\nAuthor: Philip Yang <Philip.Yang@amd.com>\nDate:   Mon Feb 10 09:42:31 2025 -0500\n\n    drm/amdkfd: debugfs hang_hws skip GPU with MES\n    \n    debugfs hang_hws is used by GPU reset test with HWS, for MES this crash\n    the kernel with NULL pointer access because dqm->packet_mgr is not setup\n    for MES path.\n    \n    Skip GPU with MES for now, MES hang_hws debugfs interface will be\n    supported later.\n    \n    Signed-off-by: Philip Yang <Philip.Yang@amd.com>\n    Reviewed-by: Kent Russell <kent.russell@amd.com>\n    Reviewed-by: Felix Kuehling <felix.kuehling@amd.com>\n    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>\n\ndiff --git a/drivers/gpu/drm/amd/amdkfd/kfd_device.c b/drivers/gpu/drm/amd/amdkfd/kfd_device.c\nindex 095e73790dc4..b9c82be6ce13 100644\n--- a/drivers/gpu/drm/amd/amdkfd/kfd_device.c\n+++ b/drivers/gpu/drm/amd/amdkfd/kfd_device.c\n@@ -1604,6 +1604,11 @@ int kfd_debugfs_hang_hws(struct kfd_node *dev)\n \t\treturn -EINVAL;\n \t}\n \n+\tif (dev->kfd->shared_resources.enable_mes) {\n+\t\tdev_err(dev->adev->dev, \"Inducing MES hang is not supported\\n\");\n+\t\treturn -EINVAL;\n+\t}\n+\n \treturn dqm_debugfs_hang_hws(dev->dqm);\n }\n \n",
  "changed_files": [
    "drivers/gpu/drm/amd/amdkfd/kfd_device.c"
  ],
  "diff_stats": " drivers/gpu/drm/amd/amdkfd/kfd_device.c | 5 +++++\n 1 file changed, 5 insertions(+)\n"
}