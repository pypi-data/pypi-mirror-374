import { $APP, shadow$provide } from "./common.js";
var FI=function(a){$APP.wi($APP.M(["Saving notebook to database"]));return $APP.X.u(CI,$APP.W,[DI,":notebook.py"].join(""),new $APP.l(null,2,[$APP.rw,a,EI,(new Date).toISOString()],null))},GI=function(){$APP.wi($APP.M(["Reading notebook from database"]));return $APP.Df($APP.u(CI),new $APP.U(null,2,5,$APP.V,[[DI,":notebook.py"].join(""),$APP.rw],null))},KI=function(){var a={saveFile:FI,readFile:GI};window.__MARIMO_MOUNT_CONFIG__.config.save=$APP.ql(new $APP.l(null,3,[HI,"after_delay",II,2E3,JI,!0],
null));return window.__MARIMO_MOUNT_CONFIG__.fileStores=$APP.ql(new $APP.U(null,1,5,$APP.V,[a],null))},II=new $APP.P(null,"autosave_delay","autosave_delay",-540817600),JI=new $APP.P(null,"format_on_save","format_on_save",-218481126),EI=new $APP.P(null,"lastModified","lastModified",-1993155246),HI=new $APP.P(null,"autosave","autosave",-879866416);var LI=new URLSearchParams(window.location.search),MI=$APP.r,NI=MI.g,OI=LI.get("schem"),DI=[NI.call(MI,$APP.n(OI)?OI:"myschem"),"$notebook"].join(""),PI=new $APP.kA("schematics"),CI=$APP.$m(PI,DI,$APP.Jl($APP.R));$APP.Ym(PI,$APP.M([CI]));$APP.ja("nyancad.mosaic.filestore.init",KI);KI();