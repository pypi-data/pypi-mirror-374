{
  "common-conf": {
    "destination-directory-path": "gs://stock-prod-lake/transforming",
    "path-generator-name": "datetime_path",
    "saver-name": "iceberg",
    "saver-write-mode": "append",
    "source-directory-path": "gs://stock-prod-lake/pre-landing/stock_loss/year={YEAR}/month={MONTH}/day={DAY}/hour={HOUR}/*.json",
    "source-reader-name": "json",
    "source-reader-options": {
      "multiline": "true"
    },
    "task-datetime-format": "%Y-%m-%d %H:%M:%S%z",
    "transformer-operator": "column_select_transformer,custom_sql_transformer,define_datatype_transformer"
  },
  "hadoop-conf": {
    "fs.gs.project.id": "stock-data-prod",
    "google.cloud.auth.service.account.json.keyfile": "/cred/data-platform-xxxx-xxxx.json",
    "google.cloud.auth.type": "SERVICE_ACCOUNT_JSON_KEYFILE"
  },
  "iceberg-options": {
    "ingest-date-column": "created_date",
    "matched-column": [
      "*"
    ],
    "operation": "upsert",
    "partition-by": "doc_date",
    "precombined-field": "created_date",
    "primary-key": "_id,sa_document_number",
    "table-name": "stock_loss"
  },
  "spark-conf": {
    "spark.sql.catalog.local.warehouse": "gs://stock-prod-lake/transforming",
    "spark.sql.session.timeZone": "UTC"
  },
  "transformer-conf": {
    "column-selection-list": [
      "_id",
      "saDocumentNumber",
      "apDocumentNumber",
      "documentNumber",
      "createdDate",
      "skuList",
      "createdBy",
      "branchCode"
    ],
    "custom-sql-file": "gs://stock-prod-lake/configs/stock_loss/stock_loss_query.sql",
    "schema-type-list": [
      {
        "_id": "StringType"
      },
      {
        "sa_document_number": "StringType"
      },
      {
        "ap_document_number": "StringType"
      },
      {
        "document_number": "StringType"
      },
      {
        "created_date": "DatetimeType(yyyy-MM-dd'T'HH:mm:ss.SSSZ)"
      },
      {
        "doc_date": "DateType(yyyy-MM-dd)"
      },
      {
        "sku_list": "StringType"
      },
      {
        "created_by": "StringType"
      },
      {
        "branch_code": "StringType"
      },
      {
        "ts": "DatetimeType(yyyy-MM-dd'T'HH:mm:ss.SSS'Z')"
      }
    ]
  }
}
